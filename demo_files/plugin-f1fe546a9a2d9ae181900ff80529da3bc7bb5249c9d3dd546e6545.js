define("discourse/plugins/discourse-akismet/admin/models/akismet-queue",["exports","discourse/lib/ajax"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={confirmSpam:function(e){return(0,t.ajax)("/admin/plugins/akismet/confirm_spam",{type:"POST",data:{post_id:e.get("id")}})},allow:function(e){return(0,t.ajax)("/admin/plugins/akismet/allow",{type:"POST",data:{post_id:e.get("id")}})},dismiss:function(e){return(0,t.ajax)("/admin/plugins/akismet/dismiss",{type:"POST",data:{post_id:e.get("id")}})},deleteUser:function(e){return(0,t.ajax)("/admin/plugins/akismet/delete_user",{type:"DELETE",data:{user_id:e.get("user_id"),post_id:e.get("id")}})},findAll:function(){return(0,t.ajax)("/admin/plugins/akismet/index.json").then(function(e){return e.posts=e.posts.map(function(e){return Discourse.Post.create(e)}),e})}}}),Ember.TEMPLATES["javascripts/connectors/site-map-links/akismet-review"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["currentUser","staff"]]],null,{"statements":[[0,"  "],[11,"li",[]],[13],[0,"\\n"],[6,["link-to"],["adminPlugins.akismet"],null,{"statements":[[0,"      "],[1,[33,["i18n"],["akismet.title"],null],false],[0,"\\n"],[6,["if"],[[28,["currentUser","akismet_review_count"]]],null,{"statements":[[0,"        "],[11,"span",[]],[15,"class","badge-notification flagged-posts"],[13],[1,[28,["currentUser","akismet_review_count"]],false],[14],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/site-map-links/akismet-review"}}),Ember.TEMPLATES["javascripts/admin/plugins-akismet"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["enabled"]]],null,{"statements":[[6,["if"],[[28,["stats"]]],null,{"statements":[[0,"    "],[11,"table",[]],[15,"class","tbl spam-stats"],[13],[0,"\\n      "],[11,"tr",[]],[13],[0,"\\n        "],[11,"th",[]],[13],[1,[33,["i18n"],["akismet.stats.scanned"],null],false],[14],[0,"\\n        "],[11,"th",[]],[13],[1,[33,["i18n"],["akismet.stats.needs_review"],null],false],[14],[0,"\\n        "],[11,"th",[]],[13],[1,[33,["i18n"],["akismet.stats.confirmed_spam"],null],false],[14],[0,"\\n        "],[11,"th",[]],[13],[1,[33,["i18n"],["akismet.stats.confirmed_ham"],null],false],[14],[0,"\\n      "],[14],[0,"\\n      "],[11,"tr",[]],[13],[0,"\\n        "],[11,"td",[]],[13],[1,[28,["stats","scanned"]],false],[14],[0,"\\n        "],[11,"td",[]],[13],[1,[28,["stats","needs_review"]],false],[14],[0,"\\n        "],[11,"td",[]],[13],[1,[28,["stats","confirmed_spam"]],false],[14],[0,"\\n        "],[11,"td",[]],[13],[1,[28,["stats","confirmed_ham"]],false],[14],[0,"\\n      "],[14],[0,"\\n    "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[6,["if"],[[28,["currentUser","admin"]]],null,{"statements":[[0,"    "],[1,[33,["d-button"],null,[["label","icon","class","action"],["admin.plugins.change_settings","gear","settings-button","showSettings"]]],false],[0,"\\n"]],"locals":[]},null],[0,"\\n  "],[1,[33,["d-button"],null,[["action","icon","class","label","disabled"],["refresh","refresh","btn-primary","akismet.refresh",[28,["performingAction"]]]]],false],[0,"\\n\\n"],[6,["if"],[[28,["model","length"]]],null,{"statements":[[0,"    "],[11,"h3",[]],[15,"class","review-queue"],[13],[1,[33,["i18n"],["akismet.posts_to_review"],null],false],[14],[0,"\\n\\n    "],[11,"div",[]],[15,"class","row"],[13],[0,"\\n      "],[11,"table",[]],[15,"class","akismet-queue"],[13],[0,"\\n        "],[11,"tbody",[]],[13],[0,"\\n"],[6,["each"],[[28,["sortedPosts"]]],null,{"statements":[[0,"          "],[11,"tr",[]],[13],[0,"\\n            "],[11,"td",[]],[15,"class","cooked"],[13],[0,"\\n\\n              "],[11,"div",[]],[15,"class","post-info"],[13],[0,"\\n                "],[6,["link-to"],["adminUser",[28,["post","user_id"]],[28,["post","username"]]],null,{"statements":[[1,[33,["avatar"],[[28,["post"]]],[["imageSize"],["small"]]],false],[0," "],[1,[28,["post","username"]],false]],"locals":[]},null],[0,"\\n                "],[11,"a",[]],[16,"href",[28,["post","url"]],null],[15,"target","_blank"],[15,"class","post-link"],[13],[0,"#"],[1,[28,["post","id"]],false],[14],[0,"\\n              "],[14],[0,"\\n              "],[1,[28,["post","excerpt"]],true],[0,"\\n              "],[11,"div",[]],[15,"class","queue-actions"],[13],[0,"\\n                "],[1,[33,["d-button"],null,[["action","actionParam","icon","class","label","disabled"],["confirmSpamPost",[28,["post"]],"check","btn-primary","akismet.confirm_spam",[28,["performingAction"]]]]],false],[0,"\\n\\n                "],[1,[33,["d-button"],null,[["action","actionParam","icon","label","disabled"],["allowPost",[28,["post"]],"thumbs-o-up","akismet.not_spam",[28,["performingAction"]]]]],false],[0,"\\n\\n                "],[1,[33,["d-button"],null,[["action","actionParam","icon","label","disabled"],["dismiss",[28,["post"]],"times","akismet.dismiss",[28,["performingAction"]]]]],false],[0,"\\n\\n\\n"],[6,["if"],[[28,["post","user_id"]]],null,{"statements":[[0,"                  "],[1,[33,["d-button"],null,[["action","actionParam","icon","class","label","disabled"],["deleteUser",[28,["post"]],"trash-o","btn-danger","akismet.confirm_delete",[28,["performingAction"]]]]],false],[0,"\\n"]],"locals":[]},null],[0,"              "],[14],[0,"\\n            "],[14],[0,"\\n          "],[14],[0,"\\n"]],"locals":["post"]},null],[0,"        "],[14],[0,"\\n      "],[14],[0,"\\n    "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[]},{"statements":[[6,["if"],[[28,["currentUser","admin"]]],null,{"statements":[[0,"    "],[1,[33,["d-button"],null,[["label","icon","class","action"],["akismet.change_settings","gear","settings-button","showSettings"]]],false],[0,"\\n"]],"locals":[]},null],[0,"  "],[1,[33,["i18n"],["akismet.not_enabled"],null],true],[0,"\\n"]],"locals":[]}]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/plugins-akismet"}}),define("discourse/plugins/discourse-akismet/discourse/akismet-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"admin.adminPlugins",path:"/plugins",map:function(){this.route("akismet")}}}),define("discourse/plugins/discourse-akismet/discourse/controllers/admin-plugins-akismet",["exports","discourse/plugins/discourse-akismet/admin/models/akismet-queue"],function(e,t){"use strict";function n(){bootbox.alert(I18n.t("generic_error"))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({sortedPosts:Ember.computed.sort("model","postSorting"),postSorting:["id:asc"],enabled:!1,performingAction:!1,actions:{refresh:function(){var e=this;this.set("performingAction",!0),t.default.findAll().then(function(t){e.set("stats",t.stats),e.set("model",t.posts)}).catch(n).finally(function(){e.set("performingAction",!1)})},confirmSpamPost:function(e){var s=this;this.set("performingAction",!0),t.default.confirmSpam(e).then(function(){s.get("model").removeObject(e),s.incrementProperty("stats.confirmed_spam"),s.decrementProperty("stats.needs_review")}).catch(n).finally(function(){s.set("performingAction",!1)})},allowPost:function(e){var s=this;this.set("performingAction",!0),t.default.allow(e).then(function(){s.incrementProperty("stats.confirmed_ham"),s.decrementProperty("stats.needs_review"),s.get("model").removeObject(e)}).catch(n).finally(function(){s.set("performingAction",!1)})},deleteUser:function(e){var s=this;bootbox.confirm(I18n.t("akismet.delete_prompt",{username:e.get("username")}),function(a){!0===a&&(s.set("performingAction",!0),t.default.deleteUser(e).then(function(){s.get("model").removeObject(e),s.incrementProperty("stats.confirmed_spam"),s.decrementProperty("stats.needs_review")}).catch(n).finally(function(){s.set("performingAction",!1)}))})},dismiss:function(e){var s=this;this.set("performingAction",!0),t.default.dismiss(e).then(function(){s.get("model").removeObject(e)}).catch(n).finally(function(){s.set("performingAction",!1)})}}})}),define("discourse/plugins/discourse-akismet/discourse/initializers/add-akismet-count",["exports","discourse/lib/plugin-api"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"add-akismet-count",before:"register-discourse-location",after:"inject-objects",initialize:function(e){var n=e.lookup("current-user:main");if(n&&n.get("staff")){(0,t.withPluginApi)("0.4",function(e){e.addFlagProperty("currentUser.akismet_review_count"),e.decorateWidget("hamburger-menu:admin-links",function(e){return e.attach("link",{route:"adminPlugins.akismet",label:"akismet.title",badgeCount:"akismet_review_count",badgeClass:"flagged-posts"})})});e.lookup("message-bus:main").subscribe("/akismet_counts",function(e){e&&n.set("akismet_review_count",e.akismet_review_count||0)})}}}}),define("discourse/plugins/discourse-akismet/discourse/routes/admin-plugins-akismet",["exports","discourse/plugins/discourse-akismet/admin/models/akismet-queue"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({_enabled:!1,_stats:null,model:function(){var e=this;return t.default.findAll().then(function(t){return e._enabled=t.enabled,e._stats=t.stats,t.posts})},setupController:function(e,t){e.setProperties({model:t,enabled:this._enabled,stats:this._stats})}})}),define("discourse/plugins/discourse-assign/discourse-assign/assigns-activity-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"user.userActivity",map:function(){this.route("assigned")}}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-post-below-controls/show-not-assigned"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["unless"],[[28,["canAct"]]],null,{"statements":[[6,["if"],[[28,["actableFilter"]]],null,{"statements":[[6,["if"],[[28,["flaggedPost","topic","assigned_to_user"]]],null,{"statements":[[0,"      "],[11,"div",[]],[15,"class","cant-act-flagged-post"],[13],[0,"\\n        "],[11,"div",[]],[15,"class","cant-act-message"],[13],[0,"\\n          "],[1,[33,["i18n"],["discourse_assign.cant_act"],null],false],[0,"\\n        "],[14],[0,"\\n        "],[11,"div",[]],[15,"class","assigned-to"],[13],[0,"\\n          "],[1,[33,["assigned-to"],null,[["user"],[[28,["flaggedPost","topic","assigned_to_user"]]]]],false],[0,"\\n        "],[14],[0,"\\n      "],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"      "],[11,"div",[]],[15,"class","cant-act-flagged-post"],[13],[0,"\\n        "],[11,"div",[]],[15,"class","cant-act-message"],[13],[0,"\\n          "],[1,[33,["i18n"],["discourse_assign.cant_act_unclaimed"],null],false],[0,"\\n        "],[14],[0,"\\n      "],[14],[0,"\\n"]],"locals":[]}]],"locals":[]},null]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-post-below-controls/show-not-assigned"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-topic-header-row/add-assigned-header"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"th",[]],[15,"class","topic-assigned-to"],[13],[1,[33,["i18n"],["discourse_assign.assigned"],null],false],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-topic-header-row/add-assigned-header"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-post-controls/claim-flagged-post"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["claim-topic"],null,[["topic"],[[28,["flaggedPost","topic"]]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-post-controls/claim-flagged-post"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/flagged-post-controls/claim-flagged-post",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e){return e.actableFilter&&!e.topic}}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-activity-bottom/assigned-list"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["currentUser","staff"]]],null,{"statements":[[6,["link-to"],["userActivity.assigned"],null,{"statements":[[0,"  "],[11,"i",[]],[15,"class","glyph fa fa-user-plus"],[13],[14],[1,[33,["i18n"],["discourse_assign.assigned"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/user-activity-bottom/assigned-list"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-topics-before/add-listener"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["flagged-topic-listener"],null,[["flaggedTopics"],[[28,["flaggedTopics"]]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-topics-before/add-listener"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-topic-details-header/assigned-to"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"class","assign-controls"],[13],[0,"\\n  "],[1,[33,["flagged-topic-listener"],null,[["topic"],[[28,["topic"]]]]],false],[0,"\\n  "],[1,[33,["claim-topic"],null,[["topic"],[[28,["topic"]]]]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-topic-details-header/assigned-to"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/user-messages-nav/assigned-messages",["exports"],function(e){"use strict";function t(e,t){return t.currentUser&&t.currentUser.get("staff")&&(!t.get("site.mobileView")||e.model.get("isPrivateMessage"))}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldShowAssigned=t,e.default={shouldRender:function(e,n){return t(e,n)}}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-messages-nav/assigned-messages"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["link-to"],["userPrivateMessages.assigned",[28,["model"]]],null,{"statements":[[0,"  "],[1,[33,["d-icon"],["user-plus"],[["class"],["glyph"]]],false],[0,"\\n  "],[1,[33,["i18n"],["discourse_assign.assigned"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/user-messages-nav/assigned-messages"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-topic-row/add-claim-controls"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"td",[]],[13],[0,"\\n  "],[1,[33,["claim-topic"],null,[["topic"],[[28,["topic"]]]]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-topic-row/add-claim-controls"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/topic-footer-main-buttons-before-create/assign-button"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["topic","assigned_to_user","username"]]],null,{"statements":[[1,[33,["d-button"],null,[["class","icon","action","label","title"],["assign","user-times","unassign","discourse_assign.unassign.title","discourse_assign.unassign.help"]]],false],[0,"\\n"]],"locals":[]},{"statements":[[1,[33,["d-button"],null,[["class","icon","action","label","title"],["assign","user-plus","assign","discourse_assign.assign.title","discourse_assign.assign.help"]]],false],[0,"\\n"]],"locals":[]}]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/topic-footer-main-buttons-before-create/assign-button"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/topic-footer-main-buttons-before-create/assign-button",["exports","discourse/lib/show-modal","discourse/lib/ajax"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){return t.currentUser&&t.currentUser.get("staff")&&(!t.get("site.mobileView")||e.topic.get("isPrivateMessage"))},actions:{unassign:function(){return this.set("topic.assigned_to_user",null),(0,n.ajax)("/assign/unassign",{type:"PUT",data:{topic_id:this.get("topic.id")}})},assign:function(){(0,t.default)("assign-user",{model:{topic:this.topic,username:this.topic.get("assigned_to_user.username")}})}}}}),define("discourse/plugins/discourse-assign/discourse-assign/controllers/assign-user",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({assignSuggestions:function(){var e=this;(0,t.ajax)("/assign/suggestions").then(function(t){e.set("assignSuggestions",t)})}.property(),actions:{assignUser:function(e){this.set("model.username",e.username),this.send("assign")},assign:function(){var e="/assign/assign";return Ember.isEmpty(this.get("model.username"))&&(e="/assign/unassign",this.set("model.assigned_to_user",null)),this.send("closeModal"),(0,t.ajax)(e,{type:"PUT",data:{username:this.get("model.username"),topic_id:this.get("model.topic.id")}}).then(function(){}).catch(n.popupAjaxError)}}})}),define("discourse/plugins/discourse-assign/discourse-assign/assigned-messages-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"user.userPrivateMessages",map:function(){this.route("assigned")}}}),define("discourse/plugins/discourse-assign/discourse-assign/initializers/extend-for-assigns",["exports","discourse/lib/plugin-api","ember-addons/ember-computed-decorators","discourse/lib/show-modal","discourse-common/lib/icon-library","virtual-dom"],function(e,t,n,s,a,i){"use strict";function l(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function r(e){e.modifySelectKit("topic-footer-mobile-dropdown").modifyContent(function(e,t){return e.get("currentUser.staff")&&t.push({id:"assign",icon:"user-plus",name:I18n.t("discourse_assign.assign.title")}),t}).onSelect(function(e,t){if(e.get("currentUser.staff")){var n=e.get("topic");"assign"===t&&((0,s.default)("assign-user",{model:{topic:n,username:n.get("assigned_to_user.username")}}),e.set("value",null))}})}function o(e){var t,s,r,o;e.modifyClass("component:flagged-post",(t=(0,n.default)("flaggedPost.topic.assigned_to_user_id"),s={canAct:function(e){if(this.siteSettings.assign_locks_flags){var t=this.currentUser.id!==e;if(e&&t)return!1;if(this.siteSettings.flags_require_assign&&t)return!1}return this.get("actableFilter")},didInsertElement:function(){var e=this;this._super(),this.messageBus.subscribe("/staff/topic-assignment",function(t){var n=e.get("flaggedPost");t.topic_id===n.get("topic.id")&&(n.set("topic.assigned_to_user_id","assigned"===t.type?t.assigned_to.id:null),n.set("topic.assigned_to_user",t.assigned_to))})},willDestroyElement:function(){this._super(),this.messageBus.unsubscribe("/staff/topic-assignment")}},l(s,"canAct",[t],Object.getOwnPropertyDescriptor(s,"canAct"),s),s),{ignoreMissing:!0}),e.modifyClass("model:topic",(r=(0,n.default)("assigned_to_user"),o={assignedToUserPath:function(e){return this.siteSettings.assigns_user_url_path.replace("{username}",Ember.get(e,"username"))}},l(o,"assignedToUserPath",[r],Object.getOwnPropertyDescriptor(o,"assignedToUserPath"),o),o)),e.addPostSmallActionIcon("assigned","user-plus"),e.addPostSmallActionIcon("unassigned","user-times"),e.addPostTransformCallback(function(e){"assigned"!==e.actionCode&&"unassigned"!==e.actionCode||(e.isSmallAction=!0,e.canEdit=!1)}),e.addDiscoveryQueryParam("assigned",{replace:!0,refreshModel:!0}),e.addTagsHtmlCallback(function(e){var t=e.get("assigned_to_user.username");if(t){return"<a class='assigned-to discourse-tag simple' href='"+e.get("assignedToUserPath")+"'><i class='fa fa-user-plus'></i>"+t+"</a>"}}),e.addUserMenuGlyph(function(e){if(e.currentUser&&e.currentUser.get("staff")&&e.siteSettings.assign_enabled)return{label:"discourse_assign.assigned",className:"assigned",icon:"user-plus",href:e.currentUser.get("path")+"/activity/assigned"}}),e.createWidget("assigned-to",{html:function(e){var t=e.assignedToUser,n=e.href;return(0,i.h)("p.assigned-to",[(0,a.iconNode)("user-plus"),(0,i.h)("span.assign-text",I18n.t("discourse_assign.assigned_to")),(0,i.h)("a",{attributes:{class:"assigned-to-username",href:n}},t.username)])}}),e.createWidget("assigned-to",{html:function(e){var t=e.assignedToUser,n=e.href;return(0,i.h)("p.assigned-to",[(0,a.iconNode)("user-plus"),(0,i.h)("span.assign-text",I18n.t("discourse_assign.assigned_to")),(0,i.h)("a",{attributes:{class:"assigned-to-username",href:n}},t.username)])}}),e.createWidget("assigned-to",{html:function(e){var t=e.assignedToUser,n=e.href;return(0,i.h)("p.assigned-to",[(0,a.iconNode)("user-plus"),(0,i.h)("span.assign-text",I18n.t("discourse_assign.assigned_to")),(0,i.h)("a",{attributes:{class:"assigned-to-username",href:n}},t.username)])}}),e.decorateWidget("post-contents:after-cooked",function(e){if(1===e.attrs.post_number){var t=e.getModel();if(t){var n=t.get("topic.assigned_to_user");if(n)return e.widget.attach("assigned-to",{assignedToUser:n,href:t.get("topic.assignedToUserPath")})}}}),e.replaceIcon("notification.discourse_assign.assign_notification","user-plus")}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-for-assign",initialize:function(e){(0,t.withPluginApi)("0.8.11",function(e){return o(e)}),(0,t.withPluginApi)("0.8.13",function(e){return r(e)})}}}),define("discourse/plugins/discourse-assign/discourse-assign/routes/user-activity-assigned",["exports","discourse/routes/user-topic-list"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({userActionType:16,noContentHelpKey:"discourse_assigns.no_assigns",model:function(){return this.store.findFiltered("topicList",{filter:"latest",params:{assigned:this.modelFor("user").get("username_lower")}})}})}),define("discourse/plugins/discourse-assign/discourse-assign/routes/user-private-messages-assigned",["exports","discourse/routes/build-private-messages-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("assigned","private-messages-assigned","assigned")}),Ember.TEMPLATES["javascripts/components/claim-topic"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["topic","assigned_to_user"]]],null,{"statements":[[6,["assigned-to"],null,[["user"],[[28,["topic","assigned_to_user"]]]],{"statements":[[0,"    "],[1,[33,["d-button"],null,[["icon","class","action","disabled","title"],["times","btn-small unassign",[33,["action"],[[28,[null]],"unassign"],null],[28,["unassigning"]],"discourse_assign.unassign.help"]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},{"statements":[[0,"  "],[1,[33,["d-button"],null,[["class","icon","action","disabled","label","title"],["btn-small assign","user-plus",[33,["action"],[[28,[null]],"claim"],null],[28,["claiming"]],"discourse_assign.claim.title","discourse_assign.claim.help"]]],false],[0,"\\n"]],"locals":[]}]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/claim-topic"}}),Ember.TEMPLATES["javascripts/components/assigned-to"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["avatar"],[[28,["user"]]],[["imageSize"],["small"]]],false],[0,"\\n"],[11,"span",[]],[15,"class","assigned-username"],[13],[0,"\\n  "],[1,[28,["user","username"]],false],[0,"\\n"],[14],[0,"\\n"],[18,"default"],[0,"\\n"]],"locals":[],"named":[],"yields":["default"],"hasPartials":false}',meta:{moduleName:"javascripts/components/assigned-to"}}),Ember.TEMPLATES["javascripts/modal/assign-user"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["title","class"],["discourse_assign.assign_modal.title","assign"]],{"statements":[[1,[33,["i18n"],["discourse_assign.assign_modal.description"],null],false],[0,"\\n"],[1,[33,["user-selector"],null,[["single","allowAny","group","excludeCurrentUser","includeMentionableGroups","hasGroups","usernames","placeholderKey","autocomplete"],[true,false,"staff",false,false,false,[28,["model","username"]],[28,["placeholderKey"]],"off"]]],false],[0,"\\n"],[11,"div",[]],[15,"class","assign-suggestions"],[13],[0,"\\n"],[6,["each"],[[28,["assignSuggestions"]]],null,{"statements":[[0,"    "],[11,"a",[]],[5,["action"],[[28,[null]],"assignUser",[28,["user"]]]],[13],[0,"\\n    "],[1,[33,["avatar"],[[28,["user"]]],[["imageSize"],["small"]]],false],[0,"\\n    "],[14],[0,"\\n"]],"locals":["user"]},null],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[11,"div",[]],[15,"class","modal-footer"],[13],[0,"\\n"],[1,[33,["d-button"],null,[["label","icon","action","class","disabled"],["discourse_assign.assign_modal.assign",[28,["inviteIcon"]],"assign","btn-primary",[28,["disabled"]]]]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/modal/assign-user"}}),define("discourse/plugins/discourse-assign/discourse/components/flagged-topic-listener",["exports"],function(e){"use strict";function t(e,t){e&&e.id===t.topic_id&&Ember.set(e,"assigned_to_user",t.assigned_to)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({didInsertElement:function(){var e=this;this._super(),this.messageBus.subscribe("/staff/topic-assignment",function(n){var s=e.get("flaggedTopics");s?s.forEach(function(e){return t(e.topic,n)}):t(e.get("topic"),n)})},willDestroyElement:function(){this._super(),this.messageBus.unsubscribe("/staff/topic-assignment")}})}),define("discourse/plugins/discourse-assign/discourse/components/assigned-to",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["assigned-to-user"]})}),define("discourse/plugins/discourse-assign/discourse/components/claim-topic",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"",claiming:!1,unassigning:!1,actions:{unassign:function(){var e=this;return this.set("unassigning",!0),(0,t.ajax)("/assign/unassign",{type:"PUT",data:{topic_id:this.get("topic.id")}}).then(function(){e.set("topic.assigned_to_user",null)}).catch(n.popupAjaxError).finally(function(){e.set("unassigning",!1)})},claim:function(){var e=this;this.set("claiming",!0);var s=this.get("topic");(0,t.ajax)("/assign/claim/"+s.id,{method:"PUT"}).then(function(){e.set("topic.assigned_to_user",e.currentUser)}).catch(function(t){if(t.jqXHR&&t.jqXHR.responseJSON){var s=t.jqXHR.responseJSON;s&&s.extras&&e.set("topic.assigned_to_user",s.extras.assigned_to)}return(0,n.popupAjaxError)(t)}).finally(function(){e.isDestroying||e.isDestroyed||e.set("claiming",!1)})}}})}),define("discourse/plugins/discourse-cakeday/discourse/lib/cakeday",["exports"],function(e){"use strict";function t(e,t){var n="YYYY",s=moment(),a=moment(e);return!(t&&t.anniversary&&s.format(n)<=a.format(n))&&(n="MMDD",s.format(n)===a.format(n))}function n(e){return!Ember.isEmpty(e)&&t(e,{anniversary:!0})}function s(e){return!Ember.isEmpty(e)&&t(e)}function a(e,t){return l(e,t)?"user.anniversary.user_title":"user.anniversary.title"}function i(e,t){return l(e,t)?"user.date_of_birth.user_title":"user.date_of_birth.title"}function l(e,t){return!!t&&e.get("id")===t.get("id")}Object.defineProperty(e,"__esModule",{value:!0}),e.isSameDay=t,e.cakeday=n,e.cakedayBirthday=s,e.cakedayTitle=a,e.cakedayBirthdayTitle=i}),Ember.TEMPLATES["javascripts/cakeday/birthdays"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"class","birthdays"],[13],[0,"\\n  "],[11,"ul",[]],[15,"class","nav-pills"],[13],[0,"\\n    "],[11,"li",[]],[13],[0,"\\n"],[6,["link-to"],["cakeday.birthdays.today"],null,{"statements":[[0,"        "],[1,[33,["i18n"],["cakeday.today"],null],false],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n\\n    "],[11,"li",[]],[13],[0,"\\n"],[6,["link-to"],["cakeday.birthdays.tomorrow"],null,{"statements":[[0,"        "],[1,[33,["i18n"],["cakeday.tomorrow"],null],false],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n\\n    "],[11,"li",[]],[13],[0,"\\n"],[6,["link-to"],["cakeday.birthdays.upcoming"],null,{"statements":[[0,"        "],[1,[33,["i18n"],["cakeday.upcoming"],null],false],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n\\n    "],[11,"li",[]],[13],[0,"\\n"],[6,["link-to"],["cakeday.birthdays.all"],null,{"statements":[[0,"        "],[1,[33,["i18n"],["cakeday.all"],null],false],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n  "],[14],[0,"\\n\\n  "],[1,[26,["outlet"]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/birthdays"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/all"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["load-more"],null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[0,"  "],[11,"div",[]],[15,"class","cakeday-months"],[13],[0,"\\n    "],[11,"h2",[]],[15,"class","cakeday-header"],[13],[1,[33,["i18n"],["birthdays.month.title"],null],false],[14],[0,"\\n    "],[1,[33,["combo-box"],null,[["content","value","valueAttribute","none"],[[28,["months"]],[28,["month"]],"value","cakeday.none"]]],false],[0,"\\n  "],[14],[0,"\\n\\n"],[6,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loading"]]]],{"statements":[[6,["user-info-list"],null,[["users","isBirthday"],[[28,["model"]],true]],{"statements":[[0,"      "],[1,[33,["i18n"],["birthdays.month.empty"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n  "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loadingMore"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/birthdays/all"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/tomorrow"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"h2",[]],[15,"class","cakeday-header"],[13],[1,[26,["title"]],false],[14],[0,"\\n\\n"],[6,["load-more"],null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[6,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loading"]]]],{"statements":[[6,["user-info-list"],null,[["users"],[[28,["model"]]]],{"statements":[[0,"      "],[1,[33,["i18n"],["birthdays.tomorrow.empty"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n  "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loadingMore"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/birthdays/tomorrow"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/upcoming"]=Ember.HTMLBars.template({id:null,
block:'{"statements":[[11,"h2",[]],[15,"class","cakeday-header"],[13],[1,[26,["title"]],false],[14],[0,"\\n\\n"],[6,["load-more"],null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[6,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loading"]]]],{"statements":[[6,["user-info-list"],null,[["users","isBirthday"],[[28,["model"]],true]],{"statements":[[0,"      "],[1,[33,["i18n"],["birthdays.upcoming.empty"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n  "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loadingMore"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/birthdays/upcoming"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/today"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"h2",[]],[15,"class","cakeday-header"],[13],[1,[26,["title"]],false],[14],[0,"\\n\\n"],[6,["load-more"],null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[6,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loading"]]]],{"statements":[[6,["user-info-list"],null,[["users","isBirthday"],[[28,["model"]],true]],{"statements":[[0,"      "],[1,[33,["i18n"],["birthdays.today.empty"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n  "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loadingMore"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/birthdays/today"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"class","anniversaries"],[13],[0,"\\n  "],[11,"ul",[]],[15,"class","nav-pills"],[13],[0,"\\n    "],[11,"li",[]],[13],[0,"\\n"],[6,["link-to"],["cakeday.anniversaries.today"],null,{"statements":[[0,"        "],[1,[33,["i18n"],["cakeday.today"],null],false],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n\\n    "],[11,"li",[]],[13],[0,"\\n"],[6,["link-to"],["cakeday.anniversaries.tomorrow"],null,{"statements":[[0,"        "],[1,[33,["i18n"],["cakeday.tomorrow"],null],false],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n\\n    "],[11,"li",[]],[13],[0,"\\n"],[6,["link-to"],["cakeday.anniversaries.upcoming"],null,{"statements":[[0,"        "],[1,[33,["i18n"],["cakeday.upcoming"],null],false],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n\\n    "],[11,"li",[]],[13],[0,"\\n"],[6,["link-to"],["cakeday.anniversaries.all"],null,{"statements":[[0,"        "],[1,[33,["i18n"],["cakeday.all"],null],false],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n  "],[14],[0,"\\n\\n  "],[1,[26,["outlet"]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/anniversaries"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/all"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["load-more"],null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[0,"  "],[11,"div",[]],[15,"class","cakeday-months"],[13],[0,"\\n    "],[11,"h2",[]],[15,"class","cakeday-header"],[13],[1,[33,["i18n"],["anniversaries.month.title"],null],false],[14],[0,"\\n    "],[1,[33,["combo-box"],null,[["content","value","valueAttribute","none"],[[28,["months"]],[28,["month"]],"value","cakeday.none"]]],false],[0,"\\n  "],[14],[0,"\\n\\n"],[6,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loading"]]]],{"statements":[[6,["user-info-list"],null,[["users"],[[28,["model"]]]],{"statements":[[0,"      "],[1,[33,["i18n"],["anniversaries.month.empty"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n  "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loadingMore"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/all"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/tomorrow"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"h2",[]],[15,"class","cakeday-header"],[13],[1,[26,["title"]],false],[14],[0,"\\n\\n"],[6,["load-more"],null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[6,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loading"]]]],{"statements":[[6,["user-info-list"],null,[["users"],[[28,["model"]]]],{"statements":[[0,"      "],[1,[33,["i18n"],["anniversaries.tomorrow.empty"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n  "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loadingMore"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/tomorrow"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/upcoming"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"h2",[]],[15,"class","cakeday-header"],[13],[1,[26,["title"]],false],[14],[0,"\\n\\n"],[6,["load-more"],null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[6,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loading"]]]],{"statements":[[6,["user-info-list"],null,[["users"],[[28,["model"]]]],{"statements":[[0,"      "],[1,[33,["i18n"],["anniversaries.upcoming.empty"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n  "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loadingMore"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/upcoming"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/today"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"h2",[]],[15,"class","cakeday-header"],[13],[1,[26,["title"]],false],[14],[0,"\\n\\n"],[6,["load-more"],null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[6,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loading"]]]],{"statements":[[6,["user-info-list"],null,[["users"],[[28,["model"]]]],{"statements":[[0,"      "],[1,[33,["i18n"],["anniversaries.today.empty"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n  "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["model","loadingMore"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/today"}}),Ember.TEMPLATES["javascripts/connectors/user-custom-preferences/user-date-of-birth-input"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["siteSettings","cakeday_birthday_enabled"]]],null,{"statements":[[0,"  "],[11,"div",[]],[15,"class","control-group"],[13],[0,"\\n    "],[11,"label",[]],[15,"class","control-label"],[13],[1,[33,["i18n"],["user.date_of_birth.label"],null],false],[14],[0,"\\n    "],[11,"div",[]],[15,"class","controls"],[13],[0,"\\n      "],[1,[33,["combo-box"],null,[["content","value","valueAttribute","none"],[[28,["months"]],[28,["userBirthdayMonth"]],"value","cakeday.none"]]],false],[0,"\\n\\n      "],[1,[33,["combo-box"],null,[["content","value","valueAttribute","none"],[[28,["days"]],[28,["userBirthdayDay"]],"value","cakeday.none"]]],false],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/user-custom-preferences/user-date-of-birth-input"}}),Ember.TEMPLATES["javascripts/connectors/user-card-post-names/user-card-cakeday"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["siteSettings","cakeday_birthday_enabled"]]],null,{"statements":[[6,["if"],[[28,["isUserBirthday"]]],null,{"statements":[[0,"    "],[1,[33,["emoji-images"],null,[["list","title"],[[28,["siteSettings","cakeday_birthday_emoji"]],[28,["cakedayBirthdayTitle"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n"],[6,["if"],[[28,["siteSettings","cakeday_enabled"]]],null,{"statements":[[6,["if"],[[28,["isCakeday"]]],null,{"statements":[[0,"    "],[1,[33,["emoji-images"],null,[["list","title"],[[28,["siteSettings","cakeday_emoji"]],[28,["cakedayTitle"]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/user-card-post-names/user-card-cakeday"}}),Ember.TEMPLATES["javascripts/connectors/user-post-names/user-cakeday"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["siteSettings","cakeday_birthday_enabled"]]],null,{"statements":[[6,["if"],[[28,["isUserBirthday"]]],null,{"statements":[[0,"    "],[1,[33,["emoji-images"],null,[["list","title"],[[28,["siteSettings","cakeday_birthday_emoji"]],"birthdays.title"]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n"],[6,["if"],[[28,["siteSettings","cakeday_enabled"]]],null,{"statements":[[6,["if"],[[28,["isCakeday"]]],null,{"statements":[[0,"    "],[1,[33,["emoji-images"],null,[["list","title"],[[28,["siteSettings","cakeday_emoji"]],"anniversaries.title"]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/user-post-names/user-cakeday"}}),Ember.TEMPLATES["javascripts/components/user-info-list"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"ul",[]],[15,"class","user-info-list"],[13],[0,"\\n"],[6,["each"],[[28,["users"]]],null,{"statements":[[0,"    "],[11,"li",[]],[15,"class","user-info-item"],[13],[0,"\\n"],[6,["user-info"],null,[["user"],[[28,["user"]]]],{"statements":[[0,"        "],[11,"div",[]],[13],[1,[33,["cakeday-date"],[[28,["user","cakeday_date"]]],[["isBirthday"],[[28,["isBirthday"]]]]],false],[14],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n"]],"locals":["user"]},{"statements":[[0,"    "],[11,"div",[]],[15,"class","user-info-empty-message"],[13],[11,"h4",[]],[13],[18,"default"],[14],[14],[0,"\\n"]],"locals":[]}],[14],[0,"\\n"]],"locals":[],"named":[],"yields":["default"],"hasPartials":false}',meta:{moduleName:"javascripts/components/user-info-list"}}),Ember.TEMPLATES["javascripts/components/emoji-images"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["siteSettings","enable_emoji"]]],null,{"statements":[[0,"  "],[11,"div",[]],[16,"title",[26,["titleText"]],null],[13],[0,"\\n"],[6,["each"],[[28,["emojiHTML"]]],null,{"statements":[[0,"      "],[1,[28,["html"]],true],[0,"\\n"]],"locals":["html"]},null],[0,"  "],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"  "],[1,[33,["fa-icon"],["birthday-cake"],[["title"],[[28,["titleText"]]]]],false],[0,"\\n"]],"locals":[]}]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/emoji-images"}}),Ember.TEMPLATES["javascripts/cakeday"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"class","container cakeday"],[13],[0,"\\n  "],[11,"ul",[]],[15,"class","nav-pills"],[13],[0,"\\n"],[6,["if"],[[28,["cakedayEnabled"]]],null,{"statements":[[0,"      "],[11,"li",[]],[15,"class","nav-item-anniversaries"],[13],[0,"\\n"],[6,["link-to"],["cakeday.anniversaries"],null,{"statements":[[0,"          "],[1,[33,["i18n"],["anniversaries.title"],null],false],[0,"\\n"]],"locals":[]},null],[0,"      "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[6,["if"],[[28,["cakedayBirthdayEnabled"]]],null,{"statements":[[0,"      "],[11,"li",[]],[15,"class","nav-item-birthdays"],[13],[0,"\\n"],[6,["link-to"],["cakeday.birthdays"],null,{"statements":[[0,"          "],[1,[33,["i18n"],["birthdays.title"],null],false],[0,"\\n"]],"locals":[]},null],[0,"      "],[14],[0,"\\n"]],"locals":[]},null],[0,"  "],[14],[0,"\\n\\n  "],[1,[26,["outlet"]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/cakeday"}}),define("discourse/plugins/discourse-cakeday/discourse/connectors/user-custom-preferences/user-date-of-birth-input",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,t){t.set("months",moment.months().map(function(e,t){return{name:e,value:t+1}})),t.set("days",_.range(1,32));var n=e.model.get("date_of_birth");t.set("userBirthdayMonth",moment(n,"YYYY-MM-DD").month()+1),t.set("userBirthdayDay",moment(n,"YYYY-MM-DD").date());var s=function(){var n=t.get("userBirthdayMonth"),s=t.get("userBirthdayDay"),a=e.model,i="";""!==n&&""!==s&&(i="1904-"+t.get("userBirthdayMonth")+"-"+t.get("userBirthdayDay")),a.set("date_of_birth",i)};t.addObserver("userBirthdayMonth",s),t.addObserver("userBirthdayDay",s)}}}),define("discourse/plugins/discourse-cakeday/discourse/connectors/user-card-post-names/user-card-cakeday",["exports","discourse/plugins/discourse-cakeday/discourse/lib/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,n){n.set("isCakeday",(0,t.cakeday)(e.user.get("created_at"))),n.set("isUserBirthday",(0,t.cakedayBirthday)(e.user.get("date_of_birth"))),n.set("cakedayTitle",(0,t.cakedayTitle)(e.user,this.currentUser)),n.set("cakedayBirthdayTitle",(0,t.cakedayBirthdayTitle)(e.user,this.currentUser))}}}),define("discourse/plugins/discourse-cakeday/discourse/connectors/user-post-names/user-cakeday",["exports","discourse/plugins/discourse-cakeday/discourse/lib/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,n){n.set("isCakeday",(0,t.cakeday)(e.model.get("created_at"))),n.set("isUserBirthday",(0,t.cakedayBirthday)(e.model.get("date_of_birth")))}}}),define("discourse/plugins/discourse-cakeday/discourse/adapters/birthday",["exports","discourse/plugins/discourse-cakeday/discourse/adapters/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("discourse/plugins/discourse-cakeday/discourse/adapters/cakeday",["exports","discourse/adapters/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({basePath:function(){return"/cakeday/"}})}),define("discourse/plugins/discourse-cakeday/discourse/adapters/anniversary",["exports","discourse/plugins/discourse-cakeday/discourse/adapters/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("discourse/plugins/discourse-cakeday/discourse/components/emoji-images",["exports","ember-addons/ember-computed-decorators","discourse/lib/text"],function(e,t,n){"use strict";function s(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var a,i,l;e.default=Ember.Component.extend((a=(0,t.default)("list"),i=(0,t.default)("title"),l={classNames:["emoji-images"],emojiHTML:function(e){return e.split("|").map(function(e){return(0,n.emojiUnescape)(":"+e+":",{skipTitle:!0})})},titleText:function(e){return I18n.t(e)}},s(l,"emojiHTML",[a],Object.getOwnPropertyDescriptor(l,"emojiHTML"),l),s(l,"titleText",[i],Object.getOwnPropertyDescriptor(l,"titleText"),l),l))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-today",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;e.default=Ember.Controller.extend((n={title:function(){return I18n.t("anniversaries.today.title",{date:moment().format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(n,"title",[t.default],Object.getOwnPropertyDescriptor(n,"title"),n),n))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-all",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;e.default=Ember.Controller.extend((n={queryParams:["month"],month:moment().month()+1,months:function(){return moment.months().map(function(e,t){return{name:e,value:t+1}})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(n,"months",[t.default],Object.getOwnPropertyDescriptor(n,"months"),n),n))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-tomorrow",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;e.default=Ember.Controller.extend((n={title:function(){return I18n.t("anniversaries.today.title",{date:moment().add(1,"day").format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(n,"title",[t.default],Object.getOwnPropertyDescriptor(n,"title"),n),n))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-all",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;e.default=Ember.Controller.extend((n={queryParams:["month"],month:moment().month()+1,months:function(){return moment.months().map(function(e,t){return{name:e,value:t+1}})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(n,"months",[t.default],Object.getOwnPropertyDescriptor(n,"months"),n),n))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({cakedayEnabled:Ember.computed.alias("siteSettings.cakeday_enabled"),cakedayBirthdayEnabled:Ember.computed.alias("siteSettings.cakeday_birthday_enabled")})}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-upcoming",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;e.default=Ember.Controller.extend((n={title:function(){var e=moment();return I18n.t("anniversaries.upcoming.title",{start_date:e.add(2,"days").format("MMMM Do"),end_date:e.add(7,"days").format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(n,"title",[t.default],Object.getOwnPropertyDescriptor(n,"title"),n),n))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-upcoming",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;e.default=Ember.Controller.extend((n={title:function(){var e=moment();return I18n.t("birthdays.upcoming.title",{start_date:e.add(2,"days").format("MMMM Do"),end_date:e.add(7,"days").format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(n,"title",[t.default],Object.getOwnPropertyDescriptor(n,"title"),n),n))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-tomorrow",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;e.default=Ember.Controller.extend((n={title:function(){return I18n.t("birthdays.today.title",{date:moment().add(1,"day").format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(n,"title",[t.default],Object.getOwnPropertyDescriptor(n,"title"),n),n))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-today",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;e.default=Ember.Controller.extend((n={title:function(){return I18n.t("birthdays.today.title",{date:moment().format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(n,"title",[t.default],Object.getOwnPropertyDescriptor(n,"title"),n),n))}),define("discourse/plugins/discourse-cakeday/discourse/initializers/cakeday",["exports","ember-addons/ember-computed-decorators","discourse/controllers/preferences","discourse/controllers/user-card","discourse/controllers/user","discourse/lib/plugin-api","discourse/plugins/discourse-cakeday/discourse/lib/cakeday","discourse-common/lib/helpers"],function(e,t,n,s,a,i,l,r){"use strict";function o(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function c(e,t){var n=t.enable_emoji,s=t.cakeday_enabled,a=t.cakeday_birthday_enabled;s&&(e.includePostAttributes("user_created_at"),e.includePostAttributes("user_date_of_birth"),e.addPosterIcon(function(s,a){var i=a.user_created_at;if(!Ember.isEmpty(i)&&(0,l.isSameDay)(i,{anniversary:!0})){var r={};n?r.emoji=t.cakeday_emoji:r.icon="birthday-cake";var o=e.getCurrentUser();return o&&a.user_id===o.get("id")?r.title=I18n.t("user.anniversary.user_title"):r.title=I18n.t("user.anniversary.title"),r.emojiTitle=!1,r}})),a&&e.addPosterIcon(function(s,a){var i=a.user_date_of_birth;if(!Ember.isEmpty(i)&&(0,l.isSameDay)(i)){var r={};n?r.emoji=t.cakeday_birthday_emoji:r.icon="birthday-cake";var o=e.getCurrentUser();return o&&a.user_id===o.get("id")?r.title=I18n.t("user.date_of_birth.user_title"):r.title=I18n.t("user.date_of_birth.title"),r.emojiTitle=!1,r}}),(s||a)&&((0,r.registerUnbound)("cakeday-date",function(e,t){var n=moment(e);return t.isBirthday?n.format("MM/DD"):n.format("YYYY/MM/DD")}),e.decorateWidget("hamburger-menu:generalLinks",function(){var e=void 0;return s?e="cakeday.anniversaries.today":a&&(e="cakeday.birthdays.today"),{route:e,label:"cakeday.title",className:"cakeday-link"}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"cakeday",initialize:function(e){var r,u,d,p,m,f,h,g,b,v;if(e.lookup("current-user:main")){var y=e.lookup("site-settings:main");e.lookup("store:main").addPluralization("anniversary","anniversaries"),n.default.reopen((r=(0,t.observes)("userBirthdayMonth","userBirthdayDay"),u=(0,t.default)("model.date_of_birth"),d=(0,t.default)("model.date_of_birth"),p={days:_.range(1,32),months:function(){return moment.months().map(function(e,t){return{name:e,value:t+1}})},_setUserDateOfBirth:function(){var e=this.get("userBirthdayMonth"),t=this.get("userBirthdayDay"),n=this.get("model"),s="";""!==e&&""!==t&&(s="1904-"+this.get("userBirthdayMonth")+"-"+this.get("userBirthdayDay")),n.set("date_of_birth",s)},userBirthdayMonth:function(e){return moment(e,"YYYY-MM-DD").month()+1},userBirthdayDay:function(e){return moment(e,"YYYY-MM-DD").date()}},o(p,"months",[t.default],Object.getOwnPropertyDescriptor(p,"months"),p),o(p,"_setUserDateOfBirth",[r],Object.getOwnPropertyDescriptor(p,"_setUserDateOfBirth"),p),o(p,"userBirthdayMonth",[u],Object.getOwnPropertyDescriptor(p,"userBirthdayMonth"),p),o(p,"userBirthdayDay",[d],Object.getOwnPropertyDescriptor(p,"userBirthdayDay"),p),p)),s.default.reopen((m=(0,t.default)("model.created_at"),f=(0,t.default)("model.date_of_birth"),h={isCakeday:function(e){return(0,l.cakeday)(e)},isUserBirthday:function(e){return(0,l.cakedayBirthday)(e)}},o(h,"isCakeday",[m],Object.getOwnPropertyDescriptor(h,"isCakeday"),h),o(h,"isUserBirthday",[f],Object.getOwnPropertyDescriptor(h,"isUserBirthday"),h),h)),a.default.reopen((g=(0,t.default)("model.created_at"),b=(0,t.default)("model.date_of_birth"),v={isCakeday:function(e){return(0,l.cakeday)(e)},isUserBirthday:function(e){return(0,l.cakedayBirthday)(e)}},o(v,"isCakeday",[g],Object.getOwnPropertyDescriptor(v,"isCakeday"),v),o(v,"isUserBirthday",[b],Object.getOwnPropertyDescriptor(v,"isUserBirthday"),v),v)),(0,i.withPluginApi)("0.1",function(e){return c(e,y)})}}}}),define("discourse/plugins/discourse-cakeday/discourse/discourse-cakeday-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.route("cakeday",{path:"/cakeday",resetNamespace:!0},function(){this.route("birthdays",{path:"/birthdays"},function(){this.route("today",{path:"/today"}),this.route("tomorrow",{path:"/tomorrow"}),this.route("upcoming",{path:"/upcoming"}),this.route("all",{path:"/all"})}),this.route("anniversaries",{path:"/anniversaries"},function(){this.route("today",{path:"/today"}),this.route("tomorrow",{path:"/tomorrow"}),this.route("upcoming",{path:"/upcoming"}),this.route("all",{path:"/all"})})})}}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-today",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary","today")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-all",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday").extend({queryParams:{month:{refreshModel:!0}},refreshQueryWithoutTransition:!0})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-tomorrow",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary","tomorrow")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-all",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary").extend({queryParams:{month:{refreshModel:!0}},refreshQueryWithoutTransition:!0})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.replaceWith("cakeday.birthdays.today")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){return Discourse.Route.extend({model:function(n){return n.timezone_offset=(new Date).getTimezoneOffset(),t&&(n.filter=t),this.store.find(e,n)}})}}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.siteSettings.cakeday_enabled||this.transitionTo("unknown",window.location.pathname.replace(/^\//,""))},titleToken:function(){return I18n.t("anniversaries.title")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.siteSettings.cakeday_birthday_enabled||this.transitionTo("unknown",window.location.pathname.replace(/^\//,""))},titleToken:function(){return I18n.t("birthdays.title")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-upcoming",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary","upcoming")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.replaceWith("cakeday.anniversaries.today")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-upcoming",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday","upcoming")}),
define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthday-tomorrow",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday","tomorrow")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-today",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday","today")}),Ember.TEMPLATES["javascripts/connectors/editor-preview/canned-replies"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["isVisible"]]],null,{"statements":[[0,"  "],[11,"div",[]],[15,"class","d-editor-preview"],[13],[0,"\\n"],[6,["conditional-loading-spinner"],null,[["condition"],[[28,["loadingReplies"]]]],{"statements":[[0,"      "],[1,[33,["d-button"],null,[["class","action","icon","label"],["btn canned-replies-new","newReply","plus","canned_replies.insert.new_button"]]],false],[0,"\\n      "],[1,[33,["text-field"],null,[["class","value","placeholder"],["canned-replies-filter",[28,["listFilter"]],[28,["filterHint"]]]]],false],[0,"\\n      "],[11,"a",[]],[15,"class","close pull-right"],[5,["action"],[[28,[null]],"hide"]],[13],[1,[33,["d-icon"],["times"],null],false],[14],[0,"\\n\\n      "],[11,"hr",[]],[13],[14],[0,"\\n\\n"],[6,["each"],[[28,["filteredReplies"]]],null,{"statements":[[0,"        "],[1,[33,["canned-reply"],null,[["reply"],[[28,["r"]]]]],false],[0,"\\n"]],"locals":["r"]},null]],"locals":[]},null],[0,"  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/editor-preview/canned-replies"}}),Ember.TEMPLATES["javascripts/components/canned-reply"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"class","canned-reply"],[13],[0,"\\n  "],[11,"div",[]],[15,"class","canned-reply-title"],[5,["action"],[[28,[null]],"toggle"]],[13],[0,"\\n    "],[1,[33,["d-button"],null,[["class","action","icon"],["btn canned-replies-apply","apply","clipboard"]]],false],[0,"\\n\\n    "],[1,[33,["d-button"],null,[["class","action","icon"],["btn canned-replies-edit","editReply","pencil"]]],false],[0,"\\n\\n    "],[11,"b",[]],[13],[1,[28,["reply","title"]],false],[14],[0,"\\n  "],[14],[0,"\\n\\n"],[6,["if"],[[28,["isOpen"]]],null,{"statements":[[0,"    "],[11,"div",[]],[15,"class","canned-replies-content"],[13],[0,"\\n      "],[1,[33,["cook-text"],[[28,["reply","content"]]],null],true],[0,"\\n    "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n  "],[11,"hr",[]],[13],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/canned-reply"}}),Ember.TEMPLATES["javascripts/components/canned-replies-form"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"form",[]],[13],[0,"\\n  "],[11,"div",[]],[13],[0,"\\n    "],[11,"label",[]],[13],[11,"strong",[]],[13],[1,[33,["i18n"],["canned_replies.title.name"],null],false],[14],[14],[0,"\\n    "],[1,[33,["input"],null,[["class","value"],["canned-replies-form-title-input",[28,["title"]]]]],false],[0,"\\n  "],[14],[0,"\\n\\n  "],[11,"div",[]],[13],[0,"\\n    "],[11,"label",[]],[13],[11,"strong",[]],[13],[1,[33,["i18n"],["canned_replies.content.name"],null],false],[14],[14],[0,"\\n    "],[1,[33,["d-editor"],null,[["class","value"],["canned-replies-form-content-input",[28,["content"]]]]],false],[0,"\\n  "],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/canned-replies-form"}}),Ember.TEMPLATES["javascripts/modal/edit-reply"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["title","class"],["canned_replies.edit.modal_title","canned-replies-modal"]],{"statements":[[0,"  "],[1,[33,["canned-replies-form"],null,[["title","content"],[[28,["replyTitle"]],[28,["replyContent"]]]]],false],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[11,"div",[]],[15,"class","modal-footer canned-replies-footer"],[13],[0,"\\n  "],[1,[33,["d-button"],null,[["class","action","label","disabled"],["btn btn-primary edit-reply-save-btn","save","save",[28,["disableSaveButton"]]]]],false],[0,"\\n\\n  "],[11,"a",[]],[15,"href",""],[5,["action"],[[28,[null]],"cancel"]],[13],[1,[33,["i18n"],["cancel"],null],false],[14],[0,"\\n\\n  "],[6,["if"],[[28,["savingText"]]],null,{"statements":[[11,"span",[]],[15,"class","msg"],[13],[1,[26,["savingText"]],false],[14]],"locals":[]},null],[0,"\\n\\n  "],[1,[33,["d-button"],null,[["class","action","icon","disabled"],["btn-danger pull-right","remove","trash",[28,["saving"]]]]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/modal/edit-reply"}}),Ember.TEMPLATES["javascripts/modal/new-reply"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["title","class"],["canned_replies.add.modal_title","canned-replies-modal"]],{"statements":[[0,"  "],[1,[33,["canned-replies-form"],null,[["title","content"],[[28,["newTitle"]],[28,["newContent"]]]]],false],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[11,"div",[]],[15,"class","modal-footer canned-replies-footer"],[13],[0,"\\n  "],[1,[33,["d-button"],null,[["class","action","label","disabled"],["btn btn-primary new-reply-save-btn","save","save",[28,["disableSaveButton"]]]]],false],[0,"\\n\\n  "],[11,"a",[]],[15,"href",""],[5,["action"],[[28,[null]],"cancel"]],[13],[1,[33,["i18n"],["cancel"],null],false],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/modal/new-reply"}}),Ember.TEMPLATES["javascripts/modal/canned-replies"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["title","class","style"],["canned_replies.insert.modal_title","canned-replies-modal","overflow: visible"]],{"statements":[[0,"\\n"],[6,["conditional-loading-spinner"],null,[["condition"],[[28,["loadingReplies"]]]],{"statements":[[0,"    "],[11,"div",[]],[15,"class","details"],[13],[0,"\\n      "],[11,"div",[]],[15,"class","reply-selector"],[13],[0,"\\n        "],[11,"div",[]],[15,"class","selector"],[13],[0,"\\n          "],[1,[33,["combo-box"],null,[["id","valueAttribute","value","nameProperty","content","none"],["canned-replies-combobox","id",[28,["selectedReplyID"]],"title",[28,["replies"]],"canned_replies.insert.choose"]]],false],[0,"\\n        "],[14],[0,"\\n      "],[14],[0,"\\n\\n"],[6,["if"],[[28,["selectedReply"]]],null,{"statements":[[0,"        "],[11,"div",[]],[15,"class","content"],[13],[0,"\\n          "],[11,"div",[]],[13],[0,"\\n            "],[1,[33,["cook-text"],[[28,["selectedReply","content"]]],null],true],[0,"\\n          "],[14],[0,"\\n        "],[14],[0,"\\n"]],"locals":[]},null],[0,"    "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n"],[11,"div",[]],[15,"class","modal-footer"],[13],[0,"\\n  "],[1,[33,["d-button"],null,[["class","action","icon","label"],["btn pull-left canned-replies-new","newReply","plus","canned_replies.insert.new_button"]]],false],[0,"\\n\\n"],[6,["if"],[[28,["selectedReply"]]],null,{"statements":[[0,"    "],[1,[33,["d-button"],null,[["class","action","icon","label"],["btn pull-left canned-replies-edit","editReply","pencil","canned_replies.insert.edit_button"]]],false],[0,"\\n\\n    "],[1,[33,["d-button"],null,[["class","action","icon","label"],["btn-primary pull-right canned-replies-apply","apply","clipboard","canned_replies.insert.insert_button"]]],false],[0,"\\n"]],"locals":[]},null],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/modal/canned-replies"}}),define("discourse/plugins/Canned Replies/discourse/connectors/editor-preview/canned-replies",["exports","discourse/lib/show-modal","discourse/lib/ajax","discourse/lib/computed","discourse/lib/ajax-error"],function(e,t,n,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,t){t.set("isVisible",!1),t.set("loadingReplies",!1),t.set("replies",[]),t.set("filteredReplies",[]),t.set("filterHint",(0,s.i18n)("canned_replies.filter_hint")),t.appEvents.has("canned-replies:show")||t.appEvents.on("canned-replies:show",function(){t.send("show")}),t.appEvents.has("canned-replies:hide")||t.appEvents.on("canned-replies:hide",function(){t.send("hide")}),t.appEvents.on("composer:will-close",function(){t.appEvents.off("canned-replies:show"),t.appEvents.off("canned-replies:hide")}),t.addObserver("listFilter",function(){var e=t.get("listFilter").toLowerCase(),n=t.get("replies").map(function(t){return t.score=0,-1!==t.title.toLowerCase().indexOf(e)?t.score+=2:-1!==t.content.toLowerCase().indexOf(e)&&(t.score+=1),t}).filter(function(e){return 0!==e.score}).sort(function(e,t){return e.score!==t.score?e.score>t.score?-1:1:e.title!==t.title?e.title<t.title?-1:1:0});t.set("filteredReplies",n)})},actions:{show:function(){var e=this;$(".d-editor-preview-wrapper > .d-editor-preview").hide(),this.set("isVisible",!0),this.set("loadingReplies",!0),(0,n.ajax)("/canned_replies").then(function(t){e.set("replies",t.replies),e.set("filterHint",""),e.set("filteredReplies",t.replies)}).catch(a.popupAjaxError).finally(function(){e.set("loadingReplies",!1),Em.run.schedule("afterRender",function(){$(".canned-replies-filter").focus()})})},hide:function(){$(".d-editor-preview-wrapper > .d-editor-preview").show(),this.set("isVisible",!1)},newReply:function(){var e=Discourse.__container__.lookup("controller:composer");e.send("closeModal"),(0,t.default)("new-reply").setProperties({newContent:e.model.reply})}}}}),define("discourse/plugins/Canned Replies/discourse/components/canned-reply",["exports","discourse/lib/show-modal","discourse/lib/ajax","discourse/lib/ajax-error","ember-addons/ember-computed-decorators"],function(e,t,n,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,l;e.default=Ember.Component.extend((i=(0,a.default)("isOpen"),l={isOpen:!1,showContentIcon:function(e){return e?"chevron-down":"chevron-left"},actions:{toggle:function(){this.toggleProperty("isOpen")},apply:function(){var e=Discourse.__container__.lookup("controller:composer");if(e.model){var t=e.model.get("reply")+this.get("reply.content");e.model.set("reply",t),e.model.get("title")||e.model.set("title",this.get("reply.title"))}(0,n.ajax)("/canned_replies/"+this.get("reply.id")+"/use",{type:"PATCH"}).catch(s.popupAjaxError),this.appEvents.trigger("canned-replies:hide")},editReply:function(){var e=Discourse.__container__.lookup("controller:composer");e.send("closeModal"),(0,t.default)("edit-reply").setProperties({composerModel:e.composerModel,replyId:this.get("reply.id"),replyTitle:this.get("reply.title"),replyContent:this.get("reply.content")})}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(l,"showContentIcon",[i],Object.getOwnPropertyDescriptor(l,"showContentIcon"),l),l))}),define("discourse/plugins/Canned Replies/discourse/components/canned-replies-form",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({})}),define("discourse/plugins/Canned Replies/discourse/controllers/edit-reply",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error"],function(e,t,n,s,a,i){"use strict";function l(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var r,o,c;e.default=Ember.Controller.extend(t.default,(r=(0,a.default)("saving"),o=(0,a.default)("replyTitle","replyContent","saving"),c={replyTitle:"",replyContent:"",replyId:"",saving:null,savingText:function(e){if(null!==e)return e?I18n.t("saving"):I18n.t("saved")},disableSaveButton:function(e,t,n){return n||""===e||""===t},actions:{save:function(){var e=this;this.set("saving",!0),(0,s.ajax)("/canned_replies/"+this.get("replyId"),{type:"PATCH",data:{title:this.get("replyTitle"),content:this.get("replyContent")}}).catch(i.popupAjaxError).finally(function(){return e.set("saving",!1)})},remove:function(){var e=this;bootbox.confirm(I18n.t("canned_replies.edit.remove_confirm"),function(t){t&&(0,s.ajax)("/canned_replies/"+e.get("replyId"),{type:"DELETE"}).then(function(){e.send("closeModal"),e.site.mobileView?(0,n.default)("canned-replies"):e.appEvents.trigger("canned-replies:show")}).catch(i.popupAjaxError)})},cancel:function(){this.send("closeModal"),this.site.mobileView?(0,n.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},l(c,"savingText",[r],Object.getOwnPropertyDescriptor(c,"savingText"),c),l(c,"disableSaveButton",[o],Object.getOwnPropertyDescriptor(c,"disableSaveButton"),c),c))}),define("discourse/plugins/Canned Replies/discourse/controllers/canned-replies",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error"],function(e,t,n,s,a,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,r;e.default=Ember.Controller.extend(t.default,(l=(0,a.observes)("selectedReplyID"),r={selectedReply:null,selectedReplyID:"",loadingReplies:!0,init:function(){this._super(),this.replies=[]},_updateSelection:function(){this.selectionChange()},getReplyByID:function(e){this.get("replies").find(function(t){return t.id===e})},onShow:function(){var e=this;(0,s.ajax)("/canned_replies").then(function(t){e.set("replies",t.replies),e.selectionChange()}).catch(i.popupAjaxError).finally(function(){return e.set("loadingReplies",!1)})},selectionChange:function(){var e=this.get("selectedReplyID"),t="";this.get("replies").forEach(function(n){if(n.id===e)return void(t=n)}),this.set("selectedReply",t)},actions:{apply:function(){if(this.composerModel){var e=this.composerModel.get("reply")+this.selectedReply.content;this.composerModel.set("reply",e),this.composerModel.get("title")||this.composerModel.set("title",this.selectedReply.title)}(0,s.ajax)("/canned_replies/"+this.get("selectedReplyID")+"/use",{type:"PATCH"}).catch(i.popupAjaxError),this.send("closeModal")},newReply:function(){this.send("closeModal"),(0,n.default)("new-reply").setProperties({newContent:this.composerModel.reply})},editReply:function(){this.send("closeModal"),(0,n.default)("edit-reply").setProperties({composerModel:this.composerModel,replyId:this.get("selectedReplyID"),replyTitle:this.get("selectedReply.title"),replyContent:this.get("selectedReply.content")})}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(r,"_updateSelection",[l],Object.getOwnPropertyDescriptor(r,"_updateSelection"),r),r))}),define("discourse/plugins/Canned Replies/discourse/controllers/new-reply",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error"],function(e,t,n,s,a,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,r;e.default=Ember.Controller.extend(t.default,(l=(0,a.default)("newTitle","newContent"),r={newTitle:"",newContent:"",disableSaveButton:function(e,t){return""===e||""===t},actions:{save:function(){var e=this;(0,s.ajax)("/canned_replies",{type:"POST",data:{title:this.get("newTitle"),content:this.get("newContent")}}).then(function(){e.send("closeModal"),e.site.mobileView?(0,n.default)("canned-replies"):e.appEvents.trigger("canned-replies:show")}).catch(i.popupAjaxError)},cancel:function(){this.send("closeModal"),this.site.mobileView?(0,n.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(r,"disableSaveButton",[l],Object.getOwnPropertyDescriptor(r,"disableSaveButton"),r),r))}),define("discourse/plugins/Canned Replies/discourse/initializers/add-canned-replies-ui-builder",["exports","discourse/lib/plugin-api","discourse/lib/show-modal","discourse/controllers/composer"],function(e,t,n,s){"use strict";function a(e){s.default.reopen({actions:{showCannedRepliesButton:function(){this.site.mobileView?(0,n.default)("canned-replies").setProperties({composerModel:this.model}):(this.appEvents.trigger("composer:show-preview"),this.appEvents.trigger("canned-replies:show"))}}}),e.addToolbarPopupMenuOptionsCallback(function(){return{id:"canned_replies_button",icon:"clipboard",action:"showCannedRepliesButton",label:"canned_replies.composer_button_text"}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"add-canned-replies-ui-builder",initialize:function(e){var n=e.lookup("site-settings:main"),s=e.lookup("current-user:main");n.canned_replies_enabled&&s&&s.staff&&(0,t.withPluginApi)("0.5",a)}}}),Ember.TEMPLATES["javascripts/admin/templates/modal/admin-plugins-chat-edit-rule"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["id","title"],["chat-integration-edit-rule_modal","chat_integration.edit_rule_modal.title"]],{"statements":[[0,"  "],[11,"div",[]],[13],[0,"\\n    "],[11,"form",[]],[5,["action"],[[28,[null]],"save"],[["on"],["submit"]]],[13],[0,"\\n      "],[11,"table",[]],[13],[0,"\\n\\n        "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n          "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[15,"for","provider"],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.provider"],null],false],[14],[14],[0,"\\n          "],[11,"td",[]],[13],[0,"\\n            "],[1,[33,["i18n"],[[33,["concat"],["chat_integration.provider.",[28,["model","channel","provider"]],".title"],null]],null],false],[0,"\\n          "],[14],[0,"\\n        "],[14],[0,"\\n        "],[11,"tr",[]],[15,"class","instructions"],[13],[0,"\\n          "],[11,"td",[]],[13],[14],[0,"\\n          "],[11,"td",[]],[13],[14],[0,"\\n        "],[14],[0,"\\n\\n        "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n          "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[15,"for","channel"],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.channel"],null],false],[14],[14],[0,"\\n          "],[11,"td",[]],[13],[0,"\\n            "],[1,[33,["channel-data"],null,[["provider","channel"],[[28,["model","provider"]],[28,["model","channel"]]]]],false],[0,"\\n          "],[14],[0,"\\n        "],[14],[0,"\\n        "],[11,"tr",[]],[15,"class","instructions"],[13],[0,"\\n          "],[11,"td",[]],[13],[14],[0,"\\n          "],[11,"td",[]],[13],[14],[0,"\\n        "],[14],[0,"\\n\\n        "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n          "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[15,"for","filter"],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.type"],null],false],[14],[14],[0,"\\n          "],[11,"td",[]],[13],[0,"\\n            "],[1,[33,["combo-box"],null,[["name","content","value"],["type",[28,["model","rule","available_types"]],[28,["model","rule","type"]]]]],false],[0,"\\n          "],[14],[0,"\\n        "],[14],[0,"\\n        "],[11,"tr",[]],[15,"class","instructions"],[13],[0,"\\n          "],[11,"td",[]],[13],[14],[0,"\\n          "],[11,"td",[]],[13],[11,"label",[]],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.instructions.type"],null],false],[14],[14],[0,"\\n        "],[14],[0,"\\n\\n        "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n          "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[15,"for","filter"],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.filter"],null],false],[14],[14],[0,"\\n          "],[11,"td",[]],[13],[0,"\\n            "],[1,[33,["combo-box"],null,[["name","content","value"],["filter",[28,["model","rule","available_filters"]],[28,["model","rule","filter"]]]]],false],[0,"\\n          "],[14],[0,"\\n        "],[14],[0,"\\n        "],[11,"tr",[]],[15,"class","instructions"],[13],[0,"\\n          "],[11,"td",[]],[13],[14],[0,"\\n          "],[11,"td",[]],[13],[11,"label",[]],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.instructions.filter"],null],false],[14],[14],[0,"\\n        "],[14],[0,"\\n\\n"],[6,["if"],[[28,["showCategory"]]],null,{"statements":[[0,"          "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n            "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[15,"for","category"],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.category"],null],false],[14],[14],[0,"\\n            "],[11,"td",[]],[13],[0,"\\n              "],[1,[33,["category-chooser"],null,[["name","value","rootNoneLabel","rootNone","overrideWidths"],["category",[28,["model","rule","category_id"]],"chat_integration.all_categories",true,false]]],false],[0,"\\n            "],[14],[0,"\\n          "],[14],[0,"\\n          "],[11,"tr",[]],[15,"class","instructions"],[13],[0,"\\n            "],[11,"td",[]],[13],[14],[0,"\\n            "],[11,"td",[]],[13],[11,"label",[]],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.instructions.category"],null],false],[14],[14],[0,"\\n          "],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"          "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n            "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[15,"for","group"],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.group"],null],false],[14],[14],[0,"\\n            "],[11,"td",[]],[13],[0,"\\n              "],[1,[33,["combo-box"],null,[["content","valueAttribute","value","none"],[[28,["model","groups"]],"id",[28,["model","rule","group_id"]],"chat_integration.choose_group"]]],false],[0,"\\n            "],[14],[0,"\\n          "],[14],[0,"\\n          "],[11,"tr",[]],[15,"class","instructions"],[13],[0,"\\n            "],[11,"td",[]],[13],[14],[0,"\\n            "],[11,"td",[]],[13],[11,"label",[]],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.instructions.group"],null],false],[14],[14],[0,"\\n          "],[14],[0,"\\n"]],"locals":[]}],[0,"\\n"],[6,["if"],[[28,["siteSettings","tagging_enabled"]]],null,{"statements":[[0,"          "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n            "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[15,"for","tags"],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.tags"],null],false],[14],[14],[0,"\\n            "],[11,"td",[]],[13],[0,"\\n              "],[1,[33,["tag-chooser"],null,[["placeholderKey","name","tags"],["chat_integration.all_tags","tags",[28,["model","rule","tags"]]]]],false],[0,"\\n            "],[14],[0,"\\n          "],[14],[0,"\\n          "],[11,"tr",[]],[15,"class","instructions"],[13],[0,"\\n            "],[11,"td",[]],[13],[14],[0,"\\n            "],[11,"td",[]],[13],[11,"label",[]],[13],[1,[33,["i18n"],["chat_integration.edit_rule_modal.instructions.tags"],null],false],[14],[14],[0,"\\n          "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n      "],[14],[0,"\\n\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[11,"div",[]],[15,"class","modal-footer"],[13],[0,"\\n  "],[1,[33,["d-button"],null,[["id","class","action","title","label","disabled"],["save-rule","btn-primary btn-large","save","chat_integration.edit_rule_modal.save","chat_integration.edit_rule_modal.save",[28,["saveDisabled"]]]]],false],[0,"\\n\\n  "],[1,[33,["d-button"],null,[["class","action","title","label"],["btn-large","cancel","chat_integration.edit_rule_modal.cancel","chat_integration.edit_rule_modal.cancel"]]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/templates/modal/admin-plugins-chat-edit-rule"}}),Ember.TEMPLATES["javascripts/admin/templates/modal/admin-plugins-chat-edit-channel"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["id","title"],["chat-integration-edit-channel-modal","chat_integration.edit_channel_modal.title"]],{"statements":[[0,"  "],[11,"div",[]],[13],[0,"\\n    "],[11,"form",[]],[5,["action"],[[28,[null]],"save"],[["on"],["submit"]]],[13],[0,"\\n      "],[11,"table",[]],[13],[0,"\\n\\n        "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n          "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[15,"for","provider"],[13],[1,[33,["i18n"],["chat_integration.edit_channel_modal.provider"],null],false],[14],[14],[0,"\\n          "],[11,"td",[]],[13],[0,"\\n            "],[1,[33,["i18n"],[[33,["concat"],["chat_integration.provider.",[28,["model","channel","provider"]],".title"],null]],null],false],[0,"\\n          "],[14],[0,"\\n        "],[14],[0,"\\n        "],[11,"tr",[]],[15,"class","instructions"],[13],[0,"\\n          "],[11,"td",[]],[13],[14],[0,"\\n          "],[11,"td",[]],[13],[14],[0,"\\n        "],[14],[0,"\\n\\n"],[6,["each"],[[28,["model","provider","channel_parameters"]]],null,{"statements":[[0,"          "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n            "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[16,"for",[34,["param-",[28,["param","key"]]]]],[13],[1,[33,["i18n"],[[33,["concat"],["chat_integration.provider.",[28,["model","channel","provider"]],".param.",[28,["param","key"]],".title"],null]],null],false],[14],[14],[0,"\\n            "],[11,"td",[]],[13],[0,"\\n              "],[1,[33,["text-field"],null,[["name","value"],[[33,["concat"],["param-",[28,["param","key"]]],null],[33,["mut"],[[33,["get"],[[28,["model","channel","data"]],[28,["param","key"]]],null]],null]]]],false],[0,"\\n\\n               \\n"],[6,["if"],[[33,["get"],[[28,["model","channel","data"]],[28,["param","key"]]],null]],null,{"statements":[[0,"                "],[1,[33,["input-tip"],null,[["validation"],[[33,["get"],[[28,["paramValidation"]],[28,["param","key"]]],null]]]],false],[0,"\\n"]],"locals":[]},null],[0,"            "],[14],[0,"\\n          "],[14],[0,"\\n          "],[11,"tr",[]],[15,"class","instructions"],[13],[0,"\\n            "],[11,"td",[]],[13],[14],[0,"\\n            "],[11,"td",[]],[13],[11,"label",[]],[13],[1,[33,["i18n"],[[33,["concat"],["chat_integration.provider.",[28,["model","channel","provider"]],".param.",[28,["param","key"]],".help"],null]],null],false],[14],[14],[0,"\\n          "],[14],[0,"\\n"]],"locals":["param"]},null],[0,"      "],[14],[0,"\\n\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[11,"div",[]],[15,"class","modal-footer"],[13],[0,"\\n  "],[1,[33,["d-button"],null,[["id","class","action","title","label","disabled"],["save-channel","btn-primary btn-large","save","chat_integration.edit_channel_modal.save","chat_integration.edit_channel_modal.save",[28,["saveDisabled"]]]]],false],[0,"\\n\\n  "],[1,[33,["d-button"],null,[["class","action","title","label"],["btn-large","cancel","chat_integration.edit_channel_modal.cancel","chat_integration.edit_channel_modal.cancel"]]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/templates/modal/admin-plugins-chat-edit-channel"}}),Ember.TEMPLATES["javascripts/admin/templates/modal/admin-plugins-chat-test"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["id","title"],["chat_integration_test_modal","chat_integration.test_modal.title"]],{"statements":[[0,"  "],[11,"div",[]],[13],[0,"\\n    "],[11,"form",[]],[5,["action"],[[28,[null]],"send"],[["on"],["submit"]]],[13],[0,"\\n      "],[11,"table",[]],[13],[0,"\\n        "],[11,"tr",[]],[15,"class","input"],[13],[0,"\\n          "],[11,"td",[]],[15,"class","label"],[13],[11,"label",[]],[15,"for","channel"],[13],[1,[33,["i18n"],["chat_integration.test_modal.topic"],null],false],[14],[14],[0,"\\n          "],[11,"td",[]],[13],[0,"\\n            "],[1,[33,["choose-topic"],null,[["selectedTopicId"],[[28,["model","topic_id"]]]]],false],[0,"\\n          "],[14],[0,"\\n        "],[14],[0,"\\n      "],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[11,"div",[]],[15,"class","modal-footer"],[13],[0,"\\n"],[6,["conditional-loading-spinner"],null,[["condition"],[[28,["loading"]]]],{"statements":[[0,"    "],[1,[33,["d-button"],null,[["id","class","action","title","label","disabled"],["send-test","btn-primary btn-large","send","chat_integration.test_modal.send","chat_integration.test_modal.send",[28,["sendDisabled"]]]]],false],[0,"\\n\\n    "],[1,[33,["d-button"],null,[["class","action","title","label"],["btn-large","closeModal","chat_integration.test_modal.close","chat_integration.test_modal.close"]]],false],[0,"\\n"]],"locals":[]},null],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/templates/modal/admin-plugins-chat-test"}}),define("discourse/plugins/discourse-chat-integration/admin/models/channel",["exports","discourse/models/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({updateProperties:function(){return this.getProperties(["data"])},createProperties:function(){return this.getProperties(["provider","data"])}})}),define("discourse/plugins/discourse-chat-integration/admin/models/provider",["exports","discourse/models/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({})}),define("discourse/plugins/discourse-chat-integration/admin/models/rule",["exports","discourse/models/rest","discourse/models/category","ember-addons/ember-computed-decorators"],function(e,t,n,s){"use strict";function a(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var i,l,r,o;e.default=t.default.extend((i=(0,s.observes)("type"),l=(0,s.default)("category_id"),r=(0,s.default)("filter"),o={available_filters:[{id:"watch",name:I18n.t("chat_integration.filter.watch"),icon:"exclamation-circle"},{id:"follow",name:I18n.t("chat_integration.filter.follow"),icon:"circle"},{id:"mute",name:I18n.t("chat_integration.filter.mute"),icon:"times-circle"}],available_types:[{id:"normal",name:I18n.t("chat_integration.type.normal")},{id:"group_message",name:I18n.t("chat_integration.type.group_message")},{id:"group_mention",name:I18n.t("chat_integration.type.group_mention")}],category_id:null,tags:null,channel_id:null,filter:"watch",type:"normal",error_key:null,
removeUnneededInfo:function(){"normal"===this.get("type")?this.set("group_id",null):this.set("category_id",null)},category:function(e){return!!e&&n.default.findById(e)},filterName:function(e){return I18n.t("chat_integration.filter."+e)},updateProperties:function(){return this.getProperties(["type","category_id","group_id","tags","filter"])},createProperties:function(){return this.getProperties(["type","channel_id","category_id","group_id","tags","filter"])}},a(o,"removeUnneededInfo",[i],Object.getOwnPropertyDescriptor(o,"removeUnneededInfo"),o),a(o,"category",[l],Object.getOwnPropertyDescriptor(o,"category"),o),a(o,"filterName",[r],Object.getOwnPropertyDescriptor(o,"filterName"),o),o))}),define("discourse/plugins/discourse-chat-integration/admin/adapters/channel",["exports","admin/adapters/build-plugin"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("chat")}),define("discourse/plugins/discourse-chat-integration/admin/adapters/provider",["exports","admin/adapters/build-plugin"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("chat")}),define("discourse/plugins/discourse-chat-integration/admin/adapters/rule",["exports","admin/adapters/build-plugin"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("chat")}),define("discourse/plugins/discourse-chat-integration/admin/components/rule-row",["exports","discourse/lib/ajax-error","ember-addons/ember-computed-decorators"],function(e,t,n){"use strict";function s(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var a,i,l,r;e.default=Ember.Component.extend((a=(0,n.default)("rule.type"),i=(0,n.default)("rule.type"),l=(0,n.default)("rule.type"),r={tagName:"tr",isCategory:function(e){return"normal"===e},isMessage:function(e){return"group_message"===e},isMention:function(e){return"group_mention"===e},actions:{edit:function(){this.sendAction("edit",this.get("rule"))},delete:function(e){var n=this;e.destroyRecord().then(function(){n.send("refresh")}).catch(t.popupAjaxError)},refresh:function(){this.sendAction("refresh")}}},s(r,"isCategory",[a],Object.getOwnPropertyDescriptor(r,"isCategory"),r),s(r,"isMessage",[i],Object.getOwnPropertyDescriptor(r,"isMessage"),r),s(r,"isMention",[l],Object.getOwnPropertyDescriptor(r,"isMention"),r),r))}),define("discourse/plugins/discourse-chat-integration/admin/components/channel-details",["exports","discourse/lib/ajax-error"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["channel-details"],actions:{refresh:function(){this.sendAction("refresh")},delete:function(e){var n=this;bootbox.confirm(I18n.t("chat_integration.channel_delete_confirm"),I18n.t("no_value"),I18n.t("yes_value"),function(s){s&&e.destroyRecord().then(function(){n.send("refresh")}).catch(t.popupAjaxError)})},edit:function(e){this.sendAction("edit",e)},test:function(e){this.sendAction("test",e)},createRule:function(e){this.sendAction("createRule",e)},editRule:function(e){this.sendAction("editRule",e,this.get("channel"))},showError:function(e){bootbox.alert(I18n.t(e))}}})}),define("discourse/plugins/discourse-chat-integration/admin/components/channel-data",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["channel-info"]})}),define("discourse/plugins/discourse-chat-integration/admin/controllers/admin-plugins-chat-provider",["exports","discourse/lib/show-modal","ember-addons/ember-computed-decorators"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a;e.default=Ember.Controller.extend((s=(0,n.default)("model.channels"),a={modalShowing:!1,anyErrors:function(e){var t=!1;return e.forEach(function(e){e.error_key&&(t=!0)}),t},actions:{createChannel:function(){this.set("modalShowing",!0);var e={channel:this.store.createRecord("channel",{provider:this.get("model.provider.id"),data:{}}),provider:this.get("model.provider")};(0,t.default)("admin-plugins-chat-edit-channel",{model:e,admin:!0})},editChannel:function(e){this.set("modalShowing",!0);var n={channel:e,provider:this.get("model.provider")};(0,t.default)("admin-plugins-chat-edit-channel",{model:n,admin:!0})},testChannel:function(e){this.set("modalShowing",!0),(0,t.default)("admin-plugins-chat-test",{model:{channel:e},admin:!0})},createRule:function(e){this.set("modalShowing",!0);var n={rule:this.store.createRecord("rule",{channel_id:e.id}),channel:e,provider:this.get("model.provider"),groups:this.get("model.groups")};(0,t.default)("admin-plugins-chat-edit-rule",{model:n,admin:!0})},editRule:function(e,n){this.set("modalShowing",!0);var s={rule:e,channel:n,provider:this.get("model.provider"),groups:this.get("model.groups")};(0,t.default)("admin-plugins-chat-edit-rule",{model:s,admin:!0})}}},function(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(a,"anyErrors",[s],Object.getOwnPropertyDescriptor(a,"anyErrors"),a),a))}),define("discourse/plugins/discourse-chat-integration/admin/controllers/admin-plugins-chat",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({})}),define("discourse/plugins/discourse-chat-integration/admin/controllers/modals/admin-plugins-chat-edit-channel",["exports","discourse/mixins/modal-functionality","discourse/lib/ajax-error","discourse/models/input-validation","ember-addons/ember-computed-decorators"],function(e,t,n,s,a){"use strict";function i(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var l,r,o,c;e.default=Ember.Controller.extend(t.default,(l=(0,a.on)("init"),r=(0,a.observes)("model"),o=(0,a.default)("paramValidation"),c={setupKeydown:function(){var e=this;Ember.run.schedule("afterRender",function(){$("#chat-integration-edit-channel-modal").keydown(function(t){13===t.keyCode&&e.send("save")})})},setupValidations:function(){if(this.get("model.provider")){var e=this.get("model.provider.channel_parameters").map(function(e){return e.key});Ember.defineProperty(this,"paramValidation",Ember.computed("model.channel.data.{"+e.join(",")+"}",this._paramValidation))}},validate:function(e){var t=e.regex,n=new RegExp(t),a=this.get("model.channel.data."+e.key);return void 0===a&&(a=""),""===a?s.default.create({failed:!0}):t?n.test(a)?s.default.create({ok:!0,reason:I18n.t("chat_integration.edit_channel_modal.channel_validation.ok")}):s.default.create({failed:!0,reason:I18n.t("chat_integration.edit_channel_modal.channel_validation.fail")}):s.default.create({ok:!0})},_paramValidation:function(){var e=this,t={};return this.get("model.provider.channel_parameters").forEach(function(n){t[n.key]=e.validate(n)}),t},saveDisabled:function(e){if(!e)return!0;var t=!1;return Object.keys(e).forEach(function(n){e[n]||(t=!0),e[n].ok||(t=!0)}),t},actions:{cancel:function(){this.send("closeModal")},save:function(){var e=this;this.get("saveDisabled")||this.get("model.channel").save().then(function(){e.send("closeModal")}).catch(n.popupAjaxError)}}},i(c,"setupKeydown",[l],Object.getOwnPropertyDescriptor(c,"setupKeydown"),c),i(c,"setupValidations",[r],Object.getOwnPropertyDescriptor(c,"setupValidations"),c),i(c,"saveDisabled",[o],Object.getOwnPropertyDescriptor(c,"saveDisabled"),c),c))}),define("discourse/plugins/discourse-chat-integration/admin/controllers/modals/admin-plugins-chat-test",["exports","discourse/mixins/modal-functionality","discourse/lib/ajax","discourse/lib/ajax-error","ember-addons/ember-computed-decorators"],function(e,t,n,s,a){"use strict";function i(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var l,r,o;e.default=Ember.Controller.extend(t.default,(l=(0,a.on)("init"),r=(0,a.default)("model.topic_id"),o={setupKeydown:function(){var e=this;Ember.run.schedule("afterRender",function(){$("#chat_integration_test_modal").keydown(function(t){13===t.keyCode&&e.send("send")})})},sendDisabled:function(e){return!e},actions:{send:function(){var e=this;this.get("sendDisabled")||(this.set("loading",!0),(0,n.ajax)("/admin/plugins/chat/test",{data:{channel_id:this.get("model.channel.id"),topic_id:this.get("model.topic_id")},type:"POST"}).then(function(){e.set("loading",!1),e.flash(I18n.t("chat_integration.test_modal.success"),"success")}).catch(s.popupAjaxError))}}},i(o,"setupKeydown",[l],Object.getOwnPropertyDescriptor(o,"setupKeydown"),o),i(o,"sendDisabled",[r],Object.getOwnPropertyDescriptor(o,"sendDisabled"),o),o))}),define("discourse/plugins/discourse-chat-integration/admin/controllers/modals/admin-plugins-chat-edit-rule",["exports","discourse/mixins/modal-functionality","discourse/lib/ajax-error","ember-addons/ember-computed-decorators"],function(e,t,n,s){"use strict";function a(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var i,l,r;e.default=Ember.Controller.extend(t.default,(i=(0,s.on)("init"),l=(0,s.default)("model.rule.type"),r={saveDisabled:!1,setupKeydown:function(){var e=this;Ember.run.schedule("afterRender",function(){$("#chat-integration-edit-channel-modal").keydown(function(t){13===t.keyCode&&e.send("save")})})},showCategory:function(e){return"normal"===e},actions:{cancel:function(){this.send("closeModal")},save:function(){var e=this;this.get("saveDisabled")||this.get("model.rule").save().then(function(){e.send("closeModal")}).catch(n.popupAjaxError)}}},a(r,"setupKeydown",[i],Object.getOwnPropertyDescriptor(r,"setupKeydown"),r),a(r,"showCategory",[l],Object.getOwnPropertyDescriptor(r,"showCategory"),r),r))}),define("discourse/plugins/discourse-chat-integration/admin/chat-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"admin.adminPlugins",path:"/plugins",map:function(){this.route("chat",function(){this.route("provider",{path:"/:provider"})})}}}),define("discourse/plugins/discourse-chat-integration/admin/routes/admin-plugins-chat-provider",["exports","discourse/models/group"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({model:function(e){var n=this;return Ember.RSVP.hash({channels:this.store.findAll("channel",{provider:e.provider}),provider:this.modelFor("admin-plugins-chat").findBy("id",e.provider),groups:t.default.findAll().then(function(e){return e.filter(function(e){return!e.get("automatic")})})}).then(function(e){return e.channels.forEach(function(e){e.set("rules",e.rules.map(function(t){return t=n.store.createRecord("rule",t),t.channel=e,t}))}),e})},serialize:function(e){return{provider:e.provider.get("id")}},actions:{closeModal:function(){return this.get("controller.modalShowing")&&(this.refresh(),this.set("controller.modalShowing",!1)),!0},refresh:function(){this.refresh()}}})}),define("discourse/plugins/discourse-chat-integration/admin/routes/admin-plugins-chat",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({model:function(){return this.store.findAll("provider")},actions:{showSettings:function(){this.transitionTo("adminSiteSettingsCategory","plugins",{queryParams:{filter:"chat_integration"}})}}})}),define("discourse/plugins/discourse-chat-integration/admin/routes/admin-plugins-chat-index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({afterModel:function(e){e.totalRows>0&&this.transitionTo("adminPlugins.chat.provider",e.get("firstObject").name)}})}),Ember.TEMPLATES["javascripts/admin/plugins-chat"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"id","admin-plugin-chat"],[13],[0,"\\n  "],[11,"div",[]],[15,"class","admin-controls"],[13],[0,"\\n    "],[11,"div",[]],[15,"class","span15"],[13],[0,"\\n      "],[11,"ul",[]],[15,"class","nav nav-pills"],[13],[0,"\\n"],[6,["each"],[[28,["model"]]],null,{"statements":[[0,"          "],[1,[33,["nav-item"],null,[["route","routeParam","label"],["adminPlugins.chat.provider",[28,["provider","name"]],[33,["concat"],["chat_integration.provider.",[28,["provider","name"]],".title"],null]]]],false],[0,"\\n"]],"locals":["provider"]},null],[0,"      "],[14],[0,"\\n    "],[14],[0,"\\n\\n    "],[11,"div",[]],[15,"class","pull-right"],[13],[0,"\\n      "],[1,[33,["d-button"],null,[["action","icon","title","label"],["showSettings","gear","chat_integration.settings","chat_integration.settings"]]],false],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n\\n"],[6,["unless"],[[28,["model","totalRows"]]],null,{"statements":[[0,"    "],[1,[33,["i18n"],["chat_integration.no_providers"],null],false],[0,"\\n"]],"locals":[]},null],[0,"\\n  "],[1,[26,["outlet"]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/plugins-chat"}}),Ember.TEMPLATES["javascripts/admin/plugins-chat-provider"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["anyErrors"]]],null,{"statements":[[0,"  "],[11,"div",[]],[15,"class","error"],[13],[0,"\\n    "],[11,"i",[]],[15,"class","fa fa-exclamation-triangle"],[13],[14],[0,"\\n    "],[11,"span",[]],[15,"class","error-message"],[13],[1,[33,["i18n"],["chat_integration.channels_with_errors"],null],false],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[6,["each"],[[28,["model","channels"]]],null,{"statements":[[0,"  "],[1,[33,["channel-details"],null,[["channel","provider","store","refresh","edit","test","createRule","editRule"],[[28,["channel"]],[28,["model","provider"]],[28,["store"]],"refresh","editChannel","testChannel","createRule","editRule"]]],false],[0,"\\n"]],"locals":["channel"]},null],[0,"\\n"],[11,"div",[]],[15,"class","table-footer"],[13],[0,"\\n  "],[11,"div",[]],[15,"class","pull-right"],[13],[0,"\\n     "],[1,[33,["d-button"],null,[["id","action","actionParam","icon","title","label"],["create-channel","createChannel",[28,["model","provider"]],"plus","chat_integration.create_channel","chat_integration.create_channel"]]],false],[0,"\\n  "],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/plugins-chat-provider"}}),Ember.TEMPLATES["javascripts/components/channel-details"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"class","channel-header"],[13],[0,"\\n  "],[11,"div",[]],[15,"class","pull-right"],[13],[0,"\\n    "],[1,[33,["d-button"],null,[["action","actionParam","icon","title","label"],["edit",[28,["channel"]],"pencil","chat_integration.edit_channel","chat_integration.edit_channel"]]],false],[0,"\\n\\n    "],[1,[33,["d-button"],null,[["action","actionParam","icon","title","label"],["test",[28,["channel"]],"rocket","chat_integration.test_channel","chat_integration.test_channel"]]],false],[0,"\\n\\n    "],[1,[33,["d-button"],null,[["class","action","actionParam","icon","title","label"],["cancel","delete",[28,["channel"]],"trash","chat_integration.delete_channel","chat_integration.delete_channel"]]],false],[0,"\\n  "],[14],[0,"\\n\\n  "],[11,"span",[]],[15,"class","channel-title"],[13],[0,"\\n"],[6,["if"],[[28,["channel","error_key"]]],null,{"statements":[[0,"      "],[1,[33,["d-button"],null,[["action","actionParam","class","icon"],["showError",[28,["channel","error_key"]],"delete btn-danger","exclamation-triangle"]]],false],[0,"\\n"]],"locals":[]},null],[0,"\\n    "],[1,[33,["channel-data"],null,[["provider","channel"],[[28,["provider"]],[28,["channel"]]]]],false],[0,"\\n  "],[14],[0,"\\n"],[14],[0,"\\n\\n"],[11,"div",[]],[15,"class","channel-body"],[13],[0,"\\n  "],[11,"table",[]],[13],[0,"\\n    "],[11,"tr",[]],[13],[0,"\\n      "],[11,"th",[]],[13],[1,[33,["i18n"],["chat_integration.rule_table.filter"],null],false],[14],[0,"\\n      "],[11,"th",[]],[13],[1,[33,["i18n"],["chat_integration.rule_table.category"],null],false],[14],[0,"\\n\\n"],[6,["if"],[[28,["siteSettings","tagging_enabled"]]],null,{"statements":[[0,"        "],[11,"th",[]],[13],[1,[33,["i18n"],["chat_integration.rule_table.tags"],null],false],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n      "],[11,"th",[]],[13],[14],[0,"\\n    "],[14],[0,"\\n\\n"],[6,["each"],[[28,["channel","rules"]]],null,{"statements":[[0,"      "],[1,[33,["rule-row"],null,[["rule","edit","refresh"],[[28,["rule"]],"editRule","refresh"]]],false],[0,"\\n"]],"locals":["rule"]},null],[0,"  "],[14],[0,"\\n"],[14],[0,"\\n\\n"],[11,"div",[]],[15,"class","channel-footer"],[13],[0,"\\n  "],[11,"div",[]],[15,"class","pull-right"],[13],[0,"\\n   "],[1,[33,["d-button"],null,[["action","actionParam","icon","title","label"],["createRule",[28,["channel"]],"plus","chat_integration.create_rule","chat_integration.create_rule"]]],false],[0,"\\n  "],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/channel-details"}}),Ember.TEMPLATES["javascripts/components/rule-row"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"td",[]],[13],[0,"\\n  "],[1,[28,["rule","filterName"]],false],[0,"\\n"],[14],[0,"\\n\\n"],[11,"td",[]],[13],[0,"\\n"],[6,["if"],[[28,["isCategory"]]],null,{"statements":[[6,["if"],[[28,["rule","category"]]],null,{"statements":[[0,"      "],[1,[33,["category-link"],[[28,["rule","category"]]],[["allowUncategorized","link"],["true","false"]]],false],[0,"\\n"]],"locals":[]},{"statements":[[0,"      "],[1,[33,["i18n"],["chat_integration.all_categories"],null],false],[0,"\\n"]],"locals":[]}]],"locals":[]},{"statements":[[6,["if"],[[28,["isMention"]]],null,{"statements":[[0,"    "],[1,[33,["i18n"],["chat_integration.group_mention_template"],[["name"],[[28,["rule","group_name"]]]]],false],[0,"\\n"]],"locals":[]},{"statements":[[6,["if"],[[28,["isMessage"]]],null,{"statements":[[0,"    "],[1,[33,["i18n"],["chat_integration.group_message_template"],[["name"],[[28,["rule","group_name"]]]]],false],[0,"\\n  "]],"locals":[]},null]],"locals":[]}]],"locals":[]}],[14],[0,"\\n\\n\\n"],[6,["if"],[[28,["siteSettings","tagging_enabled"]]],null,{"statements":[[0,"  "],[11,"td",[]],[13],[0,"\\n"],[6,["if"],[[28,["rule","tags"]]],null,{"statements":[[0,"      "],[1,[28,["rule","tags"]],false],[0,"\\n"]],"locals":[]},{"statements":[[0,"      "],[1,[33,["i18n"],["chat_integration.all_tags"],null],false],[0,"\\n"]],"locals":[]}],[0,"  "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[11,"td",[]],[13],[0,"\\n  "],[1,[33,["d-button"],null,[["action","actionParam","icon","class","title"],["edit",[28,["rule"]],"pencil","edit","chat_integration.rule_table.edit_rule"]]],false],[0,"\\n  "],[1,[33,["d-button"],null,[["action","actionParam","icon","class","title"],["delete",[28,["rule"]],"trash-o","delete","chat_integration.rule_table.delete_rule"]]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/rule-row"}}),Ember.TEMPLATES["javascripts/components/channel-data"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["each"],[[28,["provider","channel_parameters"]]],null,{"statements":[[6,["unless"],[[28,["param","hidden"]]],null,{"statements":[[0,"    "],[11,"span",[]],[15,"class","field-name"],[13],[1,[33,["i18n"],[[33,["concat"],["chat_integration.provider.",[28,["channel","provider"]],".param.",[28,["param","key"]],".title"],null]],null],false],[0,":"],[14],[0,"\\n    "],[11,"span",[]],[15,"class","field-value"],[13],[1,[33,["get"],[[28,["channel","data"]],[28,["param","key"]]],null],false],[14],[0,"\\n    "],[11,"br",[]],[13],[14],[0,"\\n"]],"locals":[]},null]],"locals":["param"]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/channel-data"}}),define("discourse/plugins/discourse-chat-integration/discourse/public-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.route("transcript",{path:"/chat-transcript/:secret"})}}),define("discourse/plugins/discourse-chat-integration/discourse/routes/transcript",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(e){var s=this;if(this.currentUser){var a=e.params.transcript.secret;this.replaceWith("discovery.latest").then(function(e){s.controllerFor("navigation/default").get("canCreateTopic")&&Ember.run.next(function(){(0,t.ajax)("chat-transcript/"+a).then(function(t){e.send("createNewTopicViaParams",null,t.content,null,null,null)},n.popupAjaxError)})})}else this.session.set("shouldRedirectToUrl",window.location.href),this.replaceWith("login")}})}),define("discourse/plugins/discourse-data-explorer/admin/adapters/query",["exports","admin/adapters/build-plugin"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("explorer").extend({})}),define("discourse/plugins/discourse-data-explorer/discourse/lib/binary-search",["exports"],function(e){"use strict";function t(e,t,n){for(var s,a=0,i=e.length-1,l=n||"id";a<=i;){if(s=Math.floor((a+i)/2),Em.get(e[s],l)===t)return s;Em.get(e[s],l)<t?a=s+1:i=s-1}return-1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}),Discourse.RAW_TEMPLATES["javascripts/explorer/post"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,n,s,a){var i;return'<aside class="quote"\n       data-post="'+e.escapeExpression(n.get.call(null!=t?t:{},"post.post_number",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n       data-topic="'+e.escapeExpression(n.get.call(null!=t?t:{},"post.topic_id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">\n  <div class="title" style="cursor: pointer;">\n  <div class="quote-controls">\n    <a href="/t/via-quote/'+e.escapeExpression(n.get.call(null!=t?t:{},"post.topic_id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/"+e.escapeExpression(n.get.call(null!=t?t:{},"post.post_number",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n         title="go to the quoted post"\n         class="quote-other-topic"></a></div>\n'+e.escapeExpression((n.avatar||t&&t.avatar||n.helperMissing).call(null!=t?t:{},"post",{name:"avatar",hash:{imageSize:"tiny"},hashTypes:{imageSize:"StringLiteral"},hashContexts:{imageSize:t},types:["PathExpression"],contexts:[t],data:a}))+e.escapeExpression(n.get.call(null!=t?t:{},"post.username",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+":</div>\n<blockquote><p>"+(null!=(i=n.get.call(null!=t?t:{},"post.excerpt",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))?i:"")+"</p></blockquote></aside>"},3:function(e,t,n,s,a){return"  "+e.escapeExpression(n.get.call(null!=t?t:{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){var i;return null!=(i=n.if.call(null!=t?t:{},"post",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/text"]=requirejs("discourse-common/lib/raw-handlebars").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){return e.escapeExpression(n.get.call(null!=t?t:{},"value",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/group"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,n,s,a){return'  <a href="'+e.escapeExpression(n.get.call(null!=t?t:{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/groups/"+e.escapeExpression(n.get.call(null!=t?t:{},"group.name",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression(n.get.call(null!=t?t:{},"group.name",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</a>\n"},3:function(e,t,n,s,a){return"  "+e.escapeExpression(n.get.call(null!=t?t:{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){var i;return null!=(i=n.if.call(null!=t?t:{},"group",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/html"]=requirejs("discourse-common/lib/raw-handlebars").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){var i;return(null!=(i=n.get.call(null!=t?t:{},"value",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))?i:"")+"\n"},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/reltime"]=requirejs("discourse-common/lib/raw-handlebars").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){return e.escapeExpression((n.reltime||t&&t.reltime||n.helperMissing).call(null!=t?t:{},"value",{name:"reltime",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/user"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,n,s,a){return'  <a href="'+e.escapeExpression(n.get.call(null!=t?t:{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/users/"+e.escapeExpression(n.get.call(null!=t?t:{},"user.username",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'/activity"\n     data-user-card="'+e.escapeExpression(n.get.call(null!=t?t:{},"user.username",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression((n.avatar||t&&t.avatar||n.helperMissing).call(null!=t?t:{},"user",{name:"avatar",hash:{imageSize:"tiny"},hashTypes:{imageSize:"StringLiteral"},hashContexts:{imageSize:t},types:["PathExpression"],contexts:[t],data:a}))+" "+e.escapeExpression(n.get.call(null!=t?t:{},"user.username",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</a>\n"},3:function(e,t,n,s,a){return"  "+e.escapeExpression(n.get.call(null!=t?t:{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){var i;return null!=(i=n.if.call(null!=t?t:{},"user",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/category"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,n,s,a){return"  "+e.escapeExpression((n["category-link"]||t&&t["category-link"]||n.helperMissing).call(null!=t?t:{},"category",{name:"category-link",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},3:function(e,t,n,s,a){return'  <a href="'+e.escapeExpression(n.get.call(null!=t?t:{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/t/"+e.escapeExpression(n.get.call(null!=t?t:{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression(n.get.call(null!=t?t:{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){var i;return null!=(i=n.if.call(null!=t?t:{},"category",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/topic"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,n,s,a){var i;return'  <a href="'+e.escapeExpression(n.get.call(null!=t?t:{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/t/"+e.escapeExpression(n.get.call(null!=t?t:{},"topic.slug",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/"+e.escapeExpression(n.get.call(null!=t?t:{},"topic.id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n          >'+(null!=(i=n.get.call(null!=t?t:{},"topic.fancy_title",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))?i:"")+"</a> ("+e.escapeExpression(n.get.call(null!=t?t:{},"topic.posts_count",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+")\n"},3:function(e,t,n,s,a){return'  <a href="'+e.escapeExpression(n.get.call(null!=t?t:{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/t/"+e.escapeExpression(n.get.call(null!=t?t:{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression(n.get.call(null!=t?t:{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){var i;return null!=(i=n.if.call(null!=t?t:{},"topic",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/badge"]=requirejs("discourse-common/lib/raw-handlebars").template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){
return'<a href="'+e.escapeExpression(n.get.call(null!=t?t:{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/badges/"+e.escapeExpression(n.get.call(null!=t?t:{},"badge.id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/"+e.escapeExpression(n.get.call(null!=t?t:{},"badge.name",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n   class="user-badge '+e.escapeExpression(n.get.call(null!=t?t:{},"badge.badgeTypeClassName",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n   title="'+e.escapeExpression(n.get.call(null!=t?t:{},"badge.displayDescription",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n   data-badge-name="'+e.escapeExpression(n.get.call(null!=t?t:{},"badge.name",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression((n["icon-or-image"]||t&&t["icon-or-image"]||n.helperMissing).call(null!=t?t:{},"badge.icon",{name:"icon-or-image",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'\n<span class="badge-display-name">'+e.escapeExpression(n.get.call(null!=t?t:{},"badge.displayName",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</span></a>\n"},useData:!0}),Ember.TEMPLATES["javascripts/explorer-query-result"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"class","result-info"],[13],[0,"\\n  "],[1,[33,["i18n"],["explorer.download"],null],false],[0,"\\n  "],[1,[33,["d-button"],null,[["action","icon","label"],["downloadResultJson","download","explorer.download_json"]]],false],[0,"\\n  "],[1,[33,["d-button"],null,[["action","icon","label"],["downloadResultCsv","download","explorer.download_csv"]]],false],[0,"\\n  "],[11,"div",[]],[15,"class","result-about"],[13],[0,"\\n    "],[1,[26,["duration"]],false],[0,"\\n  "],[14],[0,"\\n"],[14],[6,["if"],[[28,["hasExplain"]]],null,{"statements":[[0,"  "],[11,"pre",[]],[13],[11,"code",[]],[13],[1,[28,["content","explain"]],false],[0,"\\n  "],[14],[14]],"locals":[]},null],[0,"\\n"],[11,"table",[]],[13],[0,"\\n  "],[11,"thead",[]],[13],[0,"\\n  "],[11,"tr",[]],[15,"class","headers"],[13],[0,"\\n"],[6,["each"],[[28,["columnDispNames"]]],null,{"statements":[[0,"      "],[11,"th",[]],[13],[1,[28,["col"]],false],[14],[0,"\\n"]],"locals":["col"]},null],[0,"  "],[14],[0,"\\n  "],[14],[0,"\\n  "],[11,"tbody",[]],[13],[0,"\\n"],[6,["each"],[[28,["rows"]]],null,{"statements":[[0,"    "],[1,[33,["query-row-content"],null,[["row","fallbackTemplate","columnTemplates"],[[28,["row"]],[28,["fallbackTemplate"]],[28,["columnTemplates"]]]]],false],[0,"\\n"]],"locals":["row"]},null],[0,"  "],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/explorer-query-result"}}),Ember.TEMPLATES["javascripts/admin/plugins-explorer"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["explorer-container"],null,[["hideSchema","everEditing"],[[28,["hideSchema"]],[28,["everEditing"]]]],{"statements":[[0,"\\n"],[6,["if"],[[28,["disallow"]]],null,{"statements":[[0,"    "],[11,"h2",[]],[13],[1,[33,["i18n"],["explorer.admins_only"],null],false],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"    "],[11,"div",[]],[15,"class","query-list"],[13],[0,"\\n      "],[1,[33,["combo-box"],null,[["valueAttribute","value","nameProperty","content","castInteger","nameChanges"],["id",[28,["selectedQueryId"]],"listName",[28,["content"]],"true","true"]]],false],[0,"\\n      "],[1,[33,["d-button"],null,[["action","icon","class"],["showCreate","plus","no-text"]]],false],[0,"\\n      "],[1,[33,["d-button"],null,[["action","label","icon"],["importQuery","explorer.import.label","upload"]]],false],[0,"\\n    "],[14],[0,"\\n\\n"],[6,["if"],[[28,["showCreate"]]],null,{"statements":[[0,"      "],[11,"div",[]],[15,"class","query-create"],[13],[0,"\\n        "],[1,[33,["text-field"],null,[["value","placeholderKey"],[[28,["newQueryName"]],"explorer.create_placeholder"]]],false],[0,"\\n        "],[1,[33,["d-button"],null,[["action","label","icon","class"],["create","explorer.create","plus","btn-primary"]]],false],[0,"\\n      "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[6,["if"],[[28,["othersDirty"]]],null,{"statements":[[0,"      "],[11,"div",[]],[15,"class","warning"],[13],[0,"\\n        "],[1,[33,["fa-icon"],["warning"],null],false],[0,"\\n        "],[1,[33,["i18n"],["explorer.others_dirty"],null],false],[0,"\\n      "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n    "],[11,"hr",[]],[13],[14],[0,"\\n\\n"],[6,["if"],[[28,["selectedItem","fake"]]],null,{"statements":[[0,"      "],[1,[33,["i18n"],["explorer.no_queries"],null],false],[0," "],[11,"a",[]],[5,["action"],[[28,[null]],"showCreate"]],[13],[1,[33,["i18n"],["explorer.no_queries_hook"],null],false],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"      "],[11,"div",[]],[16,"class",[34,["query-edit ",[33,["if"],[[28,["editName"]],"editing"],null]]]],[13],[0,"\\n"],[6,["if"],[[28,["selectedItem"]]],null,{"statements":[[6,["if"],[[28,["editing"]]],null,{"statements":[[0,"            "],[11,"div",[]],[15,"class","name"],[13],[0,"\\n              "],[1,[33,["text-field"],null,[["value"],[[28,["selectedItem","name"]]]]],false],[0,"\\n            "],[14],[0,"\\n            "],[11,"div",[]],[15,"class","desc"],[13],[0,"\\n              "],[1,[33,["textarea"],null,[["value"],[[28,["selectedItem","description"]]]]],false],[0,"\\n            "],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"            "],[11,"div",[]],[15,"class","name"],[13],[0,"\\n              "],[11,"h2",[]],[13],[1,[28,["selectedItem","name"]],false],[14],[0,"\\n              "],[1,[33,["d-button"],null,[["action","icon","class"],["editName","pencil","no-text btn-small"]]],false],[0,"\\n            "],[14],[0,"\\n            "],[11,"div",[]],[15,"class","desc"],[13],[0,"\\n              "],[1,[28,["selectedItem","description"]],false],[0,"\\n            "],[14],[0,"\\n"]],"locals":[]}],[0,"\\n"],[6,["if"],[[28,["everEditing"]]],null,{"statements":[[0,"            "],[11,"div",[]],[16,"class",[34,["query-editor ",[33,["if"],[[28,["hideSchema"]],"no-schema"],null]]]],[13],[0,"\\n              "],[11,"div",[]],[15,"class","right-panel"],[13],[0,"\\n                "],[11,"div",[]],[15,"class","schema grippie-target"],[13],[0,"\\n                  "],[1,[33,["explorer-schema"],null,[["schema","hideSchema"],[[28,["schema"]],[28,["hideSchema"]]]]],false],[0,"\\n                "],[14],[0,"\\n              "],[14],[0,"\\n              "],[11,"div",[]],[15,"class","editor-panel"],[13],[0,"\\n                "],[1,[33,["ace-editor"],null,[["content","mode"],[[28,["selectedItem","sql"]],"sql"]]],false],[0,"\\n              "],[14],[0,"\\n              "],[11,"div",[]],[15,"class","grippie"],[13],[14],[0,"\\n              "],[11,"div",[]],[15,"class","clear"],[13],[14],[0,"\\n            "],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"            "],[11,"div",[]],[15,"class","sql"],[13],[0,"\\n              "],[1,[33,["hljs-code-view"],null,[["value","codeClass"],[[28,["selectedItem","sql"]],"sql"]]],false],[0,"\\n            "],[14],[0,"\\n"]],"locals":[]}],[0,"\\n\\n\\n          "],[11,"div",[]],[15,"class","clear"],[13],[14],[0,"\\n          "],[11,"div",[]],[15,"class","pull-left"],[13],[0,"\\n"],[6,["if"],[[28,["everEditing"]]],null,{"statements":[[0,"              "],[1,[33,["d-button"],null,[["action","label","disabled","class"],["save","explorer.save",[28,["saveDisabled"]],"btn-primary"]]],false],[0,"\\n"]],"locals":[]},{"statements":[[0,"              "],[1,[33,["d-button"],null,[["action","label","icon","class"],["editName","explorer.edit","pencil","btn-primary"]]],false],[0,"\\n"]],"locals":[]}],[0,"            "],[1,[33,["d-button"],null,[["action","label","disabled","icon"],["download","explorer.export",[28,["runDisabled"]],"download"]]],false],[0,"\\n          "],[14],[0,"\\n          "],[11,"div",[]],[15,"class","pull-right"],[13],[0,"\\n"],[6,["if"],[[28,["selectedItem","destroyed"]]],null,{"statements":[[0,"              "],[1,[33,["d-button"],null,[["action","class","icon","label"],["recover","","undo","explorer.recover"]]],false],[0,"\\n"]],"locals":[]},{"statements":[[6,["if"],[[28,["everEditing"]]],null,{"statements":[[0,"                "],[1,[33,["d-button"],null,[["action","class","icon","label","disabled"],["discard","btn-danger","undo","explorer.undo",[28,["saveDisabled"]]]]],false],[0,"\\n"]],"locals":[]},null],[0,"              "],[1,[33,["d-button"],null,[["action","class","icon","label"],["destroy","btn-danger","trash","explorer.delete"]]],false],[0,"\\n"]],"locals":[]}],[0,"          "],[14],[0,"\\n          "],[11,"div",[]],[15,"class","clear"],[13],[14],[0,"\\n"]],"locals":[]},null],[0,"      "],[14],[0,"\\n\\n      "],[11,"form",[]],[15,"class","query-run"],[5,["action"],[[28,[null]],"run"],[["on"],["submit"]]],[13],[0,"\\n"],[6,["if"],[[28,["selectedItem","hasParams"]]],null,{"statements":[[0,"          "],[11,"div",[]],[15,"class","query-params"],[13],[0,"\\n"],[6,["each"],[[28,["selectedItem","param_info"]]],null,{"statements":[[0,"              "],[1,[33,["param-input"],null,[["params","info"],[[28,["selectedItem","params"]],[28,["pinfo"]]]]],false],[0,"\\n"]],"locals":["pinfo"]},null],[0,"          "],[14],[0,"\\n"]],"locals":[]},null],[6,["if"],[[28,["runDisabled"]]],null,{"statements":[[6,["if"],[[28,["saveDisabled"]]],null,{"statements":[[0,"            "],[1,[33,["d-button"],null,[["label","disabled","class"],["explorer.run","true","btn-primary"]]],false],[0,"\\n"]],"locals":[]},{"statements":[[0,"            "],[1,[33,["d-button"],null,[["action","label"],["saverun","explorer.saverun"]]],false],[0,"\\n"]],"locals":[]}]],"locals":[]},{"statements":[[0,"          "],[1,[33,["d-button"],null,[["action","label","disabled","class","type"],["run","explorer.run",[28,["runDisabled"]],"btn-primary","submit"]]],false],[0,"\\n"]],"locals":[]}],[0,"        "],[11,"label",[]],[15,"class","query-plan"],[13],[1,[33,["input"],null,[["type","checked","name"],["checkbox",[28,["explain"]],"explain"]]],false],[0," "],[1,[33,["i18n"],["explorer.explain_label"],null],false],[14],[0,"\\n      "],[14],[0,"\\n\\n      "],[11,"hr",[]],[13],[14],[0,"\\n"]],"locals":[]}],[0,"    "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["loading"]]]]],false],[0,"\\n"],[6,["unless"],[[28,["selectedItem","fake"]]],null,{"statements":[[6,["if"],[[28,["results"]]],null,{"statements":[[0,"        "],[11,"div",[]],[15,"class","query-results"],[13],[0,"\\n"],[6,["if"],[[28,["showResults"]]],null,{"statements":[[0,"            "],[1,[33,["query-result"],null,[["query","content"],[[28,["selectedItem"]],[28,["results"]]]]],false],[0,"\\n"]],"locals":[]},{"statements":[[6,["each"],[[28,["results","errors"]]],null,{"statements":[[0,"              "],[11,"pre",[]],[15,"class","query-error"],[13],[11,"code",[]],[13],[1,[28,["err"]],false],[14],[14],[0,"\\n"]],"locals":["err"]},null]],"locals":[]}],[0,"        "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n    "],[11,"div",[]],[15,"class","explorer-pad-bottom"],[13],[14],[0,"\\n\\n"]],"locals":[]}]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/plugins-explorer"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/generic"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["text-field"],null,[["value"],[[28,["value"]]]]],false],[0,"\\n"],[11,"span",[]],[15,"class","param-name"],[13],[1,[28,["info","identifier"]],false],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/components/q-params/generic"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/boolean"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["info","nullable"]]],null,{"statements":[[0,"  "],[1,[33,["combo-box"],null,[["valueAttribute","value","nameProperty","content"],["id",[28,["value"]],"name",[28,["boolTypes"]]]]],false],[0,"\\n"]],"locals":[]},{"statements":[[0,"  "],[1,[33,["input"],null,[["type","checked"],["checkbox",[28,["valueBool"]]]]],false],[0,"\\n"]],"locals":[]}],[11,"span",[]],[15,"class","param-name"],[13],[1,[28,["info","identifier"]],false],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/components/q-params/boolean"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/user_list"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["user-selector"],null,[["usernames"],[[28,["value"]]]]],false],[0,"\\n"],[11,"span",[]],[15,"class","param-name"],[13],[1,[28,["info","identifier"]],false],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/components/q-params/user_list"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/int"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["input"],null,[["type","value"],["number",[28,["value"]]]]],false],[0,"\\n"],[11,"span",[]],[15,"class","param-name"],[13],[1,[28,["info","identifier"]],false],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/components/q-params/int"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/user_id"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["user-selector"],null,[["usernames","single"],[[28,["value"]],"true"]]],false],[0,"\\n"],[11,"span",[]],[15,"class","param-name"],[13],[1,[28,["info","identifier"]],false],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/components/q-params/user_id"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/string"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["text-field"],null,[["value","type"],[[28,["value"]],"text"]]],false],[0,"\\n"],[11,"span",[]],[15,"class","param-name"],[13],[1,[28,["info","identifier"]],false],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/admin/components/q-params/string"}}),Ember.TEMPLATES["javascripts/components/explorer-schema-onetable"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"class","schema-table-name"],[13],[0,"\\n"],[6,["if"],[[28,["table","open"]]],null,{"statements":[[0,"    "],[11,"i",[]],[15,"class","fa fa-caret-down"],[13],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"    "],[11,"i",[]],[15,"class","fa fa-caret-right"],[13],[14],[0,"\\n"]],"locals":[]}],[0,"  "],[1,[28,["table","name"]],false],[0,"\\n"],[14],[0,"\\n"],[11,"div",[]],[15,"class","schema-table-cols"],[13],[0,"\\n"],[6,["if"],[[28,["table","open"]]],null,{"statements":[[0,"    "],[11,"dl",[]],[13],[0,"\\n"],[6,["each"],[[28,["table","columns"]]],null,{"statements":[[0,"      "],[11,"div",[]],[13],[0,"\\n      "],[11,"dt",[]],[16,"class",[34,[[33,["if"],[[28,["col","sensitive"]],"sensitive"],null]]]],[16,"title",[34,[[33,["if"],[[28,["col","sensitive"]],[33,["i18n"],["explorer.schema.sensitive"],null]],null]]]],[13],[0,"\\n"],[6,["if"],[[28,["col","sensitive"]]],null,{"statements":[[0,"          "],[11,"i",[]],[15,"class","fa fa-warning"],[13],[14],[0,"\\n"]],"locals":[]},null],[0,"        "],[1,[28,["col","column_name"]],false],[0,"\\n      "],[14],[0,"\\n      "],[11,"dd",[]],[13],[0,"\\n        "],[1,[28,["col","data_type"]],false],[0,"\\n"],[6,["if"],[[28,["col","havetypeinfo"]]],null,{"statements":[[0,"          "],[11,"br",[]],[13],[14],[0,"\\n"],[6,["if"],[[28,["col","havepopup"]]],null,{"statements":[[0,"            "],[11,"i",[]],[15,"class","fa fa-info popup-info"],[13],[0,"\\n              "],[11,"div",[]],[15,"class","popup"],[13],[0,"\\n                "],[1,[28,["col","column_desc"]],false],[0,"\\n"],[6,["if"],[[28,["col","enum"]]],null,{"statements":[[0,"                  "],[1,[33,["explorer-schema-enuminfo"],null,[["col"],[[28,["col"]]]]],false],[0,"\\n"]],"locals":[]},null],[0,"              "],[14],[0,"\\n            "],[14],[0,"\\n"]],"locals":[]},null],[0,"          "],[11,"span",[]],[15,"class","schema-typenotes"],[13],[0,"\\n            "],[1,[28,["col","notes"]],false],[0,"\\n          "],[14],[0,"\\n"]],"locals":[]},null],[0,"      "],[14],[0,"\\n      "],[14],[0,"\\n"]],"locals":["col"]},null],[0,"    "],[14],[0,"\\n"]],"locals":[]},null],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/explorer-schema-onetable"}}),Ember.TEMPLATES["javascripts/components/explorer-schema"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["hideSchema"]]],null,{"statements":[[0,"  "],[1,[33,["d-button"],null,[["action","icon","class"],["expandSchema","chevron-left","no-text unhide"]]],false],[0,"\\n"]],"locals":[]},null],[11,"div",[]],[16,"class",[34,[[33,["if"],[[28,["hideSchema"]],"hidden"],null]]]],[13],[0,"\\n  "],[1,[33,["text-field"],null,[["value","placeholderKey"],[[28,["filter"]],"explorer.schema.filter"]]],false],[0,"\\n  "],[1,[33,["d-button"],null,[["action","icon","class"],["collapseSchema","chevron-right","no-text btn-small"]]],false],[0,"\\n  "],[1,[33,["conditional-loading-spinner"],null,[["condition"],[[28,["loading"]]]]],false],[0,"\\n  "],[11,"div",[]],[15,"class","schema-container"],[13],[0,"\\n    "],[11,"ul",[]],[13],[0,"\\n"],[6,["each"],[[28,["filteredTables"]]],null,{"statements":[[0,"        "],[1,[33,["explorer-schema-onetable"],null,[["table"],[[28,["table"]]]]],false],[0,"\\n"]],"locals":["table"]},null],[0,"    "],[14],[0,"\\n  "],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/explorer-schema"}}),Ember.TEMPLATES["javascripts/components/explorer-schema-enuminfo"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["each"],[[28,["enuminfo"]]],null,{"statements":[[0,"  "],[11,"li",[]],[16,"value",[34,[[28,["enum","value"]]]]],[13],[0,"\\n    "],[1,[28,["enum","name"]],false],[0,"\\n  "],[14],[0,"\\n"]],"locals":["enum"]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/explorer-schema-enuminfo"}}),Ember.TEMPLATES["javascripts/components/json-file-uploader"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[11,"div",[]],[15,"class","jsfu-shade-container"],[13],[0,"\\n  "],[11,"div",[]],[15,"class","jsfu-file"],[13],[0,"\\n    "],[11,"input",[]],[15,"id","js-file-input"],[15,"type","file"],[15,"style","display:none;"],[16,"accept",[26,["accept"]],null],[13],[14],[0,"\\n    "],[1,[33,["d-button"],null,[["class","action","class","icon","label"],["fileSelect","selectFile","","upload","upload_selector.select_file"]]],false],[0,"\\n    "],[1,[33,["conditional-loading-spinner"],null,[["condition","size"],[[28,["loading"]],"small"]]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"div",[]],[15,"class","jsfu-separator"],[13],[1,[33,["i18n"],["alternation"],null],false],[14],[0,"\\n  "],[11,"div",[]],[15,"class","jsfu-paste"],[13],[0,"\\n    "],[1,[33,["textarea"],null,[["value"],[[28,["value"]]]]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"div",[]],[16,"class",[34,["jsfu-shade ",[33,["if"],[[28,["hover"]],"","hidden"],null]]]],[13],[11,"span",[]],[15,"class","text"],[13],[1,[33,["fa-icon"],["upload"],null],false],[14],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/json-file-uploader"}}),Ember.TEMPLATES["javascripts/modal/import-query"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["title"],["explorer.import.modal"]],{"statements":[[0,"  "],[11,"form",[]],[5,["action"],[[28,[null]],"dummy"],[["on"],["submit"]]],[13],[0,"\\n    "],[11,"div",[]],[15,"class","modal-body"],[13],[0,"\\n      "],[1,[33,["json-file-uploader"],null,[["value","extension"],[[28,["queryFile"]],".dcquery.json"]]],false],[0,"\\n    "],[14],[0,"\\n    "],[11,"div",[]],[15,"class","modal-footer"],[13],[0,"\\n      "],[1,[33,["d-button"],null,[["class","action","type","disabled","icon","label"],["btn-primary","doImport","submit",[28,["notReady"]],"plus","explorer.import.label"]]],false],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/modal/import-query"}}),define("discourse/plugins/discourse-data-explorer/discourse/models/query",["exports","discourse/models/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.extend({dirty:!1,params:{},results:null,_init:function(){this._super(),this.set("dirty",!1)}.on("init"),_initParams:function(){this.resetParams()}.on("init").observes("param_info"),markDirty:function(){this.set("dirty",!0)}.observes("name","description","sql"),markNotDirty:function(){this.set("dirty",!1)},hasParams:function(){return this.get("param_info.length")>0}.property("param_info"),resetParams:function(){var e={},t=this.get("params");(this.get("param_info")||[]).forEach(function(n){var s=n.identifier;t[n.identifier]?e[s]=t[s]:null!==n.default?e[s]=n.default:"boolean"===n.type?e[s]="false":e[s]=""}),this.set("params",e)},downloadUrl:function(){return Discourse.getURL("/admin/plugins/explorer/queries/"+this.get("id")+".json?export=1")}.property("id"),listName:function(){var e=this.get("name");return this.get("dirty")&&(e+=" (*)"),this.get("destroyed")&&(e+=" (deleted)"),e}.property("name","dirty","destroyed"),createProperties:function(){return this.get("sql")?this.updateProperties():this.getProperties("name")},updateProperties:function(){var e=this.getProperties(n.updatePropertyNames);return this.get("destroyed")&&(e.id=this.get("id")),e}});n.reopenClass({updatePropertyNames:["name","description","sql"]}),e.default=n}),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-container",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";function n(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var s,a,i;e.default=Ember.Component.extend((s=(0,t.observes)("hideSchema"),a=(0,t.observes)("everEditing"),i={_onHideSchema:function(){this.appEvents.trigger("ace:resize")},_onInsertEditor:function(){var e=this;Ember.run.schedule("afterRender",this,function(){return e._bindControls()})},_bindControls:function(){if("inDOM"===this._state){var e=this.$().find(".query-editor");if(e.length){var t=this.get("grippie");t&&(t.off("mousedown mousemove mouseup"),e.off("mousemove mouseup"));var n=e.find(".grippie"),s=e.find(".ace-wrapper,.grippie-target"),a=$("body"),i=this;this.set("grippie",n);var l=function(e){var t=i.get("startY")-e.screenY,n=i.get("startSize")-t;s.height(n),i.appEvents.trigger("ace:resize")},r=void 0;r=function(e){l(e),a.off("mousemove",l),a.off("mouseup",r),i.set("startY",null),i.set("startSize",null)},n.on("mousedown",function(e){i.set("startY",e.screenY),i.set("startSize",s.height()),a.on("mousemove",l),a.on("mouseup",r),e.preventDefault()})}}},didInsertElement:function(){this._super(),this._bindControls()},willDestroyElement:function(){this._super(),this.get("everEditing")&&(this.get("grippie").off("mousedown"),this.set("grippie",null))}},n(i,"_onHideSchema",[s],Object.getOwnPropertyDescriptor(i,"_onHideSchema"),i),n(i,"_onInsertEditor",[a],Object.getOwnPropertyDescriptor(i,"_onInsertEditor"),i),i))}),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema",["exports","discourse/lib/debounce"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({actions:{expandSchema:function(){this.set("hideSchema",!1)},collapseSchema:function(){this.set("hideSchema",!0)}},transformedSchema:function(){var e=this.get("schema");for(var t in e)e.hasOwnProperty(t)&&e[t].forEach(function(e){var t=[];e.primary&&t.push("primary key"),e.is_nullable&&t.push("null"),e.column_default&&t.push("default "+e.column_default),e.fkey_info&&t.push("fkey "+e.fkey_info),e.denormal&&t.push("denormal "+e.denormal);var n=t.join(", ");n&&(e.notes=n),(e.enum||e.column_desc)&&(e.havepopup=!0),e.havetypeinfo=!!(e.notes||e.enum||e.column_desc)});return e}.property("schema"),rfilter:function(){if(!Em.isBlank(this.get("filter")))return new RegExp(this.get("filter"))}.property("filter"),filterTables:function(e){var t=[],n=this.get("rfilter"),s=!!n;for(var a in e)e.hasOwnProperty(a)&&(s?n.source===a||n.source+"s"===a?t.unshift({name:a,columns:e[a],open:s}):n.test(a)?t.push({name:a,columns:e[a],open:s}):function(){var i=[];e[a].forEach(function(e){n.source===e.column_name?i.unshift(e):n.test(e.column_name)&&i.push(e)}),Em.isEmpty(i)||t.push({name:a,columns:i,open:s})}():t.push({name:a,columns:e[a],open:!1}));return t},triggerFilter:(0,t.default)(function(){this.set("filteredTables",this.filterTables(this.get("transformedSchema"))),this.set("loading",!1)},500).observes("filter"),setLoading:function(){this.set("loading",!0)}.observes("filter"),init:function(){this._super(),this.set("loading",!0),this.triggerFilter()}})}),define("discourse/plugins/discourse-data-explorer/discourse/components/json-file-uploader",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({fileInput:null,loading:!1,expectedRootObjectName:null,hover:0,classNames:["json-uploader"],_initialize:function(){var e=this.$(),t=this,n=e.find("#js-file-input");this.set("fileInput",n[0]),n.on("change",function(){t.fileSelected(this.files)}),e.on("dragover",function(e){return e.preventDefault&&e.preventDefault(),!1}),e.on("dragenter",function(e){return e.preventDefault&&e.preventDefault(),t.set("hover",t.get("hover")+1),!1}),e.on("dragleave",function(e){return e.preventDefault&&e.preventDefault(),t.set("hover",t.get("hover")-1),!1}),e.on("drop",function(e){return e.preventDefault&&e.preventDefault(),t.set("hover",0),t.fileSelected(e.dataTransfer.files),!1})}.on("didInsertElement"),accept:function(){return".json,application/json,application/x-javascript,text/json"+(this.get("extension")?","+this.get("extension"):"")}.property("extension"),setReady:function(){var e=void 0;try{e=JSON.parse(this.get("value"))}catch(e){return void this.set("ready",!1)}var t=e[this.get("expectedRootObjectName")];null!==t&&void 0!==t?this.set("ready",!0):this.set("ready",!1)}.observes("destination","expectedRootObjectName"),actions:{selectFile:function(){$(this.get("fileInput")).click()}},fileSelected:function(e){for(var t=this,n=[],s=0;s<e.length;s++)n[s]=e[s];var a=/\.(json|txt)$/;n=n.filter(function(e){return!!a.test(e.name)||"text/plain"===e.type});var i=e[0];this.set("loading",!0);var l=new FileReader;l.onload=function(e){t.set("value",e.target.result),t.set("loading",!1)},l.readAsText(i)}})}),define("discourse/plugins/discourse-data-explorer/discourse/components/param-field",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.TextField.extend({value:function(e,t){return arguments.length>1&&(this.get("params")[this.get("pname")]=t),this.get("params")[this.get("pname")]}.property("params","pname")})}),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema-enuminfo",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"ol",enuminfo:function(){var e=this.get("col.enum"),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({value:n,name:e[n]});return t}.property("col.enum")})}),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema-onetable",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNameBindings:[":schema-table","open"],tagName:"li",open:Em.computed.alias("table.open"),_bindClicks:function(){var e=this;this.$().find(".schema-table-name").click(function(t){e.set("open",!e.get("open")),t.preventDefault()})}.on("didInsertElement"),_cleanup:function(){this.$().find(".schema-table-name").off("click")}.on("willDestroyElement")})}),define("discourse/plugins/discourse-data-explorer/discourse/components/hljs-code-view",["exports","discourse/lib/debounce","discourse/lib/highlight-syntax","discourse-common/lib/buffered-render"],function(e,t,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend((0,s.bufferedRender)({buildBuffer:function(e){e.push("<pre><code class='"+this.get("codeClass")+"'>"),e.push(Handlebars.Utils.escapeExpression(this.get("value"))),e.push("</code></pre>")},_refreshHighlight:(0,t.default)(function(){this.rerenderBuffer()},50).observes("value"),_applyHighlight:function(){(0,n.default)(this.$())}.on("didInsertElement")}))}),define("discourse/plugins/discourse-data-explorer/discourse/components/query-result",["exports","discourse/lib/ajax","discourse/models/badge","discourse-common/lib/get-owner"],function(e,t,n,s){"use strict";function a(){return"xxxxxxxx".replace(/[xy]/g,function(){return(16*Math.random()|0).toString(16)})}function i(e,t){var n={};return e.forEach(function(e){n[e.id]=t?t.create(e):e}),n}Object.defineProperty(e,"__esModule",{value:!0});var l=Ember.Component.extend({layoutName:"explorer-query-result",rows:Em.computed.alias("content.rows"),columns:Em.computed.alias("content.columns"),params:Em.computed.alias("content.params"),explainText:Em.computed.alias("content.explain"),hasExplain:Em.computed.notEmpty("content.explain"),colCount:function(){return this.get("content.columns").length}.property("content.columns.length"),duration:function(){return I18n.t("explorer.run_time",{value:I18n.toNumber(this.get("content.duration"),{precision:1})})}.property("content.duration"),parameterAry:function(){var e=[],t=this.get("params");for(var n in t)t.hasOwnProperty(n)&&e.push({key:n,value:t[n]});return e}.property("params.@each"),columnDispNames:function(){return this.get("columns")?this.get("columns").map(function(e){if(e.endsWith("_id"))return e.slice(0,-3);var t=e.indexOf("$");return t>=0?e.substring(t+1):e}):[]}.property("content","columns.@each"),fallbackTemplate:function(){return(0,s.getOwner)(this).lookup("template:explorer/text.raw")}.property(),columnTemplates:function(){var e=this;return this.get("columns")?this.get("columns").map(function(t,n){var a="text";e.get("content.colrender")[n]&&(a=e.get("content.colrender")[n]);var i=(0,s.getOwner)(e).lookup("template:explorer/"+a+".raw");return i||(i=Discourse.RAW_TEMPLATES["javascripts/explorer/"+a]),{name:a,template:i}}):[]}.property("content","columns.@each"),transformedUserTable:function(){return i(this.get("content.relations.user"))}.property("content.relations.user"),transformedBadgeTable:function(){return i(this.get("content.relations.badge"),n.default)}.property("content.relations.badge"),transformedPostTable:function(){return i(this.get("content.relations.post"))}.property("content.relations.post"),transformedTopicTable:function(){return i(this.get("content.relations.topic"))}.property("content.relations.topic"),transformedGroupTable:function(){return i(this.get("site.groups"))}.property("site.groups"),lookupUser:function(e){return this.get("transformedUserTable")[e]},lookupBadge:function(e){return this.get("transformedBadgeTable")[e]},lookupPost:function(e){
return this.get("transformedPostTable")[e]},lookupTopic:function(e){return this.get("transformedTopicTable")[e]},lookupGroup:function(e){return this.get("transformedGroupTable")[e]},lookupCategory:function(e){return this.site.get("categoriesById")[e]},downloadResult:function(e){function n(e,t){var n=void 0;n=document.createElement("input"),n.setAttribute("name",e),n.setAttribute("value",t),i.appendChild(n)}var s=a();window.open("data:text/html;base64,"+btoa("<style>body{font-size:36px;display:flex;justify-content:center;align-items:center;}</style><body>Click anywhere to close this window once the download finishes.<script>window.onclick=function(){window.close()};<\/script>"),s);var i=document.createElement("form");i.setAttribute("id","query-download-result"),i.setAttribute("method","post"),i.setAttribute("action",Discourse.getURL("/admin/plugins/explorer/queries/"+this.get("query.id")+"/run."+e+"?download=1")),i.setAttribute("target",s),i.setAttribute("style","display:none;"),n("params",JSON.stringify(this.get("params"))),n("explain",this.get("hasExplain")),n("limit","1000000"),(0,t.ajax)("/session/csrf.json").then(function(e){n("authenticity_token",e.csrf),document.body.appendChild(i),i.submit(),Em.run.next("afterRender",function(){document.body.removeChild(i)})})},actions:{downloadResultJson:function(){this.downloadResult("json")},downloadResultCsv:function(){this.downloadResult("csv")}}});e.default=l}),define("discourse/plugins/discourse-data-explorer/discourse/components/query-row-content",["exports","discourse/helpers/category-link","discourse/lib/formatter","discourse-common/lib/buffered-render"],function(e,t,n,s){"use strict";function a(e,t){return e=Ember.get(t.contexts[0],e),Ember.isEmpty(e)?"":0===e.indexOf("fa-")?new Handlebars.SafeString("<i class='fa "+e+"'></i>"):new Handlebars.SafeString("<img src='"+e+"'>")}function i(e,n){var s=Ember.get(n.contexts[0],e);return(0,t.categoryLinkHTML)(s,{allowUncategorized:!0})}function l(e,t){var s=Ember.get(t.contexts[0],e);return new Handlebars.SafeString((0,n.autoUpdatingRelativeAge)(new Date(s),{title:!0}))}Object.defineProperty(e,"__esModule",{value:!0});var r=Handlebars.Utils.escapeExpression,o=Ember.Component.extend((0,s.bufferedRender)({tagName:"tr",buildBuffer:function(e){var t=this,n=this.get("row"),s=t.get("parentView"),o=this.get("fallbackTemplate"),c={"icon-or-image":a,"category-link":i,reltime:l},u=this.get("columnTemplates").map(function(e,t){var a=n[t],i=parseInt(a),l={value:a,id:i,baseuri:"/"===Discourse.BaseUri?"":Discourse.BaseUri},u={};if(null===n[t])return"NULL";if("text"===e.name)return r(n[t]);s["lookup"+e.name.capitalize()]&&(l[e.name]=s["lookup"+e.name.capitalize()](i)),"category"!==e.name&&"badge"!==e.name&&"reltime"!==e.name||(u.helpers=c);try{return new Handlebars.SafeString((e.template||o)(l,u))}catch(e){return console.error(e),"error"}});e.push("<td>"+u.join("</td><td>")+"</td>")}}));e.default=o}),define("discourse/plugins/discourse-data-explorer/discourse/components/param-input",["exports"],function(e){"use strict";function t(){try{var e=document.createElement("input");return e.attributes.type="time",e.attributes.type="date",!0}catch(e){return!1}}Object.defineProperty(e,"__esModule",{value:!0});var n=Discourse.Category,s={int:"int",bigint:"int",boolean:"boolean",string:"generic",time:"generic",date:"generic",datetime:"generic",double:"string",user_id:"user_id",post_id:"string",topic_id:"generic",category_id:"generic",group_id:"generic",badge_id:"generic",int_list:"generic",string_list:"generic",user_list:"user_list"};e.default=Ember.Component.extend({classNameBindings:["valid:valid:invalid",":param"],boolTypes:[{name:I18n.t("explorer.types.bool.true"),id:"Y"},{name:I18n.t("explorer.types.bool.false"),id:"N"},{name:I18n.t("explorer.types.bool.null_"),id:"#null"}],value:Ember.computed("params","info.identifier",{get:function(){return this.get("params")[this.get("info.identifier")]},set:function(e,t){return this.get("params")[this.get("info.identifier")]=t.toString(),t}}),valueBool:Ember.computed("params","info.identifier",{get:function(){return"false"!==this.get("params")[this.get("info.identifier")]},set:function(e,t){return t=!!t,this.get("params")[this.get("info.identifier")]=t.toString(),t}}),valid:function(){var e=this.get("info.type"),t=this.get("value");if(Em.isEmpty(this.get("value")))return this.get("info.nullable");var s=parseInt(t,10),a=!isNaN(s)&&s<2147483648&&s>-2147483649,i=/^\d+$/.test(t);switch(e){case"int":return/^-?\d+$/.test(t)&&a;case"bigint":return/^-?\d+$/.test(t)&&!isNaN(s);case"boolean":return/^Y|N|#null|true|false/.test(t);case"double":return!isNaN(parseFloat(t))||/^(-?)Inf(inity)?$/i.test(t)||/^(-?)NaN$/i.test(t);case"int_list":return t.split(",").every(function(e){return/^(-?\d+|null)$/.test(e.trim())});case"post_id":return i||/\d+\/\d+(\?u=.*)?$/.test(t);case"category_id":if(i||t===t.dasherize()||this.set("value",t.dasherize()),i)return!!this.site.categories.find(function(e){return e.get("id")===s});if(/\//.test(t)){var l=/(.*)\/(.*)/.exec(t);if(!l)return!1;return!!n.findBySlug(l[2].dasherize(),l[1].dasherize())}return!!n.findBySlug(t.dasherize());case"group_id":var r=this.site.get("groups");return i?!!r.find(function(e){return e.id===s}):!!r.find(function(e){return e.name===t})}return!0}.property("value","info.type","info.nullable"),layoutType:function(){var e=this.get("info.type");return"time"!==e&&"date"!==e||t()?s[e]?s[e]:"generic":"string"}.property("info.type"),layoutName:function(){return"admin/components/q-params/"+this.get("layoutType")}.property("layoutType")})}),define("discourse/plugins/discourse-data-explorer/discourse/controllers/import-query",["exports","discourse/mixins/modal-functionality","discourse/lib/ajax-error"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend(t.default,{notReady:Em.computed.not("ready"),adminPluginsExplorer:Ember.inject.controller(),ready:function(){var e=void 0;try{e=JSON.parse(this.get("queryFile"))}catch(e){return!1}return!!e.query}.property("queryFile"),actions:{doImport:function(){var e=this,t=JSON.parse(this.get("queryFile")).query;t.id=0,this.set("loading",!0),this.store.createRecord("query",t).save().then(function(t){e.send("closeModal"),e.set("loading",!1),e.get("adminPluginsExplorer").addCreatedRecord(t.target)}).catch(n.popupAjaxError)}}})}),define("discourse/plugins/discourse-data-explorer/discourse/controllers/admin-plugins-explorer",["exports","discourse/lib/show-modal","discourse/plugins/discourse-data-explorer/discourse/models/query","discourse/lib/ajax-error","discourse/lib/ajax"],function(e,t,n,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n.default.create({name:"No queries",fake:!0});e.default=Ember.Controller.extend({queryParams:{selectedQueryId:"id"},selectedQueryId:null,showResults:!1,hideSchema:!1,loading:!1,explain:!1,saveDisabled:Ember.computed.not("selectedItem.dirty"),runDisabled:Ember.computed.alias("selectedItem.dirty"),results:Em.computed.alias("selectedItem.results"),editing:!1,everEditing:!1,selectedItem:function(){var e=this.get("selectedQueryId"),t=parseInt(e);return this.get("content").find(function(e){return e.get("id")===t})||i}.property("selectedQueryId"),othersDirty:function(){var e=this.get("selectedItem");return!!this.get("content").find(function(t){return t!==e&&t.get("dirty")})}.property("selectedItem","selectedItem.dirty"),setEverEditing:function(){this.get("editing")&&!this.get("everEditing")&&this.set("everEditing",!0)}.observes("editing"),addCreatedRecord:function(e){this.get("model").pushObject(e),this.set("selectedQueryId",Ember.get(e,"id")),this.get("selectedItem").set("dirty",!1),this.set("showResults",!1),this.set("results",null),this.set("editing",!0)},save:function(){var e=this;return this.set("loading",!0),this.get("selectedItem").save().then(function(){e.get("selectedItem").markNotDirty(),e.set("editing",!1)}).catch(function(e){throw(0,s.popupAjaxError)(e),e}).finally(function(){e.set("loading",!1)})},actions:{dummy:function(){},importQuery:function(){(0,t.default)("import-query"),this.set("showCreate",!1)},showCreate:function(){this.set("showCreate",!0)},editName:function(){this.set("editing",!0)},download:function(){window.open(this.get("selectedItem.downloadUrl"),"_blank")},resetParams:function(){this.get("selectedItem").resetParams()},saveDefaults:function(){this.get("selectedItem").saveDefaults()},save:function(){this.save()},saverun:function(){var e=this;this.save().then(function(){return e.send("run")})},create:function(){var e=this;this.set("loading",!0),this.set("showCreate",!1),this.store.createRecord("query",{name:this.get("newQueryName")}).save().then(function(t){e.addCreatedRecord(t.target)}).catch(s.popupAjaxError).finally(function(){e.set("loading",!1)})},discard:function(){var e=this;this.set("loading",!0),this.store.find("query",this.get("selectedItem.id")).then(function(t){var s=e.get("selectedItem");s.setProperties(t.getProperties(n.default.updatePropertyNames)),s.markNotDirty(),e.set("editing",!1)}).catch(s.popupAjaxError).finally(function(){e.set("loading",!1)})},destroy:function(){var e=this,t=this.get("selectedItem");this.set("loading",!0),this.store.destroyRecord("query",t).then(function(){t.set("destroyed",!0)}).catch(s.popupAjaxError).finally(function(){e.set("loading",!1)})},recover:function(){var e=this,t=this.get("selectedItem");this.set("loading",!0),t.save().then(function(){t.set("destroyed",!1)}).catch(s.popupAjaxError).finally(function(){e.set("loading",!1)})},run:function(){var e=this;this.get("selectedItem.dirty")||this.get("runDisabled")||(this.set("loading",!0),this.set("showResults",!1),(0,a.ajax)("/admin/plugins/explorer/queries/"+this.get("selectedItem.id")+"/run",{type:"POST",data:{params:JSON.stringify(this.get("selectedItem.params")),explain:this.get("explain")}}).then(function(t){if(e.set("results",t),!t.success)return void e.set("showResults",!1);e.set("showResults",!0)}).catch(function(t){e.set("showResults",!1),t.jqXHR&&422===t.jqXHR.status&&t.jqXHR.responseJSON?e.set("results",t.jqXHR.responseJSON):(0,s.popupAjaxError)(t)}).finally(function(){e.set("loading",!1)}))}}})}),define("discourse/plugins/discourse-data-explorer/discourse/explorer-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"admin.adminPlugins",path:"/plugins",map:function(){this.route("explorer")}}}),define("discourse/plugins/discourse-data-explorer/discourse/initializers/initialize-data-explorer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"initialize-data-explorer",initialize:function(e){e.lookup("store:main").addPluralization("query","queries"),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();(void 0===t||t>n.length)&&(t=n.length),t-=e.length;var s=n.indexOf(e,t);return-1!==s&&s===t})}}}),define("discourse/plugins/discourse-data-explorer/discourse/routes/admin-plugins-explorer",["exports","discourse/lib/ajax"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({controllerName:"admin-plugins-explorer",model:function(){var e=this.store.findAll("query"),n=(0,t.ajax)("/admin/plugins/explorer/schema.json",{cache:!0});return e.then(function(e){return e.forEach(function(e){return e.markNotDirty()}),n.then(function(t){return{model:e,schema:t}})}).catch(function(){return n.catch(function(){}),{model:null,schema:null,disallow:!0}})},setupController:function(e,t){e.setProperties(t)}})}),function(e,t){function n(e){e.toggleClass("open")}var s=function(e){var t,n=e.createElement("details");if(!("open"in n))return!1;var s=e.body||function(){var n=e.documentElement;return t=!0,n.insertBefore(e.createElement("body"),n.firstElementChild||n.firstChild)}();n.innerHTML="<summary>a</summary>b",n.style.display="block",s.appendChild(n);var a=n.offsetHeight;return n.open=!0,a=a!==n.offsetHeight,s.removeChild(n),t&&s.parentNode.removeChild(s),a}(e);t.fn.details=function(){return s?this:this.each(function(){var e=t(this),s=t("summary",e).first();s.prop("tabIndex",0),s.on("keydown",function(t){if(32===t.keyCode||13===t.keyCode)return n(e),!1}),s.on("click",function(){s.focus(),n(e)})})}}(document,jQuery),define("discourse/plugins/discourse-details/lib/discourse-markdown/details",["exports"],function(e){"use strict";function t(e){e.whiteList(["summary","summary[title]","details","details[open]","details.elided"]),e.registerPlugin(function(e){e.block.bbcode.ruler.push("details",n)})}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=t;var n={tag:"details",before:function(e,t){var n=t.attrs;e.push("bbcode_open","details",1),e.push("bbcode_open","summary",1),e.push("text","",0).content=n._default||"",e.push("bbcode_close","summary",-1)},after:function(e){e.push("bbcode_close","details",-1)}}}),define("discourse/plugins/discourse-details/initializers/apply-details",["exports","discourse/lib/plugin-api"],function(e,t){"use strict";function n(e){e.decorateCooked(function(e){return $("details",e).details()}),e.addToolbarPopupMenuOptionsCallback(function(){return{action:"insertDetails",icon:"caret-right",label:"details.title"}}),e.modifyClass("controller:composer",{actions:{insertDetails:function(){this.get("toolbarEvent").applySurround('\n[details="'+I18n.t("composer.details_title")+'"]\n',"\n[/details]\n","details_text",{multiline:!1})}}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"apply-details",initialize:function(){(0,t.withPluginApi)("0.8.7",n)}}}),define("discourse/plugins/discourse-math/lib/discourse-markdown/discourse-math",["exports"],function(e){"use strict";function t(e,t){return 36!==e&&(!!t.utils.isWhiteSpace(e)||(!!t.utils.isMdAsciiPunct(e)||!!t.utils.isPunctChar(e)))}function n(e,n){var s=e.pos,a=e.posMax;if(n||36!==e.src.charCodeAt(s)||a<s+2)return!1;if(36===e.src.charCodeAt(s+1))return!1;if(s>0){if(!t(e.src.charCodeAt(s-1),e.md))return!1}for(var i=void 0,l=s+1;l<a;l++){if(36===e.src.charCodeAt(l)&&92!==e.src.charCodeAt(l-1)){i=l;break}}if(!i)return!1;if(i+1<=a){var r=e.src.charCodeAt(i+1);if(r&&!t(r,e.md))return!1}var o=e.src.slice(s+1,i),c=e.push("html_raw","",0),u=e.md.utils.escapeHtml(o);return c.content="<span class='math'>"+u+"</span>",e.pos=i+1,!0}function s(e,t,n,s){if(36!==e.src.charCodeAt(t))return!1;if(t++,36!==e.src.charCodeAt(t))return!1;t++;for(var a=t;a<n;a++)if(!s.utils.isSpace(e.src.charCodeAt(a)))return!1;return!0}function a(e,t,n,a){if(!s(e,e.bMarks[t]+e.tShift[t],e.eMarks[t],e.md))return!1;if(a)return!0;for(var i=t,l=!1;!(++i>=n);)if(s(e,e.bMarks[i]+e.tShift[i],e.eMarks[i],e.md)){l=!0;break}var r=e.push("html_raw","",0),o=l?e.eMarks[i-1]:e.eMarks[i],c=e.src.slice(e.bMarks[t+1]+e.tShift[t+1],o),u=e.md.utils.escapeHtml(c);return r.content="<div class='math'>\n"+u+"\n</div>\n",e.line=l?i+1:i,!0}function i(e){e.markdownIt&&(e.registerOptions(function(e,t){e.features.math=t.discourse_math_enabled}),e.registerPlugin(function(e){e.inline.ruler.after("escape","math",n),e.block.ruler.after("code","math",a,{alt:["paragraph","reference","blockquote","list"]})}))}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=i}),define("discourse/plugins/discourse-math/initializers/discourse-math",["exports","discourse/lib/plugin-api","discourse/lib/load-script"],function(e,t,n){"use strict";function s(){if(!o){var e=["toMathML.js","Safe.js"];u&&e.push("[a11y]/accessibility-menu.js");var t={jax:["input/TeX","input/AsciiMath","input/MathML","output/CommonHTML"],TeX:{extensions:["AMSmath.js","AMSsymbols.js","autoload-all.js"]},extensions:e,showProcessingMessages:!1,root:"/plugins/discourse-math/mathjax"};c&&(t.menuSettings={zoom:"Hover"},t.MathEvents={hover:750}),window.MathJax=t,o=!0}}function a(){return s(),(0,n.default)("/plugins/discourse-math/mathjax/MathJax.1.7.1.js")}function i(e,t){var n=$(e);if(!n.data("applied-mathjax")){n.data("applied-mathjax",!0);var s="DIV"===e.tagName?"div":"span",a="div"===s?"; mode=display":"",i=$("<"+s+' style="display: none;"><script type="math/tex'+a+'"><\/script></'+s+">"),l=i.children();l.html(n.text()),n.after(i),Em.run.later(this,function(){window.MathJax.Hub.Queue(function(){e.parentElement&&null!==e.parentElement.offsetParent&&window.MathJax.Hub.Typeset(l[0],function(){n.remove(),i.show()})})},t?200:0)}}function l(e){if(e&&e.find){var t=e.find(".math");if(t.length>0){var n=e.hasClass("d-editor-preview");a().then(function(){t.each(function(e,t){return i(t,n)})})}}}function r(e){e.decorateCooked(l)}Object.defineProperty(e,"__esModule",{value:!0});var o=!1,c=void 0,u=void 0;e.default={name:"apply-math",initialize:function(e){var n=e.lookup("site-settings:main");c=n.discourse_math_zoom_on_hover,u=n.discourse_math_enable_accessibility,n.discourse_math_enabled&&(0,t.withPluginApi)("0.5",r)}}}),define("discourse/plugins/discourse-narrative-bot/initializers/new-user-narrative",["exports","discourse/lib/plugin-api"],function(e,t){"use strict";function n(e){var t=e.container.lookup("message-bus:main"),n=e.getCurrentUser(),s=e.container.lookup("app-events:main");e.modifyClass("component:site-header",{didInsertElement:function(){this._super(),this.dispatch("header:search-context-trigger","header")}}),e.attachWidgetAction("header","headerSearchContextTrigger",function(){this.site.mobileView?this.state.skipSearchContext=!1:(this.state.contextEnabled=!0,this.state.searchContextType="topic")}),t&&n&&t.subscribe("/new_user_narrative/tutorial_search",function(){s.trigger("header:search-context-trigger")})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"new-user-narratve",initialize:function(e){e.lookup("site-settings:main").discourse_narrative_bot_enabled&&(0,t.withPluginApi)("0.8.7",n)}}}),define("discourse/plugins/discourse-presence/discourse/templates/connectors/topic-above-footer-buttons/presence",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){return t.siteSettings.presence_enabled}}}),Ember.TEMPLATES["javascripts/connectors/topic-above-footer-buttons/presence"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["topic-presence-display"],null,[["topicId"],[[28,["model","id"]]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/topic-above-footer-buttons/presence"}}),define("discourse/plugins/discourse-presence/discourse/templates/connectors/composer-fields/presence",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){return t.siteSettings.presence_enabled}}}),Ember.TEMPLATES["javascripts/connectors/composer-fields/presence"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["composer-presence-display"],null,[["action","post","topic","reply","title"],[[28,["model","action"]],[28,["model","post"]],[28,["model","topic"]],[28,["model","reply"]],[28,["model","title"]]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/composer-fields/presence"}}),Ember.TEMPLATES["javascripts/components/composer-presence-display"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["shouldDisplay"]]],null,{"statements":[[0,"  "],[11,"div",[]],[15,"class","presence-users"],[13],[0,"\\n    "],[11,"div",[]],[15,"class","presence-avatars"],[13],[0,"\\n"],[6,["each"],[[28,["users"]]],null,{"statements":[[0,"        "],[1,[33,["avatar"],[[28,["user"]]],[["avatarTemplatePath","usernamePath","imageSize"],["avatar_template","username","small"]]],false],[0,"\\n"]],"locals":["user"]},null],[0,"    "],[14],[0,"\\n    "],[11,"span",[]],[15,"class","presence-text"],[13],[0,"\\n      "],[11,"span",[]],[15,"class","description"],[13],[0,"\\n"],[6,["if"],[[28,["isReply"]]],null,{"statements":[[1,[33,["i18n"],["presence.replying"],null],false]],"locals":[]},{"statements":[[1,[33,["i18n"],["presence.editing"],null],false]],"locals":[]}],[14],[14],[11,"span",[]],[15,"class","wave"],[13],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/composer-presence-display"}}),Ember.TEMPLATES["javascripts/components/topic-presence-display"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["shouldDisplay"]]],null,{"statements":[[0,"  "],[11,"div",[]],[15,"class","presence-users"],[13],[0,"\\n    "],[11,"div",[]],[15,"class","presence-avatars"],[13],[0,"\\n"],[6,["each"],[[28,["users"]]],null,{"statements":[[0,"        "],[1,[33,["avatar"],[[28,["user"]]],[["avatarTemplatePath","usernamePath","imageSize"],["avatar_template","username","small"]]],false],[0,"\\n"]],"locals":["user"]},null],[0,"    "],[14],[0,"\\n    "],[11,"span",[]],[15,"class","presence-text"],[13],[0,"\\n      "],[11,"span",[]],[15,"class","description"],[13],[1,[33,["i18n"],["presence.replying_to_topic"],[["count"],[[28,["users","length"]]]]],false],[14],[11,"span",[]],[15,"class","wave"],[13],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/topic-presence-display"}}),define("discourse/plugins/discourse-presence/discourse/components/composer-presence-display",["exports","discourse/lib/ajax","ember-addons/ember-computed-decorators"],function(e,t,n){"use strict";function s(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=e.keepAliveDuration=void 0;var a,i,l,r,o,c,u,d=e.keepAliveDuration=1e4,p=e.bufferTime=3e3;e.default=Ember.Component.extend((a=(0,n.on)("didInsertElement"),i=(0,n.observes)("action","post.id","topic.id"),l=(0,n.observes)("reply","title"),r=(0,n.on)("willDestroyElement"),o=(0,n.observes)("currentState"),c=(0,n.default)("presenceUsers","currentUser.id"),u={composer:Ember.inject.controller(),action:null,post:null,topic:null,reply:null,title:null,previousState:null,currentState:null,presenceUsers:null,channel:null,composerOpened:function(){this._lastPublish=new Date,Ember.run.once(this,"updateState")},composerStateChanged:function(){Ember.run.once(this,"updateState")},typing:function(){new Date-this._lastPublish>d&&this.publish({current:this.get("currentState")})},composerClosing:function(){this.publish({previous:this.get("currentState")}),Ember.run.cancel(this._pingTimer),Ember.run.cancel(this._clearTimer)},updateState:function(){var e=null,t=this.get("action");"reply"!==t&&"edit"!==t||(e={action:t},"reply"===t&&(e.topic_id=this.get("topic.id")),"edit"===t&&(e.post_id=this.get("post.id"))),this.set("previousState",this.get("currentState")),this.set("currentState",e)},currentStateChanged:function(){var e=this;this.get("channel")&&(this.messageBus.unsubscribe(this.get("channel")),this.set("channel",null)),this.clear(),["reply","edit"].includes(this.get("action"))&&this.publish({response_needed:!0,previous:this.get("previousState"),current:this.get("currentState")}).then(function(t){e.get("isDestroyed")||(e.set("presenceUsers",t.users),e.set("channel",t.messagebus_channel),e.messageBus.subscribe(t.messagebus_channel,function(t){e.get("isDestroyed")||e.set("presenceUsers",t.users),e._clearTimer=Ember.run.debounce(e,"clear",d+p)},t.messagebus_id))})},clear:function(){this.get("isDestroyed")||this.set("presenceUsers",[])},publish:function(e){return this._lastPublish=new Date,(0,t.ajax)("/presence/publish",{type:"POST",data:e})},users:function(e,t){return(e||[]).filter(function(e){return e.id!==t})},isReply:Ember.computed.equal("action","reply"),shouldDisplay:Ember.computed.gt("users.length",0)},s(u,"composerOpened",[a],Object.getOwnPropertyDescriptor(u,"composerOpened"),u),s(u,"composerStateChanged",[i],Object.getOwnPropertyDescriptor(u,"composerStateChanged"),u),s(u,"typing",[l],Object.getOwnPropertyDescriptor(u,"typing"),u),s(u,"composerClosing",[r],Object.getOwnPropertyDescriptor(u,"composerClosing"),u),s(u,"currentStateChanged",[o],Object.getOwnPropertyDescriptor(u,"currentStateChanged"),u),s(u,"users",[c],Object.getOwnPropertyDescriptor(u,"users"),u),u))}),define("discourse/plugins/discourse-presence/discourse/components/topic-presence-display",["exports","ember-addons/ember-computed-decorators","discourse/plugins/discourse-presence/discourse/components/composer-presence-display"],function(e,t,n){"use strict";function s(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var a,i,l,r,o;e.default=Ember.Component.extend((a=(0,t.on)("didInsertElement"),i=(0,t.on)("willDestroyElement"),l=(0,t.default)("topicId"),r=(0,t.default)("presenceUsers","currentUser.id"),o={topicId:null,presenceUsers:null,clear:function(){this.get("isDestroyed")||this.set("presenceUsers",[])},_inserted:function(){var e=this;this.clear(),this.messageBus.subscribe(this.get("channel"),function(t){e.get("isDestroyed")||e.set("presenceUsers",t.users),e._clearTimer=Ember.run.debounce(e,"clear",n.keepAliveDuration+n.bufferTime)},-2)},_destroyed:function(){Ember.run.cancel(this._clearTimer),this.messageBus.unsubscribe(this.get("channel"))},channel:function(e){return"/presence/topic/"+e},users:function(e,t){return(e||[]).filter(function(e){return e.id!==t})},shouldDisplay:Ember.computed.gt("users.length",0)},s(o,"_inserted",[a],Object.getOwnPropertyDescriptor(o,"_inserted"),o),s(o,"_destroyed",[i],Object.getOwnPropertyDescriptor(o,"_destroyed"),o),s(o,"channel",[l],Object.getOwnPropertyDescriptor(o,"channel"),o),s(o,"users",[r],Object.getOwnPropertyDescriptor(o,"users"),o),o))}),define("discourse/plugins/discourse-solved/discourse/solved-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"user.userActivity",map:function(){this.route("solved")}}}),Ember.TEMPLATES["javascripts/discourse/connectors/user-activity-bottom/solved-list"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["link-to"],["userActivity.solved"],null,{"statements":[[0,"  "],[11,"i",[]],[15,"class","glyph fa fa-check-square"],[13],[14],[1,[33,["i18n"],["solved.title"],null],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse/connectors/user-activity-bottom/solved-list"}}),Ember.TEMPLATES["javascripts/discourse/connectors/topic-after-cooked/solved-panel"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["topic","accepted_answer"]]],null,{"statements":[[11,"p",[]],[15,"class","solved"],[13],[0,"\\n"],[1,[28,["topic","acceptedAnswerHtml"]],true],[0,"\\n"],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse/connectors/topic-after-cooked/solved-panel"}}),Ember.TEMPLATES["javascripts/discourse/connectors/user-summary-stat/solved-count"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["link-to"],["userActivity.solved"],null,{"statements":[[0,"  "],[1,[33,["user-stat"],null,[["value","label"],[[28,["model","solved_count"]],"solved.solution_summary"]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse/connectors/user-summary-stat/solved-count"}}),Ember.TEMPLATES["javascripts/discourse/connectors/category-custom-settings/solved-settings"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["unless"],[[28,["siteSettings","allow_solved_on_all_topics"]]],null,{"statements":[[11,"section",[]],[15,"class","field"],[13],[0,"\\n  "],[11,"div",[]],[15,"class","enable-accepted-answer"],[13],[0,"\\n    "],[11,"label",[]],[15,"class","checkbox-label"],[13],[0,"\\n      "],[1,[33,["input"],null,[["type","checked"],["checkbox",[28,["category","enable_accepted_answers"]]]]],false],[0,"\\n      "],[1,[33,["i18n"],["solved.allow_accepted_answers"],null],false],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/discourse/connectors/category-custom-settings/solved-settings"}}),define("discourse/plugins/discourse-solved/discourse/pre-initializers/extend-category-for-solved",["exports","ember-addons/ember-computed-decorators","discourse/models/category"],function(e,t,n){"use strict";function s(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-category-for-solved",before:"inject-discourse-objects",initialize:function(){var e,a,i;n.default.reopen((e=(0,t.default)("custom_fields.enable_accepted_answers"),a={enable_accepted_answers:{get:function(e){return"true"===e},set:function(e){return e=e?"true":"false",this.set("custom_fields.enable_accepted_answers",e),e}}},s(a,"enable_accepted_answers",[e],(i=Object.getOwnPropertyDescriptor(a,"enable_accepted_answers"),i=i?i.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return i}}),a),a))}}}),define("discourse/plugins/discourse-solved/discourse/initializers/extend-for-solved-button",["exports","discourse/models/topic","discourse/models/user","discourse/raw-views/topic-status","discourse/lib/ajax-error","discourse/lib/plugin-api","discourse/lib/ajax","discourse/widgets/post-cooked"],function(e,t,n,s,a,i,l,r){"use strict";function o(e){e.get("postStream.posts").forEach(function(e){e.get("post_number")>1&&(e.set("accepted_answer",!1),e.set("can_accept_answer",!0),e.set("can_unaccept_answer",!1))})}function c(e){if(e.get("can_unaccept_answer")){var t=e.topic;e.setProperties({can_accept_answer:!0,can_unaccept_answer:!1,accepted_answer:!1}),t.set("accepted_answer",void 0),(0,l.ajax)("/solution/unaccept",{type:"POST",data:{id:e.get("id")}}).catch(a.popupAjaxError)}}function u(e){var t=e.topic;o(t),e.setProperties({can_unaccept_answer:!0,can_accept_answer:!1,accepted_answer:!0}),t.set("accepted_answer",{username:e.get("username"),post_number:e.get("post_number"),excerpt:e.get("cooked")}),(0,l.ajax)("/solution/accept",{type:"POST",data:{id:e.get("id")}}).catch(a.popupAjaxError)}function d(e){var t=e.getCurrentUser();e.includePostAttributes("can_accept_answer","can_unaccept_answer","accepted_answer"),e.addDiscoveryQueryParam&&e.addDiscoveryQueryParam("solved",{replace:!0,refreshModel:!0}),e.addPostMenuButton("solved",function(e){
var n=e.can_accept_answer,s=e.can_unaccept_answer,a=e.accepted_answer,i=t&&t.id===e.topicCreatedById,l=a||!n||i?"first":"second-last-hidden";if(n)return{action:"acceptAnswer",icon:"check-square-o",className:"unaccepted",title:"solved.accept_answer",position:l};if(s||a){return{action:"unacceptAnswer",icon:"check-square",title:s?"solved.unaccept_answer":"solved.accepted_answer",className:"accepted fade-out",position:l,beforeButton:function(e){return e("span.accepted-text",I18n.t("solved.solution"))}}}}),e.decorateWidget("post-contents:after-cooked",function(e){if(1===e.attrs.post_number){var t=e.getModel();if(t){var n=t.get("topic");if(n.get("accepted_answer")){var s=!!n.get("accepted_answer").excerpt,a="\n            <aside class='quote' data-post=\""+n.get("accepted_answer").post_number+'" data-topic="'+n.get("id")+"\">\n              <div class='title'>\n                "+n.get("acceptedAnswerHtml")+' <div class="quote-controls"></div>\n              </div>\n              <blockquote>\n                '+n.get("accepted_answer").excerpt+"\n              </blockquote>\n            </aside>",i="\n            <aside class='quote'>\n              <div class='title title-only'>\n                "+n.get("acceptedAnswerHtml")+"\n              </div>\n            </aside>",l=new r.default({cooked:s?a:i}),o=l.init();return e.rawHtml(o)}}}}),e.attachWidgetAction("post","acceptAnswer",function(){var e=this,t=this.model,n=t.get("topic.postStream.posts").filter(function(e){return 1===e.get("post_number")||e.get("accepted_answer")});u(t),n.forEach(function(t){return e.appEvents.trigger("post-stream:refresh",{id:t.id})})}),e.attachWidgetAction("post","unacceptAnswer",function(){var e=this.model,t=e.get("topic.postStream.posts").find(function(e){return 1===e.get("post_number")});c(e),this.appEvents.trigger("post-stream:refresh",{id:t.get("id")})}),e.registerConnectorClass&&(e.registerConnectorClass("user-activity-bottom","solved-list",{shouldRender:function(e,t){return t.siteSettings.solved_enabled}}),e.registerConnectorClass("user-summary-stat","solved-count",{shouldRender:function(e,t){return t.siteSettings.solved_enabled&&e.model.solved_count>0},setupComponent:function(){this.set("classNames",["linked-stat"])}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-for-solved-button",initialize:function(){t.default.reopen({acceptedAnswerHtml:function(){var e=this.get("accepted_answer.username"),t=this.get("accepted_answer.post_number");return e&&t?I18n.t("solved.accepted_html",{username_lower:e.toLowerCase(),username:e,post_path:this.get("url")+"/"+t,post_number:t,user_path:n.default.create({username:e}).get("path")}):""}.property("accepted_answer","id")}),s.default.reopen({statuses:function(){var e=this._super();return this.topic.has_accepted_answer?e.push({openTag:"span",closeTag:"span",title:I18n.t("solved.has_accepted_answer"),icon:"check-square-o"}):this.topic.can_have_answer&&this.siteSettings.solved_enabled&&this.siteSettings.empty_box_on_unsolved&&e.push({openTag:"span",closeTag:"span",title:I18n.t("solved.has_no_accepted_answer"),icon:"square-o"}),e}.property()}),(0,i.withPluginApi)("0.1",d),(0,i.withPluginApi)("0.8.10",function(e){e.replaceIcon("notification.solved.accepted_notification","check-square")})}}}),define("discourse/plugins/discourse-solved/discourse/routes/user-activity-solved",["exports","discourse/routes/user-activity-stream"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({userActionType:15,noContentHelpKey:"solved.no_solutions"})}),function(e){function t(t){e("div.lazyYT",t).each(function(){e(this).replaceWith("<p>https://youtube.com/watch?v="+e(this).data("youtube-id")+"</p>")})}function n(e,t){var n="gray 0 0 "+t+"px",s="-webkit-user-select";i&&(n=t<=0?"0 0 0 0 gray":"0 0 "+t+"px .1px gray",s="-ms-user-select"),l&&(s="-moz-user-select"),e.css("background-color","transparent").css("color","rgba(0,0,0,0)").css("text-shadow",n).css(s,"none")}function s(t,n){e("a,pre",t).each(function(t,s){var a=n>0?"blur("+n+"px)":"";i?e(s).css("-ms-filter","progid:DXImageTransform.Microsoft.Blur(pixelradius="+n+")"):e(s).css("filter",a).css("-webkit-filter",a)})}function a(t,n){e("img",t).each(function(t,s){var a=e(this).hasClass("emoji"),i=function(){var t=a?20:s.width,i=a?20:s.height,l=++r,o="<svg data-spoiler-id='"+l+"' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+t+"' height='"+i+"'><defs><filter id='blur-"+l+"'><feGaussianBlur id='gaussian-"+l+"' stdDeviation='"+n+"'></feGaussianBlur></filter></defs><image xlink:href='"+s.src+"' filter='url(#blur-"+l+")' style='filter: url(#blur-"+l+")' width='"+t+"' height='"+i+"'></image></svg>";e(s).replaceWith(o)};0===s.naturalWidth||0===s.naturalHeight?s.onload=i:i()}),e("svg",t).each(function(e,t){var s=t.getAttribute("data-spoiler-id"),a=t.getElementById("gaussian-"+s);a&&a.setAttribute("stdDeviation",n)})}var i=document.documentMode,l="undefined"!=typeof InstallTrigger,r=0,o={max:{text:10,link:10,image:20},partial:{text:5,link:5,image:6},none:{text:0,link:0,image:0}},c=function(e,i){t(e),n(e,i.text),s(e,i.link),a(e,i.image)},u=function(e,t){var n=t.max,s=t.partial,a=t.none;e.data("spoiler-state","blurred"),c(e,n),e.on("mouseover",function(){e.css("cursor","pointer"),"blurred"===e.data("spoiler-state")&&c(e,s)}).on("mouseout",function(){"blurred"===e.data("spoiler-state")&&c(e,n)}).on("click",function(t){"blurred"===e.data("spoiler-state")?(e.data("spoiler-state","revealed").css("cursor","auto"),c(e,a)):(e.data("spoiler-state","blurred").css("cursor","pointer"),c(e,s)),t.preventDefault()})};e.fn.spoil=function(t){var n=e.extend(o,t||{});return this.each(function(){u(e(this),n)})}}(jQuery),define("discourse/plugins/Spoiler Alert!/lib/discourse-markdown/spoiler-alert",["exports","pretty-text/pretty-text"],function(e,t){"use strict";function n(e,t){var n=l.test(t)?"div":"span";return"<"+n+" class='spoiler'>"+t+"</"+n+">"}function s(e){for(e=e||"";e!==(e=e.replace(/\[spoiler\]((?:(?!\[spoiler\]|\[\/spoiler\])[\S\s])*)\[\/spoiler\]/gi,n)););return e}function a(e){e.registerOptions(function(e,t){e.features["spoiler-alert"]=!!t.spoiler_enabled}),e.registerPlugin(function(e){e.inline.bbcode.ruler.push("spoiler",{tag:"spoiler",wrap:"span.spoiler"}),e.block.bbcode.ruler.push("spoiler",{tag:"spoiler",wrap:"div.spoiler"})})}function i(e){e.whiteList(["span.spoiler","div.spoiler"]),e.markdownIt?a(e):e.addPreProcessor(s)}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=i,(0,t.registerOption)(function(e,t){t.features["spoiler-alert"]=!!e.spoiler_enabled});var l=/\n|<img|!\[[^\]]*\][(\[]/}),define("discourse/plugins/Spoiler Alert!/initializers/spoiler-alert",["exports","discourse/lib/plugin-api","discourse/controllers/composer"],function(e,t,n){"use strict";function s(e){$(".spoiler",e).removeClass("spoiler").addClass("spoiled").spoil()}function a(e){e.decorateCooked(s),e.addToolbarPopupMenuOptionsCallback(function(){return{action:"insertSpoiler",icon:"magic",label:"spoiler.title"}}),n.default.reopen({actions:{insertSpoiler:function(){this.get("toolbarEvent").applySurround("[spoiler]","[/spoiler]","spoiler_text",{multiline:!1})}}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"apply-spoilers",initialize:function(e){e.lookup("site-settings:main").spoiler_enabled&&(0,t.withPluginApi)("0.5",a,{noApi:function(){return(0,t.decorateCooked)(e,s)}})}}}),Ember.TEMPLATES["javascripts/modal/admin-enable-ssl"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["canEnableSsl"]]],null,{"statements":[[6,["d-modal-body"],null,[["class","rawTitle"],["hosted-enable-ssl","Enable SSL"]],{"statements":[[0,"    "],[11,"p",[]],[13],[0,"SSL is now free for all hosted Discourse customers!"],[14],[0,"\\n\\n    "],[11,"ul",[]],[13],[0,"\\n      "],[11,"li",[]],[13],[0,"SSL certificate provided by "],[11,"a",[]],[15,"href","https://letsencrypt.org/"],[13],[0,"Let\'s Encrypt"],[14],[0,"."],[14],[0,"\\n      "],[11,"li",[]],[13],[0,"We take care of the details behind the scenes."],[14],[0,"\\n      "],[11,"li",[]],[13],[0,"We\'ll check the configuration of your site before forcing SSL."],[14],[0,"\\n    "],[14],[0,"\\n"]],"locals":[]},null],[6,["unless"],[[28,["loading"]]],null,{"statements":[[0,"    "],[11,"div",[]],[15,"class","modal-footer hosted-enable-ssl"],[13],[0,"\\n      "],[11,"button",[]],[15,"class","btn btn-primary"],[5,["action"],[[28,[null]],"enableSSL"]],[13],[0,"OK, Enable SSL"],[14],[0,"\\n        \\n      "],[11,"a",[]],[5,["action"],[[28,[null]],"closeModal"]],[13],[0,"no thanks"],[14],[0,"\\n    "],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"    "],[11,"div",[]],[15,"class","modal-footer hosted-enable-ssl"],[13],[0,"\\n      "],[11,"em",[]],[13],[0,"Please wait..."],[14],[0,"\\n    "],[14],[0,"\\n"]],"locals":[]}]],"locals":[]},{"statements":[[6,["d-modal-body"],null,[["class","rawTitle"],["hosted-enable-ssl","Enable SSL"]],{"statements":[[0,"    "],[11,"p",[]],[13],[0,"\\n      Your site is currently on a temporary domain at "],[11,"b",[]],[13],[0,"trydiscourse.com"],[14],[0,".\\n      To enable HTTPS, your site must be on a domain name that you own and control.\\n      "],[11,"a",[]],[16,"href",[34,[[26,["dnsInstructionsUrl"]]]]],[15,"target","_blank"],[13],[0,"Follow these instructions to move to your own domain."],[14],[0,"\\n    "],[14],[0,"\\n    "],[11,"p",[]],[13],[0,"\\n      Please contact us at "],[11,"a",[]],[15,"href","mailto:team@discourse.org"],[13],[0,"team@discourse.org"],[14],[0," to change your domain name.\\n    "],[14],[0,"\\n"]],"locals":[]},null],[0,"  "],[11,"div",[]],[15,"class","modal-footer hosted-enable-ssl"],[13],[0,"\\n    "],[11,"button",[]],[15,"class","btn btn-primary"],[5,["action"],[[28,[null]],"closeModal"]],[13],[0,"OK"],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]}]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/modal/admin-enable-ssl"}}),Ember.TEMPLATES["javascripts/modal/admin-billing-email"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["class","rawTitle"],["hosted-billing-email","Change Billing Email Address"]],{"statements":[[0,"  "],[11,"p",[]],[13],[0,"Set the email address where future receipts will be sent."],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n  "],[1,[33,["text-field"],null,[["value","placeholderKey","id","autocorrect","autocapitalize","type"],[[28,["billingEmail"]],"topic.invite_reply.email_placeholder","hosted-billing-email-input","off","off","email"]]],false],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null],[11,"div",[]],[15,"class","modal-footer hosted-billing-email"],[13],[0,"\\n  "],[11,"button",[]],[15,"class","btn btn-primary"],[5,["action"],[[28,[null]],"save"]],[13],[0,"Save"],[14],[0,"\\n    \\n  "],[11,"a",[]],[5,["action"],[[28,[null]],"closeModal"]],[13],[0,"cancel"],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/modal/admin-billing-email"}}),Ember.TEMPLATES["javascripts/modal/admin-send-receipt"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["rawTitle","class"],["Send Receipt","hosted-send-receipt"]],{"statements":[[0,"  "],[11,"p",[]],[13],[0,"\\n    Do you want your last receipt to be emailed to the current billing email address?\\n    "],[11,"pre",[]],[13],[1,[26,["billingEmailAddress"]],false],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null],[11,"div",[]],[15,"class","modal-footer hosted-send-receipt"],[13],[0,"\\n  "],[11,"button",[]],[15,"class","btn btn-primary"],[5,["action"],[[28,[null]],"sendReceipt"]],[13],[0,"Yes"],[14],[0,"\\n    \\n  "],[11,"a",[]],[5,["action"],[[28,[null]],"closeModal"]],[13],[0,"Cancel"],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/modal/admin-send-receipt"}}),define("discourse/plugins/hosted-site/discourse/initializers/anon-init",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";function n(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"apply-anon-init",initialize:function(e){var s=e.lookupFactory("component:global-notice");if(s){var a,i;s.reopen((a=(0,t.on)("didInsertElement"),i={_hideOtherAlerts:function(){Em.run.schedule("afterRender",function(){($(".alert .trial-expired-message").size()>0||$(".alert .discourse-hosting-readonly").size()>0)&&($(".alert-read-only").hide(),$(".alert-too-few-topics").hide())})}},n(i,"_hideOtherAlerts",[a],Object.getOwnPropertyDescriptor(i,"_hideOtherAlerts"),i),i))}}}}),function(e){"use strict";function t(e,t){var n,s,a,i=e.data("width"),l=e.data("height"),r=e.data("ratio")?e.data("ratio"):t.default_ratio,o=e.data("youtube-id"),c=e.data("youtube-title"),u=[],d=e.data("parameters")||"";r=r.split(":"),"number"==typeof i&&"number"==typeof l?(e.width(i),n=l+"px"):"number"==typeof i?(e.width(i),n=i*r[1]/r[0]+"px"):(i=e.width(),0===i&&(i=e.parent().width()),n=r[1]/r[0]*100+"%"),u.push('<div class="ytp-thumbnail">'),u.push('<div class="ytp-large-play-button"'),i<=640&&u.push(' style="transform: scale(0.563888888888889);"'),u.push(">"),u.push("<svg>"),u.push('<path fill-rule="evenodd" clip-rule="evenodd" fill="#1F1F1F" class="ytp-large-play-button-svg" d="M84.15,26.4v6.35c0,2.833-0.15,5.967-0.45,9.4c-0.133,1.7-0.267,3.117-0.4,4.25l-0.15,0.95c-0.167,0.767-0.367,1.517-0.6,2.25c-0.667,2.367-1.533,4.083-2.6,5.15c-1.367,1.4-2.967,2.383-4.8,2.95c-0.633,0.2-1.316,0.333-2.05,0.4c-0.767,0.1-1.3,0.167-1.6,0.2c-4.9,0.367-11.283,0.617-19.15,0.75c-2.434,0.034-4.883,0.067-7.35,0.1h-2.95C38.417,59.117,34.5,59.067,30.3,59c-8.433-0.167-14.05-0.383-16.85-0.65c-0.067-0.033-0.667-0.117-1.8-0.25c-0.9-0.133-1.683-0.283-2.35-0.45c-2.066-0.533-3.783-1.5-5.15-2.9c-1.033-1.067-1.9-2.783-2.6-5.15C1.317,48.867,1.133,48.117,1,47.35L0.8,46.4c-0.133-1.133-0.267-2.55-0.4-4.25C0.133,38.717,0,35.583,0,32.75V26.4c0-2.833,0.133-5.95,0.4-9.35l0.4-4.25c0.167-0.966,0.417-2.05,0.75-3.25c0.7-2.333,1.567-4.033,2.6-5.1c1.367-1.434,2.967-2.434,4.8-3c0.633-0.167,1.333-0.3,2.1-0.4c0.4-0.066,0.917-0.133,1.55-0.2c4.9-0.333,11.283-0.567,19.15-0.7C35.65,0.05,39.083,0,42.05,0L45,0.05c2.467,0,4.933,0.034,7.4,0.1c7.833,0.133,14.2,0.367,19.1,0.7c0.3,0.033,0.833,0.1,1.6,0.2c0.733,0.1,1.417,0.233,2.05,0.4c1.833,0.566,3.434,1.566,4.8,3c1.066,1.066,1.933,2.767,2.6,5.1c0.367,1.2,0.617,2.284,0.75,3.25l0.4,4.25C84,20.45,84.15,23.567,84.15,26.4z M33.3,41.4L56,29.6L33.3,17.75V41.4z"></path>'),u.push('<polygon fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" points="33.3,41.4 33.3,17.75 56,29.6"></polygon>'),u.push("</svg>"),u.push("</div>"),u.push("</div>"),u.push('<div class="html5-info-bar">'),u.push('<div class="html5-title">'),u.push('<div class="html5-title-text-wrapper">'),u.push('<a class="html5-title-text" target="_blank" tabindex="3100" href="https://www.youtube.com/watch?v=',o,'">'),void 0===c||null===c||""===c?u.push("youtube.com/watch?v="+o):u.push(c),u.push("</a>"),u.push("</div>"),u.push("</div>"),u.push("</div>"),e.css({"padding-bottom":n}).html(u.join("")),a=i>640?"maxresdefault.jpg":i>480?"sddefault.jpg":i>320?"hqdefault.jpg":i>120?"mqdefault.jpg":0===i?"hqdefault.jpg":"default.jpg",s=e.find(".ytp-thumbnail").css({"background-image":["url(//img.youtube.com/vi/",o,"/",a,")"].join("")}).addClass("lazyYT-image-loaded").on("click",function(n){n.preventDefault(),!e.hasClass("lazyYT-video-loaded")&&s.hasClass("lazyYT-image-loaded")&&e.html('<iframe src="//www.youtube.com/embed/'+o+"?autoplay=1&"+d+'" frameborder="0" allowfullscreen></iframe>').addClass("lazyYT-video-loaded"),t.onPlay&&t.onPlay(n,e)})}e.fn.lazyYT=function(n){var s={default_ratio:"16:9",callback:null,container_class:"lazyYT-container"},a=e.extend(s,n);return this.each(function(){t(e(this).addClass(a.container_class),a)})}}(jQuery),define("discourse/plugins/lazyYT/initializers/lazyYT",["exports","discourse/lib/plugin-api"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"apply-lazyYT",initialize:function(){(0,t.withPluginApi)("0.1",function(e){e.decorateCooked(function(t){0!==$(".lazyYT",t).length&&$(".lazyYT",t).lazyYT({onPlay:function(t,n){var s=parseInt(n.closest("article").data("post-id"));s&&e.preventCloak(s)}})})})}}}),define("discourse/plugins/poll/lib/discourse-markdown/poll",["exports"],function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function n(e,t,n){(isNaN(t)||t<1)&&(t=1),(isNaN(n)||n>e)&&(n=e);var s=void 0;return n>0&&(t===n?t>1&&(s=I18n.t("poll.multiple.help.x_options",{count:t})):t>1?s=n<e?I18n.t("poll.multiple.help.between_min_and_max_options",{min:t,max:n}):I18n.t("poll.multiple.help.at_least_min_options",{count:t}):n<=e&&(s=I18n.t("poll.multiple.help.up_to_max_options",{count:n}))),s}function s(e,n,s){var a=e.indexOf(n),i=e[a].level;for(e.splice.apply(e,[a,1].concat(t(s))),s[0].map=n.map;a<e.length;a++){var l=e[a].nesting;l<0&&i--,e[a].level=i,l>0&&i++}}function a(e,t){for(var n=e.length-1,s=[],a=[];e[n]!==t;n--){if(0===n)return;var i=e[n];if(0===i.level&&"ol"!==i.tag&&"ul"!==i.tag)return;if(1===i.level&&1===i.nesting){if("li"!==i.tag)return;s.push([i,a.reverse().join(" ")])}1===i.level&&1===i.nesting&&"li"===i.tag?a=[]:"text"!==i.type&&"inline"!==i.type||a.push(i.content)}return s.reverse()}function i(e,t){e.push("text","",0).content="[/"+t+"]"}function l(e){e.registerOptions(function(e,t){e.features.poll=!!t.poll_enabled,e.pollMaximumOptions=t.poll_maximum_options}),e.registerPlugin(function(e){e.block.bbcode.ruler.push("poll",x)})}function r(e){e.whiteList(["div.poll","div.poll-info","div.poll-container","div.poll-buttons","div[data-*]","span.info-number","span.info-text","a.button.cast-votes","a.button.toggle-results","li[data-*]"]),l(e)}function o(e,t){var n=e[0],s=e[1],a=e[2],i=e[3];n=u(n,s,a,i,t[0],7,-680876936),i=u(i,n,s,a,t[1],12,-389564586),a=u(a,i,n,s,t[2],17,606105819),s=u(s,a,i,n,t[3],22,-1044525330),n=u(n,s,a,i,t[4],7,-176418897),i=u(i,n,s,a,t[5],12,1200080426),a=u(a,i,n,s,t[6],17,-1473231341),s=u(s,a,i,n,t[7],22,-45705983),n=u(n,s,a,i,t[8],7,1770035416),i=u(i,n,s,a,t[9],12,-1958414417),a=u(a,i,n,s,t[10],17,-42063),s=u(s,a,i,n,t[11],22,-1990404162),n=u(n,s,a,i,t[12],7,1804603682),i=u(i,n,s,a,t[13],12,-40341101),a=u(a,i,n,s,t[14],17,-1502002290),s=u(s,a,i,n,t[15],22,1236535329),n=d(n,s,a,i,t[1],5,-165796510),i=d(i,n,s,a,t[6],9,-1069501632),a=d(a,i,n,s,t[11],14,643717713),s=d(s,a,i,n,t[0],20,-373897302),n=d(n,s,a,i,t[5],5,-701558691),i=d(i,n,s,a,t[10],9,38016083),a=d(a,i,n,s,t[15],14,-660478335),s=d(s,a,i,n,t[4],20,-405537848),n=d(n,s,a,i,t[9],5,568446438),i=d(i,n,s,a,t[14],9,-1019803690),a=d(a,i,n,s,t[3],14,-187363961),s=d(s,a,i,n,t[8],20,1163531501),n=d(n,s,a,i,t[13],5,-1444681467),i=d(i,n,s,a,t[2],9,-51403784),a=d(a,i,n,s,t[7],14,1735328473),s=d(s,a,i,n,t[12],20,-1926607734),n=p(n,s,a,i,t[5],4,-378558),i=p(i,n,s,a,t[8],11,-2022574463),a=p(a,i,n,s,t[11],16,1839030562),s=p(s,a,i,n,t[14],23,-35309556),n=p(n,s,a,i,t[1],4,-1530992060),i=p(i,n,s,a,t[4],11,1272893353),a=p(a,i,n,s,t[7],16,-155497632),s=p(s,a,i,n,t[10],23,-1094730640),n=p(n,s,a,i,t[13],4,681279174),i=p(i,n,s,a,t[0],11,-358537222),a=p(a,i,n,s,t[3],16,-722521979),s=p(s,a,i,n,t[6],23,76029189),n=p(n,s,a,i,t[9],4,-640364487),i=p(i,n,s,a,t[12],11,-421815835),a=p(a,i,n,s,t[15],16,530742520),s=p(s,a,i,n,t[2],23,-995338651),n=m(n,s,a,i,t[0],6,-198630844),i=m(i,n,s,a,t[7],10,1126891415),a=m(a,i,n,s,t[14],15,-1416354905),s=m(s,a,i,n,t[5],21,-57434055),n=m(n,s,a,i,t[12],6,1700485571),i=m(i,n,s,a,t[3],10,-1894986606),a=m(a,i,n,s,t[10],15,-1051523),s=m(s,a,i,n,t[1],21,-2054922799),n=m(n,s,a,i,t[8],6,1873313359),i=m(i,n,s,a,t[15],10,-30611744),a=m(a,i,n,s,t[6],15,-1560198380),s=m(s,a,i,n,t[13],21,1309151649),n=m(n,s,a,i,t[4],6,-145523070),i=m(i,n,s,a,t[11],10,-1120210379),a=m(a,i,n,s,t[2],15,718787259),s=m(s,a,i,n,t[9],21,-343485551),e[0]=v(n,e[0]),e[1]=v(s,e[1]),e[2]=v(a,e[2]),e[3]=v(i,e[3])}function c(e,t,n,s,a,i){return t=v(v(t,e),v(s,i)),v(t<<a|t>>>32-a,n)}function u(e,t,n,s,a,i,l){return c(t&n|~t&s,e,t,a,i,l)}function d(e,t,n,s,a,i,l){return c(t&s|n&~s,e,t,a,i,l)}function p(e,t,n,s,a,i,l){return c(t^n^s,e,t,a,i,l)}function m(e,t,n,s,a,i,l){return c(n^(t|~s),e,t,a,i,l)}function f(e){/[\x80-\xFF]/.test(e)&&(e=unescape(encodeURI(e)));var t,n=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)o(s,h(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(o(s,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,o(s,a),s}function h(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function g(e){for(var t="",n=0;n<4;n++)t+=E[e>>8*n+4&15]+E[e>>8*n&15];return t}function b(e){for(var t=0;t<e.length;t++)e[t]=g(e[t]);return e.join("")}function v(e,t){return e+t&4294967295}function y(e){return b(f(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=r;var _=["type","name","min","max","step","order","status","public"],x={tag:"poll",before:function(e,t,n){var s=e.push("text","",0);s.content=n,s.bbcode_attrs=t.attrs,s.bbcode_type="poll_open"},after:function(e,t,l){var r=a(e.tokens,t);if(!r)return i(e,l);var o=t.bbcode_attrs,c=[["class","poll"]];o.status||c.push(["data-poll-status","open"]),_.forEach(function(e){o[e]&&c.push(["data-poll-"+e,o[e]])}),o.name||c.push(["data-poll-name","poll"]);var u=parseInt(o.min,10),d=parseInt(o.max,10),p=parseInt(o.step,10);p<1&&(p=1);var m=[],f=new e.Token("poll_open","div",1);if(f.block=!0,f.attrs=c,m.push(f),f=new e.Token("poll_open","div",1),f.block=!0,m.push(f),f=new e.Token("poll_open","div",1),f.attrs=[["class","poll-container"]],m.push(f),"number"===o.type){if(isNaN(u)&&(u=1),isNaN(d)&&(d=e.md.options.discourse.pollMaximumOptions),isNaN(p)&&(p=1),r.length>0)return i(e,l);f=new e.Token("bullet_list_open","ul",1),m.push(f);for(var h=u;h<=d;h+=p)f=new e.Token("list_item_open","li",1),r.push([f,String(h)]),m.push(f),f=new e.Token("text","",0),f.content=String(h),m.push(f),f=new e.Token("list_item_close","li",-1),m.push(f);f=new e.Token("bullet_item_close","",-1),m.push(f)}for(var g=0;g<r.length;g++){f=r[g][0];var b=r[g][1];f.attrs=f.attrs||[];var v=y(JSON.stringify([b]));f.attrs.push(["data-poll-option-id",v])}if(s(e.tokens,t,m),e.level=e.tokens[e.tokens.length-1].level,e.push("poll_close","div",-1),f=e.push("poll_open","div",1),f.attrs=[["class","poll-info"]],e.push("paragraph_open","p",1),f=e.push("span_open","span",1),f.block=!1,f.attrs=[["class","info-number"]],f=e.push("text","",0),f.content="0",e.push("span_close","span",-1),f=e.push("span_open","span",1),f.block=!1,f.attrs=[["class","info-text"]],f=e.push("text","",0),f.content=I18n.t("poll.voters",{count:0}),e.push("span_close","span",-1),e.push("paragraph_close","p",-1),"multiple"===c["data-poll-type"]){var x=n(r.length,u,d);x&&(e.push("paragraph_open","p",1),f=e.push("html_inline","",0),f.content=x,e.push("paragraph_close","p",-1))}"true"===c["data-poll-public"]&&(e.push("paragraph_open","p",1),f=e.push("text","",0),f.content=I18n.t("poll.public.title"),e.push("paragraph_close","p",-1)),e.push("poll_close","div",-1),e.push("poll_close","div",-1),f=e.push("poll_open","div",1),f.attrs=[["class","poll-buttons"]],"multiple"===c["data-poll-type"]&&(f=e.push("link_open","a",1),f.block=!1,f.attrs=[["class","button cast-votes"],["title",I18n.t("poll.cast-votes.title")]],f=e.push("text","",0),f.content=I18n.t("poll.cast-votes.label"),e.push("link_close","a",-1)),f=e.push("link_open","a",1),f.block=!1,f.attrs=[["class","button toggle-results"],["title",I18n.t("poll.show-results.title")]],f=e.push("text","",0),f.content=I18n.t("poll.show-results.label"),e.push("link_close","a",-1),e.push("poll_close","div",-1),e.push("poll_close","div",-1)}},E="0123456789abcdef".split("")}),define("discourse/plugins/poll/lib/even-round",["exports"],function(e){"use strict";function t(e){return 100===e.map(function(e){return Math.floor(e)}).reduce(function(e,t){return e+t})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){for(var n=e.map(function(e){return e%1}),s=Math.ceil(n.reduce(function(e,t){return e+t})),a=0,i=n.length;a<s&&a<i;a++){for(var l=0,r=0,o=0;o<n.length;o++)n[o]>l&&(r=o,l=n[o]);if(++e[r],n[r]=0,t(e))break}return e.map(function(e){return Math.floor(e)})}}),define("discourse/plugins/poll/controllers/poll-ui-builder",["exports","ember-addons/ember-computed-decorators","discourse/models/input-validation"],function(e,t,n){"use strict";function s(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var a,i,l,r,o,c,u,d,p,m,f,h,g,b,v,y;e.default=Ember.Controller.extend((a=(0,t.default)("regularPollType","numberPollType","multiplePollType"),i=(0,t.default)("pollType","regularPollType"),l=(0,t.default)("pollType","pollOptionsCount","multiplePollType"),r=(0,t.default)("pollType","numberPollType"),o=(0,t.default)("isRegular"),c=(0,t.default)("pollOptions"),u=(0,t.observes)("isMultiple","isNumber","pollOptionsCount"),d=(0,t.default)("isRegular","isMultiple","isNumber","pollOptionsCount"),p=(0,t.default)("isRegular","isMultiple","isNumber","pollOptionsCount","pollMin","pollStep"),m=(0,t.default)("isNumber","pollMax"),f=(0,t.default)("isNumber","showMinMax","pollType","publicPoll","pollOptions","pollMin","pollMax","pollStep"),h=(0,t.default)("pollOptionsCount","isRegular","isMultiple","isNumber","pollMin","pollMax"),g=(0,t.default)("pollMin","pollMax"),b=(0,t.default)("pollStep"),v=(0,t.default)("disableInsert"),y={regularPollType:"regular",numberPollType:"number",multiplePollType:"multiple",init:function(){this._super(),this._setupPoll()},pollTypes:function(e,t,n){var s=[];return s.push({name:I18n.t("poll.ui_builder.poll_type.regular"),value:e}),s.push({name:I18n.t("poll.ui_builder.poll_type.number"),value:t}),s.push({name:I18n.t("poll.ui_builder.poll_type.multiple"),value:n}),s},isRegular:function(e,t){return e===t},isMultiple:function(e,t,n){return e===n&&t>0},isNumber:function(e,t){return e===t},showMinMax:function(e){return!e},pollOptionsCount:function(e){if(0===e.length)return 0;var t=0;return e.split("\n").forEach(function(e){0!==e.length&&(t+=1)}),t},_setPollMax:function(){var e=this.get("isMultiple"),t=this.get("isNumber");(e||t)&&(e?this.set("pollMax",this.get("pollOptionsCount")):t&&this.set("pollMax",this.siteSettings.poll_maximum_options))},pollMinOptions:function(e,t,n,s){if(!e)return t?this._comboboxOptions(1,s+1):n?this._comboboxOptions(1,this.siteSettings.poll_maximum_options+1):void 0},pollMaxOptions:function(e,t,n,s,a,i){if(!e){var l=parseInt(a)||1;if(t)return this._comboboxOptions(l+1,s+1);if(n){var r=parseInt(i,10);return r<1&&(r=1),this._comboboxOptions(l+1,l+this.siteSettings.poll_maximum_options*r)}}},pollStepOptions:function(e,t){if(e)return this._comboboxOptions(1,(parseInt(t)||1)+1)},pollOutput:function(e,t,n,s,a,i,l,r){var o="[poll",c="",u=this.get("toolbarEvent").getText().match(/\[poll(\s+name=[^\s\]]+)*.*\]/gim);u&&(o+=" name=poll"+(u.length+1));var d=r;return d<1&&(d=1),n&&(o+=" type="+n),i&&t&&(o+=" min="+i),l&&(o+=" max="+l),e&&(o+=" step="+d),s&&(o+=" public=true"),o+="]",c+=o+"\n",a.length>0&&!e&&a.split("\n").forEach(function(e){0!==e.length&&(c+="* "+e+"\n")}),c+="[/poll]"},disableInsert:function(e,t,n,s,a,i){return t&&e<2||n&&e<a&&a>=i||!s&&e<2},minMaxValueValidation:function(e,t){var s={ok:!0};return e>=t&&(s={failed:!0,reason:I18n.t("poll.ui_builder.help.invalid_values")}),n.default.create(s)},minStepValueValidation:function(e){var t={ok:!0};return e<1&&(t={failed:!0,reason:I18n.t("poll.ui_builder.help.min_step_value")}),n.default.create(t)},minNumOfOptionsValidation:function(e){var t={ok:!0};return e&&(t={failed:!0,reason:I18n.t("poll.ui_builder.help.options_count")}),n.default.create(t)},_comboboxOptions:function(e,t){return _.range(e,t).map(function(e){return{value:e,name:e}})},_setupPoll:function(){this.setProperties({pollType:null,publicPoll:!1,pollOptions:"",pollMin:1,pollMax:null,pollStep:1})},actions:{insertPoll:function(){this.get("toolbarEvent").addText(this.get("pollOutput")),this.send("closeModal"),this._setupPoll()}}},s(y,"pollTypes",[a],Object.getOwnPropertyDescriptor(y,"pollTypes"),y),s(y,"isRegular",[i],Object.getOwnPropertyDescriptor(y,"isRegular"),y),s(y,"isMultiple",[l],Object.getOwnPropertyDescriptor(y,"isMultiple"),y),s(y,"isNumber",[r],Object.getOwnPropertyDescriptor(y,"isNumber"),y),s(y,"showMinMax",[o],Object.getOwnPropertyDescriptor(y,"showMinMax"),y),s(y,"pollOptionsCount",[c],Object.getOwnPropertyDescriptor(y,"pollOptionsCount"),y),s(y,"_setPollMax",[u],Object.getOwnPropertyDescriptor(y,"_setPollMax"),y),s(y,"pollMinOptions",[d],Object.getOwnPropertyDescriptor(y,"pollMinOptions"),y),s(y,"pollMaxOptions",[p],Object.getOwnPropertyDescriptor(y,"pollMaxOptions"),y),s(y,"pollStepOptions",[m],Object.getOwnPropertyDescriptor(y,"pollStepOptions"),y),s(y,"pollOutput",[f],Object.getOwnPropertyDescriptor(y,"pollOutput"),y),s(y,"disableInsert",[h],Object.getOwnPropertyDescriptor(y,"disableInsert"),y),s(y,"minMaxValueValidation",[g],Object.getOwnPropertyDescriptor(y,"minMaxValueValidation"),y),s(y,"minStepValueValidation",[b],Object.getOwnPropertyDescriptor(y,"minStepValueValidation"),y),s(y,"minNumOfOptionsValidation",[v],Object.getOwnPropertyDescriptor(y,"minNumOfOptionsValidation"),y),y))}),define("discourse/plugins/poll/initializers/extend-for-poll",["exports","discourse/lib/plugin-api","ember-addons/ember-computed-decorators","discourse-common/lib/get-owner","discourse/widgets/glue"],function(e,t,n,s,a){"use strict";function i(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function l(e){function t(t,n){var s=$(".poll",t);if(s.length){var i=n.getModel();e.preventCloak(i.id);var l=i.get("polls_votes")||{};i.pollsChanged();var r=i.get("pollsObject");r&&s.each(function(e,t){var n=$(t),s=n.data("poll-name"),o=r[s];if(o){var d="multiple"===o.get("type"),p=new a.default("discourse-poll",c,{id:s+"-"+i.id,post:i,poll:o,vote:l[s]||[],isMultiple:d});p.appendTo(t),u.push(p)}})}}function l(){u.forEach(function(e){return e.cleanUp()})}var r,o,c=(0,s.getRegister)(e);e.modifyClass("controller:topic",{subscribe:function(){var e=this;this._super(),this.messageBus.subscribe("/polls/"+this.get("model.id"),function(t){var n=e.get("model.postStream").findLoadedPost(t.post_id);n&&n.set("polls",t.polls)})},unsubscribe:function(){this.messageBus.unsubscribe("/polls/*"),this._super()}}),e.modifyClass("model:post",(r=(0,n.observes)("polls"),o={_polls:null,pollsObject:null,pollsChanged:function(){var e=this,t=this.get("polls");t&&(this._polls=this._polls||{},_.map(t,function(t,n){
e._polls[n]?e._polls[n].setProperties(t):e._polls[n]=Em.Object.create(t)}),this.set("pollsObject",this._polls),u.forEach(function(e){return e.queueRerender()}))}},i(o,"pollsChanged",[r],Object.getOwnPropertyDescriptor(o,"pollsChanged"),o),o));var u=[];e.includePostAttributes("polls","polls_votes"),e.decorateCooked(t,{onlyStream:!0}),e.cleanupStream(l)}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-for-poll",initialize:function(){(0,t.withPluginApi)("0.8.7",l)}}}),define("discourse/plugins/poll/initializers/add-poll-ui-builder",["exports","discourse/lib/plugin-api","ember-addons/ember-computed-decorators","discourse/lib/show-modal"],function(e,t,n,s){"use strict";function a(e,t,n,s,a){var i={};return Object.keys(s).forEach(function(e){i[e]=s[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,s){return s(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function i(e){var t,i;e.modifyClass("controller:composer",(t=(0,n.default)("siteSettings.poll_enabled","siteSettings.poll_minimum_trust_level_to_create"),i={canBuildPoll:function(e,t){return e&&this.currentUser&&(this.currentUser.staff||this.currentUser.trust_level>=t)},actions:{showPollBuilder:function(){(0,s.default)("poll-ui-builder").set("toolbarEvent",this.get("toolbarEvent"))}}},a(i,"canBuildPoll",[t],Object.getOwnPropertyDescriptor(i,"canBuildPoll"),i),i)),e.addToolbarPopupMenuOptionsCallback(function(){return{action:"showPollBuilder",icon:"bar-chart-o",label:"poll.ui_builder.title",condition:"canBuildPoll"}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"add-poll-ui-builder",initialize:function(){(0,t.withPluginApi)("0.8.7",i)}}}),Ember.TEMPLATES["javascripts/modal/poll-ui-builder"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["d-modal-body"],null,[["title","class"],["poll.ui_builder.title","poll-ui-builder"]],{"statements":[[0,"  "],[11,"form",[]],[15,"class","poll-ui-builder-form form-horizontal"],[13],[0,"\\n    "],[11,"div",[]],[15,"class","input-group"],[13],[0,"\\n      "],[11,"label",[]],[15,"class","input-group-label"],[13],[1,[33,["i18n"],["poll.ui_builder.poll_type.label"],null],false],[14],[0,"\\n      "],[1,[33,["combo-box"],null,[["content","value","allowInitialValueMutation","valueAttribute"],[[28,["pollTypes"]],[28,["pollType"]],true,"value"]]],false],[0,"\\n    "],[14],[0,"\\n\\n"],[6,["if"],[[28,["showMinMax"]]],null,{"statements":[[0,"      "],[11,"div",[]],[15,"class","input-group"],[13],[0,"\\n        "],[11,"label",[]],[15,"class","input-group-label"],[13],[1,[33,["i18n"],["poll.ui_builder.poll_config.min"],null],false],[14],[0,"\\n        "],[1,[33,["input"],null,[["type","value","valueAttribute","class"],["number",[28,["pollMin"]],"value","poll-options-min"]]],false],[0,"\\n        "],[1,[33,["input-tip"],null,[["validation"],[[28,["minMaxValueValidation"]]]]],false],[0,"\\n      "],[14],[0,"\\n\\n\\n      "],[11,"div",[]],[15,"class","input-group"],[13],[0,"\\n        "],[11,"label",[]],[15,"class","input-group-label"],[13],[1,[33,["i18n"],["poll.ui_builder.poll_config.max"],null],false],[14],[0,"\\n        "],[1,[33,["input"],null,[["type","value","valueAttribute","class"],["number",[28,["pollMax"]],"value","poll-options-max"]]],false],[0,"\\n      "],[14],[0,"\\n\\n"],[6,["if"],[[28,["isNumber"]]],null,{"statements":[[0,"        "],[11,"div",[]],[15,"class","input-group"],[13],[0,"\\n          "],[11,"label",[]],[15,"class","input-group-label"],[13],[1,[33,["i18n"],["poll.ui_builder.poll_config.step"],null],false],[14],[0,"\\n          "],[1,[33,["input"],null,[["type","value","valueAttribute","min","class"],["number",[28,["pollStep"]],"value","1","poll-options-step"]]],false],[0,"\\n          "],[1,[33,["input-tip"],null,[["validation"],[[28,["minStepValueValidation"]]]]],false],[0,"\\n        "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[]},null],[0,"\\n    "],[11,"div",[]],[15,"class","input-group"],[13],[0,"\\n      "],[11,"label",[]],[13],[0,"\\n        "],[1,[33,["input"],null,[["type","checked"],["checkbox",[28,["publicPoll"]]]]],false],[0,"\\n        "],[1,[33,["i18n"],["poll.ui_builder.poll_public.label"],null],false],[0,"\\n      "],[14],[0,"\\n    "],[14],[0,"\\n\\n"],[6,["unless"],[[28,["isNumber"]]],null,{"statements":[[0,"      "],[11,"div",[]],[15,"class","input-group"],[13],[0,"\\n        "],[11,"label",[]],[13],[1,[33,["i18n"],["poll.ui_builder.poll_options.label"],null],false],[14],[0,"\\n        "],[1,[33,["input-tip"],null,[["validation"],[[28,["minNumOfOptionsValidation"]]]]],false],[0,"\\n        "],[1,[33,["textarea"],null,[["value"],[[28,["pollOptions"]]]]],false],[0,"\\n      "],[14],[0,"\\n"]],"locals":[]},null],[0,"  "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[11,"div",[]],[15,"class","modal-footer"],[13],[0,"\\n  "],[1,[33,["d-button"],null,[["action","icon","class","label","disabled"],["insertPoll","bar-chart-o","btn-primary","poll.ui_builder.insert",[28,["disableInsert"]]]]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/modal/poll-ui-builder"}}),define("discourse/plugins/poll/widgets/discourse-poll",["exports","discourse/widgets/widget","virtual-dom","discourse-common/lib/icon-library","discourse/widgets/raw-html","discourse/lib/ajax","discourse/lib/ajax-error","discourse/plugins/poll/lib/even-round","discourse/widgets/post","discourse/lib/round"],function(e,t,n,s,a,i,l,r,o,c){"use strict";function u(e){return new a.default({html:"<span>"+e.html+"</span>"})}function d(e){return(0,i.ajax)("/polls/voters.json",{type:"get",data:e}).catch(function(e){e?(0,l.popupAjaxError)(e):bootbox.alert(I18n.t("poll.error_while_fetching_voters"))})}Object.defineProperty(e,"__esModule",{value:!0}),(0,t.createWidget)("discourse-poll-option",{tagName:"li",buildAttributes:function(e){return{"data-poll-option-id":e.option.id}},html:function(e){var t=[],n=e.option,a=e.vote,i=-1!==a.indexOf(n.id);return e.isMultiple?t.push((0,s.iconNode)(i?"check-square-o":"square-o")):t.push((0,s.iconNode)(i?"dot-circle-o":"circle-o")),t.push(" "),t.push(u(n)),t},click:function(e){0===$(e.target).closest("a").length&&this.sendWidgetAction("toggleOption",this.attrs.option)}}),(0,t.createWidget)("discourse-poll-load-more",{tagName:"div.poll-voters-toggle-expand",buildKey:function(e){return e.id+"-load-more"},defaultState:function(){return{loading:!1}},html:function(e,t){return t.loading?(0,n.h)("div.spinner.small"):(0,n.h)("a",(0,s.iconNode)("chevron-down"))},click:function(){var e=this.state;if(!e.loading)return e.loading=!0,this.sendWidgetAction("loadMore").finally(function(){return e.loading=!1})}}),(0,t.createWidget)("discourse-poll-voters",{tagName:"ul.poll-voters-list",buildKey:function(e){return e.id()},defaultState:function(){return{loaded:"new",pollVoters:[],offset:1}},fetchVoters:function(){var e=this,t=this.attrs,n=this.state;if("loading"!==n.loaded)return n.loaded="loading",d({post_id:t.postId,poll_name:t.pollName,option_id:t.optionId,offset:n.offset}).then(function(s){n.loaded="loaded",n.offset+=1;var a=s[t.pollName],i="number"===t.pollType?a:a[t.optionId];n.pollVoters=n.pollVoters.concat(i),e.scheduleRerender()})},loadMore:function(){return this.fetchVoters()},html:function(e,t){e.pollVoters&&"new"===t.loaded&&(t.pollVoters=e.pollVoters);var s=t.pollVoters.map(function(e){return(0,n.h)("li",[(0,o.avatarFor)("tiny",{username:e.username,template:e.avatar_template})," "])});return t.pollVoters.length<e.totalVotes&&s.push(this.attach("discourse-poll-load-more",{id:e.id()})),(0,n.h)("div.poll-voters",s)}}),(0,t.createWidget)("discourse-poll-standard-results",{tagName:"ul.results",buildKey:function(e){return e.id+"-standard-results"},defaultState:function(){return{loaded:"new"}},fetchVoters:function(){var e=this,t=this.attrs,n=this.state;"new"===n.loaded&&d({post_id:t.post.id,poll_name:t.poll.get("name")}).then(function(s){n.voters=s[t.poll.get("name")],n.loaded="loaded",e.scheduleRerender()})},html:function(e,t){var s=this,a=e.poll,i=a.get("options");if(i){var l=a.get("voters"),o=a.get("public"),c=_.clone(i).sort(function(e,t){return e.votes<t.votes?1:e.votes===t.votes?e.html<t.html?-1:1:-1}),d=0===l?Array(c.length).fill(0):c.map(function(e){return 100*e.votes/l}),p=e.isMultiple?d.map(Math.floor):(0,r.default)(d);return o&&this.fetchVoters(),c.map(function(i,l){var r=[],c=p[l].toString(),d=(e.vote||[]).includes(i.id);return r.push((0,n.h)("div.option",(0,n.h)("p",[(0,n.h)("span.percentage",c+"%"),u(i)]))),r.push((0,n.h)("div.bar-back",(0,n.h)("div.bar",{attributes:{style:"width:"+c+"%"}}))),o&&r.push(s.attach("discourse-poll-voters",{id:function(){return"poll-voters-"+i.id},postId:e.post.id,optionId:i.id,pollName:a.get("name"),totalVotes:i.votes,pollVoters:t.voters&&t.voters[i.id]||[]})),(0,n.h)("li",{className:d?"chosen":""},r)})}}}),(0,t.createWidget)("discourse-poll-number-results",{buildKey:function(e){return e.id+"-number-results"},defaultState:function(){return{loaded:"new"}},fetchVoters:function(){var e=this,t=this.attrs,n=this.state;"new"===n.loaded&&d({post_id:t.post.id,poll_name:t.poll.get("name")}).then(function(s){n.voters=s[t.poll.get("name")],n.loaded="loaded",e.scheduleRerender()})},html:function(e,t){var s=e.poll,i=s.get("public"),l=s.get("options").reduce(function(e,t){return e+parseInt(t.html,10)*parseInt(t.votes,10)},0),r=s.voters,o=0===r?0:(0,c.default)(l/r,-2),u=I18n.t("poll.average_rating",{average:o}),d=[(0,n.h)("div.poll-results-number-rating",new a.default({html:"<span>"+u+"</span>"}))];return i&&(this.fetchVoters(),d.push(this.attach("discourse-poll-voters",{id:function(){return"poll-voters-"+s.get("name")},totalVotes:s.get("voters"),pollVoters:t.voters||[],postId:e.post.id,pollName:s.get("name"),pollType:s.get("type")}))),d}}),(0,t.createWidget)("discourse-poll-container",{tagName:"div.poll-container",html:function(e){var t=this,s=e.poll;if(e.showResults){var a="number"===s.get("type")?"number":"standard";return this.attach("discourse-poll-"+a+"-results",e)}var i=s.get("options");if(i)return(0,n.h)("ul",i.map(function(n){return t.attach("discourse-poll-option",{option:n,isMultiple:e.isMultiple,vote:e.vote})}))}}),(0,t.createWidget)("discourse-poll-info",{tagName:"div.poll-info",multipleHelpText:function(e,t,n){if(t>0)if(e===t){if(e>1)return I18n.t("poll.multiple.help.x_options",{count:e})}else{if(e>1)return t<n?I18n.t("poll.multiple.help.between_min_and_max_options",{min:e,max:t}):I18n.t("poll.multiple.help.at_least_min_options",{count:e});if(t<=n)return I18n.t("poll.multiple.help.up_to_max_options",{count:t})}},html:function(e){var t=e.poll,s=t.get("voters"),i=[(0,n.h)("p",[(0,n.h)("span.info-number",s.toString()),(0,n.h)("span.info-text",I18n.t("poll.voters",{count:s}))])];if(e.isMultiple)if(e.showResults){var l=t.get("options").reduce(function(e,t){return e+parseInt(t.votes,10)},0);i.push((0,n.h)("p",[(0,n.h)("span.info-number",l.toString()),(0,n.h)("span.info-text",I18n.t("poll.total_votes",{count:l}))]))}else{var r=this.multipleHelpText(e.min,e.max,t.get("options.length"));r&&i.push(new a.default({html:"<span>"+r+"</span>"}))}return!e.showResults&&e.poll.get("public")&&i.push((0,n.h)("p",I18n.t("poll.public.title"))),i}}),(0,t.createWidget)("discourse-poll-buttons",{tagName:"div.poll-buttons",html:function(e){var t=[],n=e.poll,s=e.post,a=s.get("topic.archived"),i="closed"===n.get("status"),l=i||a;if(e.isMultiple&&!l){var r=!e.canCastVotes;t.push(this.attach("button",{className:"btn cast-votes "+(r?"":"btn-primary"),label:"poll.cast-votes.label",title:"poll.cast-votes.title",disabled:r,action:"castVotes"})),t.push(" ")}return e.showResults?t.push(this.attach("button",{className:"btn toggle-results",label:"poll.hide-results.label",title:"poll.hide-results.title",icon:"eye-slash",disabled:l,action:"toggleResults"})):t.push(this.attach("button",{className:"btn toggle-results",label:"poll.show-results.label",title:"poll.show-results.title",icon:"eye",disabled:0===n.get("voters"),action:"toggleResults"})),!this.currentUser||this.currentUser.get("id")!==s.get("user_id")&&!this.currentUser.get("staff")||a||(i?t.push(this.attach("button",{className:"btn toggle-status",label:"poll.open.label",title:"poll.open.title",icon:"unlock-alt",action:"toggleStatus"})):t.push(this.attach("button",{className:"btn toggle-status btn-danger",label:"poll.close.label",title:"poll.close.title",icon:"lock",action:"toggleStatus"}))),t}}),e.default=(0,t.createWidget)("discourse-poll",{tagName:"div.poll",buildKey:function(e){return e.id},buildAttributes:function(e){var t=e.poll;return{"data-poll-type":t.get("type"),"data-poll-name":t.get("name"),"data-poll-status":t.get("status"),"data-poll-public":t.get("public")}},defaultState:function(e){var t=e.poll,n=e.post;return{loading:!1,showResults:t.get("isClosed")||n.get("topic.archived")}},html:function(e,t){var s=t.showResults,a=jQuery.extend({},e,{showResults:s,canCastVotes:this.canCastVotes(),min:this.min(),max:this.max()});return(0,n.h)("div",[this.attach("discourse-poll-container",a),this.attach("discourse-poll-info",a),this.attach("discourse-poll-buttons",a)])},isClosed:function(){return"closed"===this.attrs.poll.get("status")},min:function(){var e=parseInt(this.attrs.poll.min,10);return(isNaN(e)||e<1)&&(e=1),e},max:function(){var e=parseInt(this.attrs.poll.max,10),t=this.attrs.poll.options.length;return(isNaN(e)||e>t)&&(e=t),e},canCastVotes:function(){var e=this.state,t=this.attrs;if(this.isClosed()||e.showResults||e.loading)return!1;var n=t.vote.length;return t.isMultiple?n>=this.min()&&n<=this.max():n>0},toggleStatus:function(){var e=this,t=this.state,n=this.attrs,s=n.poll,a="closed"===s.get("status");bootbox.confirm(I18n.t(a?"poll.open.confirm":"poll.close.confirm"),I18n.t("no_value"),I18n.t("yes_value"),function(r){if(r){t.loading=!0;var o=a?"open":"closed";(0,i.ajax)("/polls/toggle_status",{type:"PUT",data:{post_id:n.post.get("id"),poll_name:s.get("name"),status:o}}).then(function(){s.set("status",o),e.scheduleRerender()}).catch(function(e){e?(0,l.popupAjaxError)(e):bootbox.alert(I18n.t("poll.error_while_toggling_status"))}).finally(function(){t.loading=!1})}})},toggleResults:function(){this.state.showResults=!this.state.showResults},showLogin:function(){this.register.lookup("route:application").send("showLogin")},toggleOption:function(e){if(!this.isClosed()){this.currentUser||this.showLogin();var t=this.attrs,n=t.vote,s=n.indexOf(e.id);return t.isMultiple||(n.length=0),-1!==s?n.splice(s,1):n.push(e.id),t.isMultiple?void 0:this.castVotes()}},castVotes:function(){if(this.canCastVotes()){if(!this.currentUser)return this.showLogin();var e=this.attrs,t=this.state;return t.loading=!0,(0,i.ajax)("/polls/vote",{type:"PUT",data:{post_id:e.post.id,poll_name:e.poll.name,options:e.vote}}).then(function(){t.showResults=!0}).catch(function(e){e?(0,l.popupAjaxError)(e):bootbox.alert(I18n.t("poll.error_while_casting_votes"))}).finally(function(){t.loading=!1})}}})});
//# sourceMappingURL=https://discourse-cdn.freetls.fastly.net/try/assets/plugin-f1fe546a9a2d9ae181900ff80529da3bc7bb5249c9d3dd546e6545fa4c40fe7e.js.map